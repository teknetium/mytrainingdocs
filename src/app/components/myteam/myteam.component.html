<nz-modal [(nzVisible)]="showBulkAddModal" nzTitle="Add Users Wizard" nzWidth="80%"
    (nzOnCancel)="showBulkAddModal = false" (nzOnOk)="showBulkAddModal = false">
    <ng-template #stepContent let-task="task" let-desc="description" let-title="title" let-content="content">
        <div style="width:500px;height:300px;">
            <div style="text-align:center;font-size:14px;color:blue;font-weight:500;">
                {{task}}&nbsp;&nbsp;-&nbsp;&nbsp;{{desc}}</div>
            <div style="margin-top:20px;height:80%;">
                <div style="font-weight:200;font-size:22px;">{{title}}</div>
                <div
                    style="margin-top:20px;padding:20px;height:60%;border:1px solid #bbbbbb;border-radius:5px;background-color: #f1f1f1;">
                    {{ content }}
                </div>
            </div>
        </div>
    </ng-template>
    <div>
        <nz-steps [nzCurrent]="currentStep">
            <nz-step nzTitle="Data Requirements"></nz-step>
            <nz-step nzTitle="Upload Data"></nz-step>
            <nz-step nzTitle="Register Users"></nz-step>
        </nz-steps>
        <div *ngIf="currentStep === 0" class="steps-content">
            <div style="text-align: center;">
                <h2>Data Requirements for Onboarding your Team/Organization</h2>
            </div>
            <div style="display:inline-block;font-size:16px;font-weight: 200;">
                <p>
                    You will need the following data for each user:
                </p>
                <div style="padding-left:40px;">
                    <ul style="list-style-type:none;">
                        <li>First Name</li>
                        <li>Last Name</li>
                        <li>Email Address</li>
                        <li>Supervisor's Email Address</li>
                    </ul>

                    <p></p>
                </div>
                <p>
                    The most convenient source of this data is from your company's Human Resources Management system.
                    HRM systems typically have a way to export data to a text or spreadsheat format document.
                </p>
                <p>
                    
                </p>
                <div style="padding-left:40px;">

                    <div style="font-size: 16px;margin-bottom:20px;">
                        <ol>
                            <li style="margin-bottom:10px;">
                                Create a text file with the required items separated by commas. One user per
                                line.
                                This file will be uploaded into the system. The following is an example of the required
                                formatting.
                                <span style="font-weight:500;margin-left:20px;color:black;">
                                    Frank,Smith,frank@company.com,my.supervisor@company.com
                                </span>
                            </li>
                            <li>
                                Enter the information on the fly in the onboarding dialog.
                            </li>
                        </ol>
                    </div>
                </div>
            </div>
        </div>
        <div *ngIf="currentStep === 1" class="steps-content">
            <div style="display:block;margin-bottom:20px;">
                <button nz-button nzShape="round" (click)="launchImporter()" nzType="primary">
                    Upload Data
                </button>
            </div>
            <div *ngIf="authenticatedUser.appAdmin" style="float:left;">
                <button nz-button nzShape="round" (click)="testBulkAdd()" nzType="primary"
                    style="display:inline-block;margin-right:10px;">
                    Generate New Org
                </button>
                <div style="display:inline-block;">
                    Max Depth
                    <nz-input-number [(ngModel)]="maxLevel" [nzMin]="1" [nzMax]="10" [nzStep]="1">
                    </nz-input-number>
                </div>
                <div style="display:inline-block;">
                    User Min
                    <nz-input-number [(ngModel)]="userMin" [nzMin]="1" [nzMax]="10" [nzStep]="1">
                    </nz-input-number>
                </div>
                <div style="display:inline-block;">
                    User Max
                    <nz-input-number [(ngModel)]="userMax" [nzMin]="1" [nzMax]="20" [nzStep]="1">
                    </nz-input-number>
                </div>
            </div>
        </div>
        <div *ngIf="currentStep === 2" class="steps-content">
            The upload process has completed.  {{newUsers.length}} users were uploaded.
            <button nz-button nzType="default" (click)="registerUsers()">
                <span>Register Users</span>
            </button>
        </div>
        <div class="steps-action">
            <!--
            <button nz-button nzType="default" (click)="pre()" *ngIf="currentStep > 0">
                <span>Previous</span>
            </button>
            -->
            <button nz-button nzType="default" (click)="next()" *ngIf="currentStep < 1">
                <span>Next</span>
            </button>
            <!--
            <button nz-button nzType="primary" (click)="done()" *ngIf="currentStep === 2">
                <span>Done</span>
            </button>
            -->
        </div>

    </div>
</nz-modal>
<div *ngIf="authenticatedUser && !showBulkAddModal" style="height:100%;">
    <div *ngIf="showOrgChart === 'true'" class="legend" [@legendSlide]="showLegend ? 'open' : 'closed'">
        <div>
            <div style="font-size:18px;text-align: center;margin-bottom:20px;font-weight: 500;">
                Legend
            </div>
            <div class="legend-header">
                SELECTION MODE
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="User Status Mode" nzPopoverContent="Shows User Status"
                nzPopoverPlacement="right">
                <i class="far fa-fw fa-user-check legend-icon"></i>
                <span class="legend-text">User Status</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Individual Mode"
                nzPopoverContent="Selects individual users" nzPopoverPlacement="right">
                <i class="far fa-fw fa-user legend-icon"></i>
                <span class="legend-text">Individual</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Training Mode"
                nzPopoverContent="Selects users based on an assigned training" nzPopoverPlacement="right">
                <i class="far fa-fw fa-graduation-cap legend-icon"></i>
                <span class="legend-text">Training</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Suborganization Mode"
                nzPopoverContent="Selects entire suborganizations" nzPopoverPlacement="right">
                <i class="far fa-fw fa-users legend-icon"></i>
                <span class="legend-text">Suborganization</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Job Title Mode"
                nzPopoverContent="Selects users based on their job title" nzPopoverPlacement="right">
                <i class="far fa-fw fa-briefcase legend-icon"></i>
                <span class="legend-text">Job Title</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="User Type Mode"
                nzPopoverContent="Selects users based on their user type" nzPopoverPlacement="right">
                <i class="far fa-fw fa-user-cowboy legend-icon"></i>
                <span class="legend-text">User Type</span>
            </div>
            <div class="legend-header">
                USER STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Active User"
                nzPopoverContent="A blue user icon indicates that this user is active" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:blue;"></i>
                <span class="legend-text">Active User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Inactive User"
                nzPopoverContent="A grey user icon indicates that this user has been marked as inactive."
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:#aaaaaa;"></i>
                <span class="legend-text">Inactive User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Pending"
                nzPopoverContent="An orange user icon indicates that this user has not completed the registration process."
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:orange;"></i>
                <span class="legend-text">Pending Registration Completion</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Error"
                nzPopoverContent="A red user icon indicates that there is some error associated with this user account."
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:red;"></i>
                <span class="legend-text">Error</span>
            </div>
            <div class="legend-header">
                USER TRAINING STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="No Trainings Assigned"
                nzPopoverContent="Black user icon indicates no trainings have been assigned" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon"></i>
                <span class="legend-text">No Trainings Assigned</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Inprogress"
                nzPopoverContent="Green user icon indicates that this user has no trainings that are past due"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:#46bd15;"></i>
                <span class="legend-text">Trainings In Progress</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Past Due"
                nzPopoverContent="Red user icon indicates that at least one training is past due"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon" style="color:red;"></i>
                <span class="legend-text">&#62;= 1 Training Past Due</span>
            </div>
            <div class="legend-header">
                USER TYPE
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Individual Contributor"
                nzPopoverContent="This user is an indiviual contributor" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user legend-icon"></i>
                <span class="legend-text">Individual Contributor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Supervisor"
                nzPopoverContent="This user is a supervisor who has individual contributors reporting to them"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user-tie legend-icon"></i>
                <span class="legend-text">Supervisor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Volunteer" nzPopoverContent="This user is a volunteer"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user-cowboy legend-icon"></i>
                <span class="legend-text">Volunteer</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Contractor"
                nzPopoverContent="This user is employed as a contractor" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user-hard-hat legend-icon"></i>
                <span class="legend-text">Contractor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Customer"
                nzPopoverContent="This user is an external customer" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-user-alien legend-icon"></i>
                <span class="legend-text">Customer</span>
            </div>
            <div class="legend-header">
                TRAINING STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="In Progress"
                nzPopoverContent="This training is in progress, not completed nor past due" nzPopoverPlacement="right">
                <i class="fas fa-fw fa-graduation-cap legend-icon" style="color:#46bd15;"></i>
                <span class="legend-text">In Progress</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Past Due" nzPopoverContent="This training is past due"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-graduation-cap legend-icon" style="color:red;"></i>
                <span class="legend-text">Past Due</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Completed" nz-popover
                nzPopoverContent="This training has been completed" nzPopoverPlacement="left">
                <i class="fas fa-fw fa-graduation-cap legend-icon" style="color:#4891f7;"></i>
                <span class="legend-text">Completed</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Pending Cert Approval"
                nzPopoverContent="This training is a recurring training whose certificate is pending approval by the user's supervisor"
                nzPopoverPlacement="right">
                <i class="fas fa-fw fa-graduation-cap legend-icon" style="color:#feb90b;"></i>
                <span class="legend-text">Pending Cert Approval</span>
            </div>
            <div class="legend-header">
                MISC
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Selected User"
                nzPopoverContent="This style container indicates that this user is included in the selection group"
                nzPopoverPlacement="rightBottom">
                <div
                    style="display:inline-block;width:15px;height:15px;font-size:16px;border:2px solid #eaab10;background: rgba(253, 239, 178, 1);vertical-align: middle;">
                </div>
                <span class="legend-text">Selected User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Hover User" [nzPopoverContent]="hoverTemplate"
                nzPopoverPlacement="rightBottom">
                <div
                    style="display:inline-block;width:15px;height:15px;font-size:16px;border:2px solid #afbcf8;background: rgba(0,0,255,.2);vertical-align: middle;">
                </div>
                <span class="legend-text">Hover User</span>
            </div>
            <ng-template #hoverTemplate>
                <div style="width:400px;height:fit-content;">
                    This style container indicates that this user either:
                    <div style="padding-left:30px;">
                        <ul>
                            <li>
                                has mouse focus
                            </li>
                            <li>
                                is in the suborganization of the user with mouse focus
                            </li>
                            <li>
                                is in the reporting chain of the user with mouse focus
                            </li>
                        </ul>
                    </div>
                </div>
            </ng-template>
        </div>
    </div>
    <div style="position:fixed;bottom:5px;left:5px;z-index:1000;">
        <button *ngIf="!showLegend" nz-button nzType="primary" (click)="showLegend = true">
            Show Legend
        </button>
        <button *ngIf="showLegend" nz-button nzType="primary" (click)="showLegend = false">
            Hide Legend
        </button>
    </div>
    <div style="position:relative;width:100%;height:100%;">
        <div
            style="position:relative;margin-left:-20px;margin-top:-20px;margin-right:-20px;background-color: #fafafa;border:1px solid #dddddd;padding:10px 20px;">
            <div>
                <div style="float:left;width:20%;">
                    <nz-radio-group [(ngModel)]="showOrgChart" (ngModelChange)="toggleMainView($event)">
                        <label nz-radio-button nzValue="true" nz-tooltip nzTooltipTitle="Org Chart"><i nz-icon
                                nzType="apartment" nzTheme="outline" style="font-size:18px;"></i></label>
                        <label nz-radio-button nzValue="false" nz-tooltip nzTooltipTitle="List"><i nz-icon
                                nzType="unordered-list" nzTheme="outline" style="font-size:18px;"></i></label>
                    </nz-radio-group>
                    <div style="display:inline-block;margin-left:20px;vertical-align: middle;">
                        <button nz-button nzSize="default" nzType="default" style="display:inline-block;"
                            (click)="showBulkAddModal = true" nz-tooltip nzTooltipPlacement="top"
                            nzTooltipTitle="Add Users">
                            <i class="fas fa-user-plus" style="font-size:18px;"></i>
                        </button>
                    </div>
                    <div style="cursor:pointer;position:fixed;top:65px;left:220px;width:20px;height:60px;z-index:1000;"
                        (click)="showCSVBuffer = !showCSVBuffer"></div>
                </div>
                <div *ngIf="showOrgChart === 'true'" style="float:left;width:50%;">
                    <div style="float:right;padding-right:10%;">
                        <nz-radio-group [(ngModel)]="selectionMode" (ngModelChange)="setSelectionMode($event)">
                            <label nz-radio-button nzValue="UserStatus" nz-tooltip
                                nzTooltipTitle="Select by User Status" nzTooltipPlacement="bottomLeft">
                                <i class="fas fa-fw fa-user-check" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="Individual" nzTooltipPlacement nz-tooltip
                                nzTooltipTitle="Select a Single User" nzTooltipPlacement="bottomLeft"
                                joyrideStep="task1Step1" [stepContent]="stepContent"
                                [stepContentParams]="taskStepContentHash?.task1Step1"
                                (next)="onTaskWizardNext('task1Step1')">
                                <i class="fas fa-fw fa-user" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="Training" nz-tooltip nzTooltipTitle="Select by Training"
                                nzTooltipPlacement="bottomLeft">
                                <i class="fas fa-fw fa-graduation-cap" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="Org" nz-tooltip nzTooltipTitle="Select by Suborganization"
                                nzTooltipPlacement="bottomLeft">
                                <i class="fas fa-fw fa-users" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="JobTitle" nz-tooltip nzTooltipTitle="Select by Job Title"
                                nzTooltipPlacement="bottomLeft">
                                <i class="fas fa-fw fa-briefcase" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="UserType" nz-tooltip nzTooltipTitle="Select by User Type"
                                nzTooltipPlacement="bottomLeft">
                                <i class="fas fa-fw fa-user-cowboy" style="font-size:18px;"></i>
                            </label>
                        </nz-radio-group>
                    </div>
                </div>
                <div style="float:right;width:30%;">
                    <div style="float:right;width:70%;">
                        <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" class="user-search">
                            <input type="text" nz-input placeholder="User Search" [(ngModel)]="userNameToSearchFor"
                                (ngModelChange)="onUserSearchChange($event)" [nzAutocomplete]="autoUserSearch"
                                style="border:1px solid white;" />
                        </nz-input-group>
                        <nz-autocomplete [nzDataSource]="matchingUsers" #autoUserSearch></nz-autocomplete>
                        <ng-template #suffixIconButton>
                            <button nz-button nzType="primary" nzSearch style="z-index: 1000;height:41px;"><i nz-icon
                                    nzType="search"></i></button>
                        </ng-template>
                    </div>
                </div>
                <div style="clear:both;"></div>
            </div>
        </div>
        <div *ngIf="authenticatedUser.email === 'gregl@teknetium.com' && showCSVBuffer">
            <textarea rows="10" nz-input [(ngModel)]="usersCSV"></textarea>
        </div>
        <div *ngIf="showOrgChart === 'true'" style="position:relative;z-index:1;">
            <div style="display:block;width:100%;padding-top:10px;">
                <div style="float:left;margin-right:20px;">
                </div>
                <div *ngIf="selectionMode === 'JobTitle'" style="float:left;margin-right:20px;">
                    <nz-select ngDefaultControl nzMode="tags" nzPlaceHolder="Select Job Titles"
                        [(ngModel)]="currentJobTitlesSelected" (ngModelChange)="jobTitleSelectedChanged($event)"
                        style="width:250px;">
                        <nz-option *ngFor="let jobTitle of listOfJobTitles" [nzLabel]="jobTitle.text"
                            [nzValue]="jobTitle.value"></nz-option>
                    </nz-select>
                </div>
                <div *ngIf="selectionMode === 'Individual'" style="float:left;margin-right:20px;">
                    <div style="display:inline-block;">
                        <div class="selected-node" style="padding:7px;display:inline-block;margin-right:10px;">
                            <i [ngClass]="userTypeIconHash[selectedUser?.userType]" style="font-size:16px;"
                                [ngStyle]="{'color': userTrainingStatusColorHash[selectedUser?.trainingStatus]}"
                                nz-tooltip [nzTooltipTitle]=""></i>&nbsp;
                            <span *ngIf="selectedUser"
                                style="display:inline-block;font-size:16px;font-weight: 200;color:black;">{{selectedUser?.firstName}}
                                {{selectedUser?.lastName}}&nbsp;&nbsp;
                            </span>
                            <span *ngIf="!selectedUser" style="display:inline-block;font-size:16px;color:#444444;">No
                                User Selected
                            </span>
                        </div>
                    </div>
                    <div style="display:inline-block;margin-left:10px;">
                        <div style="border:1px solid #dddddd;border-radius:32px;padding:3px;display:inline-block;">
                            <button nz-button nzShape="circle" nzType="default" [disabled]="!userIdSelected"
                                style="display:inline-block;" (click)="showUserTrainingModal = true" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="Assign Training to User"
                                joyrideStep="task1Step3" [stepContent]="stepContent"
                                [stepContentParams]="taskStepContentHash?.task1Step3"
                                (next)="onTaskWizardNext('task1Step3')">
                                <i class="fas fa-plus"></i>
                            </button>
                            <button nz-button nzShape="circle" nzType="default" [disabled]="!userIdSelected"
                                style="display:inline-block;margin-left:3px;"
                                (click)="manageCurrentTrainingsModal = true" nz-tooltip nzTooltipPlacement="bottomLeft"
                                nzTooltipTitle="Manage Current Trainings">
                                <i class="fas fa-graduation-cap"></i>
                            </button>
                            <!--
                            <button [disabled]="!userIdSelected" nz-button nzShape="circle"
                                style="display:inline-block;margin-left:3px;" nz-popconfirm
                                nzPopconfirmTitle="Mark this user as inactive?"
                                (nzOnConfirm)="confirmInactive(selectedUser)" nz-tooltip nzTooltipPlacement="bottomLeft"
                                nzTooltipTitle="Mark this user as inactive">
                                <i class="fas fa-user-times"></i>
                            </button>
                            -->
                            <button [disabled]="!userIdSelected" nz-button nzShape="circle"
                                style="display:inline-block;margin-left:3px;" nz-tooltip nzTooltipPlacement="bottomLeft"
                                nzTooltipTitle="Edit User" (click)="editUser()">
                                <i class="fas fa-user-edit"></i>
                            </button>
                            <button [disabled]="!userIdSelected" nz-button nzShape="circle"
                                style="display:inline-block;margin-left:3px;" nz-popconfirm
                                nzPopconfirmTitle="Resend Registration Message?"
                                (nzOnConfirm)="resendRegistrationMsg(selectedUser, authenticatedUser.email)"
                                nz-tooltip nzTooltipPlacement="bottomLeft" nzTooltipTitle="Resend Registration Email">
                                <i class="fas fa-share"></i>
                            </button>
                        </div>
                    </div>
                </div>
                <div *ngIf="selectionMode === 'Training'" style="float:left;margin-right:20px;">
                    <nz-select [nzCustomTemplate]="trainingTemplate" nzAllowClear ngDefaultControl
                        nzPlaceHolder="Select a Training" [(ngModel)]="currentTrainingSelected"
                        nzOptionOverflowSize="600" (ngModelChange)="trainingSelectedChanged($event)"
                        style="width:250px;">
                        <nz-option *ngFor="let training of listOfTrainingTitles" [nzLabel]="training.text"
                            [nzValue]="training.value" nzCustomContent
                            [nzDisabled]="allTrainingIdHash[training.value]?.versions.length === 1">
                            <div style="padding:5px;">
                                <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                    [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                </i>
                                <div style="font-size:12px;float:left;width:155px;overflow: hidden;">{{training.text}}
                                </div>
                                <div style="float:right;font-size:10px;">
                                    {{ versionFormatter(allTrainingIdHash[training.value]?.versions[0].version) }}
                                </div>
                                <div style="clear: both;"></div>
                            </div>
                        </nz-option>
                    </nz-select>
                    <ng-template #trainingTemplate let-selected>
                        <div style="width:160px;overflow: hidden;">
                            <i [ngClass]="getSelectedTrainingIconClass(selected.nzValue)"
                                [ngStyle]="{'color': getTrainingIconColor(selected.nzValue)}"
                                style="display:inline-block;vertical-align: baseline;font-size:16px;margin-right:10px;"></i>
                            <div style="display:inline-block;font-size:12px;">
                                {{ selected.nzLabel }}
                            </div>
                        </div>
                    </ng-template>
                </div>
                <div *ngIf="selectionMode === 'UserType'" style="float:left;margin-right:20px;">
                    <nz-radio-group [(ngModel)]="currentUserType" (ngModelChange)="userTypeSelectedChanged($event)">
                        <label nz-radio-button nzValue="individualContributor" nz-tooltip
                            nzTooltipPlacement="bottomLeft" nzTooltipTitle="Individual Contributor">
                            <i class="fas fa-fw fa-user" style="font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="supervisor" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Supervisor">
                            <i class="fas fa-fw fa-user-tie" style="font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="volunteer" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Volunteer">
                            <i class="fas fa-fw fa-user-cowboy" style="font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="contractor" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Contractor">
                            <i class="fas fa-fw fa-user-hard-hat" style="font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="customer" nz-tooltip nzTooltipPlacement="bottomLeft"
                            nzTooltipTitle="Customer">
                            <i class="fas fa-fw fa-user-alien" style="font-size:18px;"></i>
                        </label>
                    </nz-radio-group>
                </div>
                <div *ngIf="selectionMode === 'UserStatus'" style="float:left;margin-right:20px;">
                    <nz-radio-group [(ngModel)]="currentUserStatus" (ngModelChange)="userStatusSelectedChanged($event)">
                        <label nz-radio-button nzValue="active" nz-tooltip nzTooltipPlacement="bottomLeft"
                            nzTooltipTitle="Active">
                            <i class="fas fa-fw fa-user" style="color:blue;font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="inactive" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Inactive">
                            <i class="fas fa-fw fa-user" style="color:#aaaaaa;font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="pending" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Pending">
                            <i class="fas fa-fw fa-user" style="color:#feb90b;font-size:18px;"></i>
                        </label>
                        <label nz-radio-button nzValue="error" nzTooltipPlacement="bottomLeft" nz-tooltip
                            nzTooltipTitle="Error">
                            <i class="fas fa-fw fa-user" style="color:red;font-size:18px;"></i>
                        </label>
                    </nz-radio-group>
                </div>
                <div style="float:left;">
                    <div *ngIf="selectionMode !== 'Individual' && !(selectionMode === 'UserStatus' && currentUserStatus === 'error')"
                        class="selected-node" style="padding:7px;display:inline-block;color:#444444;">
                        {{userIdsSelected.length}} Users Selected
                    </div>
                    <div *ngIf="selectionMode !== 'Individual' && selectionMode !== 'Errors'"
                        style="border:1px solid #dddddd;border-radius:32px;margin-left:20px;padding:3px;display:inline-block;">
                        <!--
                        <button *ngIf="selectionMode !== 'Individual'" nz-button nzShape="circle" nzType="default"
                            [disabled]="userIdsSelected.length === 0  || currentUserStatus === 'inactive' || currentUserStatus === 'pending' || currentUserStatus === 'error'"
                            style="display:inline-block;" (click)="processNextUser()" nz-tooltip
                            nzTooltipPlacement="bottomLeft" nzTooltipTitle="Next User">
                            <i class="fas fa-arrow-alt-to-right"></i></button>
                            -->
                        <button *ngIf="selectionMode !== 'Individual'" nz-button nzShape="circle" nzType="default"
                            [disabled]="userIdsSelected.length === 0  || currentUserStatus === 'inactive' || currentUserStatus === 'pending' || currentUserStatus === 'error'"
                            style="display:inline-block;" (click)="showAssignTrainingModal()" nz-tooltip
                            nzTooltipPlacement="bottomLeft" nzTooltipTitle="Assign Training to Users">
                            <i class="fas fa-plus"></i></button>
                        <button *ngIf="selectionMode === 'Training'" nz-button nzShape="circle"
                            [disabled]="userIdsSelected.length === 0" style="display:inline-block;margin-left:3px;"
                            nz-popconfirm nzPopconfirmTitle="Remove this training from all users selected?"
                            (nzOnConfirm)="confirmUserTrainingDelete()" nz-tooltip nzTooltipPlacement="bottomLeft"
                            nzTooltipTitle="Remove Training from Users">
                            <i class="fas fa-trash"></i></button>
                        <button *ngIf="selectionMode !== 'Individual'" nz-button nzShape="circle" nzType="default"
                            [disabled]="userIdsSelected.length === 0 || currentUserStatus === 'inactive' || currentUserStatus === 'pending' || currentUserStatus === 'error'"
                            style="display:inline-block;margin-left:3px;" (click)="showMsgModal()" nz-tooltip
                            nzTooltipPlacement="bottomLeft" nzTooltipTitle="Send Message to Selected Users">
                            <i class="fas fa-envelope"></i></button>
                    </div>
                    <nz-modal [(nzVisible)]="showMessageModal" nzTitle="Send a Message to the Selected Users"
                        (nzOnCancel)="handleSendMessageCancel()" (nzOnOk)="sendMessage()" nzOkText="Send">
                        <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Recipients ( {{
                            recipientUidList.length }} )</label>
                        <div
                            style="display:block;margin-bottom:10px;padding-top:5px;max-height:200px;height:fit-content;overflow: scroll;border:1px solid #999999;border-radius: 5px;">
                            <div style="display:block;padding:4px 20px 0 10px;"
                                *ngFor="let uid of recipientUidList; index as i" (mouseenter)="currentRecipient(uid)"
                                [ngClass]="{'current-recipient': currentRecipientUid === uid}">
                                {{ myOrgUserHash[uid].firstName }} {{ myOrgUserHash[uid].lastName }}

                                <i *ngIf="currentRecipientUid === uid" nz-icon nzType="close-circle"
                                    [nzTheme]="'twotone'" [nzTwotoneColor]="'red'" nz-popconfirm
                                    nzPopconfirmTitle="Remove this recipient?" [nzPopconfirmTrigger]="'click'"
                                    [nzPopconfirmPlacement]="'right'" (nzOnConfirm)="removeRecipient(i)"
                                    style="float:right;font-size:16px;cursor:pointer;vertical-align: middle;"></i>

                            </div>
                        </div>
                        <div style="z-index: 1000;background-color: white;" (mouseenter)="currentRecipient('')">
                            <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Subject</label>
                            <input nz-input type="text" placeholder="Subject" ngDefaultControl [(ngModel)]="msgSubject"
                                style="margin-bottom:10px;">
                            <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Message</label>
                            <textarea rows="4" nz-input [(ngModel)]="msgBody"></textarea>
                        </div>
                    </nz-modal>
                </div>
                <div style="float:right;">
                    <div
                        style="border:1px solid #dddddd;border-radius: 25px;padding: 3px;width: fit-content;display: inline-block;">
                        <button nz-button nzShape="circle" (click)="showDownloadPNGImageModal()" id="downloadJPGLink"
                            style="margin-right:3px;vertical-align: middle;" nz-tooltip nzTooltipPlacement="bottomRight"
                            nzTooltipTitle="View Org Chart as Image">
                            <i class="fas fa-camera" style="font-size:16px;vertical-align: middle;"></i>
                        </button>
                        <button *ngIf="!includeFullName" nz-button nzShape="circle"
                            (click)="includeFullName = !includeFullName"
                            style="margin-right:3px;vertical-align: middle;" nz-tooltip nzTooltipPlacement="bottomRight"
                            nzTooltipTitle="Show Individual Contributor's Name">
                            <i class="fas fa-tag" style="font-size:16px;vertical-align: middle;"></i>
                        </button>
                        <button *ngIf="includeFullName" nz-button nzShape="circle"
                            (click)="includeFullName = !includeFullName"
                            style="margin-right:3px;vertical-align: middle;" nz-tooltip nzTooltipPlacement="bottomRight"
                            nzTooltipTitle="Hide Individual Contributor's Name">
                            <span class="fa-stack fa-2x" style="font-size:12px;">
                                <i class="fas fa-tag fa-stack-1x"></i>
                                <i class="fal fa-ban fa-stack-2x"></i>
                            </span>
                        </button>
                        <button *ngIf="(org$ | async)?.plan !== 'basic'" nz-button nzShape="circle"
                            (click)="collapseAllSubOrgs(false)" style="margin-right:3px;vertical-align: middle;"
                            nz-tooltip nzTooltipPlacement="bottomRight" nzTooltipTitle="Expand All Suborganizations">
                            <i class="fas fa-chevron-circle-down" style="font-size:16px;vertical-align: middle;"></i>
                        </button>
                        <button *ngIf="(org$ | async)?.plan !== 'basic'" nz-button nzShape="circle"
                            (click)="collapseAllSubOrgs(true)" style="margin-right:3px;vertical-align: middle;"
                            nz-tooltip nzTooltipPlacement="bottomRight" nzTooltipTitle="Collapse All Suborganizations">
                            <i class="fas fa-chevron-circle-up" style="font-size:16px;vertical-align: middle;"></i>
                        </button>
                        <button nz-button nzShape="circle" (click)="zoomIn()"
                            style="margin-right:3px;vertical-align: middle;" nz-tooltip nzTooltipPlacement="bottomRight"
                            nzTooltipTitle="Larger Text">
                            <i class="fas fa-text-size" style="font-size:18px;vertical-align: middle;"></i>
                        </button>
                        <button nz-button nzShape="circle" (click)="zoomOut()" style="vertical-align: middle;"
                            nz-tooltip nzTooltipPlacement="bottomRight" nzTooltipTitle="Smaller Text">
                            <i class="fas fa-text-size" style="font-size:10px;vertical-align: middle;"></i>
                        </button>
                    </div>
                </div>
                <div style="clear: both;"></div>
            </div>
            <div
                style="position:fixed;bottom:5px;left:150px;right:150px;background:rgba(0,0,255,.09);padding:10px;border:2px solid #afbcf8;border-radius: 5px;">
                <div
                    style="float:left;width:50%;background: rgba(255,255,255, .9);border-radius: 5px;height:35px;padding:5px;">
                    <div *ngIf="currentHoverUser" style="width:100%;">
                        <div style="float:left;overflow-x: hidden;">
                            <i [ngClass]="userTypeIconHash[currentHoverUser?.userType]"
                                style="font-size:16px;vertical-align: middle;"
                                [ngStyle]="{'color': userTrainingStatusColorHash[currentHoverUser?.trainingStatus]}"
                                nz-tooltip [nzTooltipTitle]=""></i>&nbsp;
                            <span
                                style="display:inline-block;font-size:16px;font-weight: 500;color:black;vertical-align: middle;">{{currentHoverUser?.firstName}}
                                {{currentHoverUser?.lastName}}&nbsp;&nbsp;
                            </span>
                            <span
                                style="display:inline-block;font-size:12px;font-weight: 300;color:#444444;vertical-align: middle;margin-right:20px;">({{currentHoverUser?.jobTitle}})
                            </span>
                        </div>
                        <div *ngIf="currentHoverUser?.userType === 'supervisor'" style="float:right;">
                            <i class="fas fa-user"
                                style="font-size:16px;color:black;vertical-align: middle;margin-right:3px;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="No Trainings Assigned"></i>
                            <span style="margin-right:10px;vertical-align: middle;">{{
                                nodeStatHash[currentHoverUid]?.noneCnt}}</span>
                            <i class="fas fa-user"
                                style="font-size:16px;color:#46bd15;margin-right:3px;vertical-align: middle;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="Up To Date"></i>
                            <span style="margin-right:10px;vertical-align: middle;">{{
                                nodeStatHash[currentHoverUid]?.upToDateCnt}}</span>
                            <i class="fas fa-user"
                                style="font-size:16px;color:red;margin-right:3px;vertical-align: middle;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="Past Due"></i>
                            <span style="vertical-align: middle;">{{ nodeStatHash[currentHoverUid]?.pastDueCnt}}</span>
                        </div>
                    </div>
                </div>
                <div style="float:right;width:48%;background: rgba(255,255,255, .9);border-radius: 5px;height:35px;">
                    <app-user-trainings mode="admin" logSession="off" [uid]="currentHoverUid"
                        style="width:100%;height:35px;float:left;" compact="yes">
                    </app-user-trainings>
                </div>
                <div style="clear: both;"></div>
            </div>
        </div>
        <div *ngIf="showOrgChart !== 'true'" style="padding-top:20px;">
            <div style="width:100%;">
                <span style="float:right;margin-right:5px;">1 -
                    {{userListDisplay.length}}</span>
                <div style="clear:both;"></div>
            </div>
            <nz-table #nestedTable [nzData]="userListDisplay" nzPageSize="10000" nzShowRowSelection="true"
                nzShowPagination="false" nzSize="small" [nzScroll]="{ y: '350px' }"
                style="width:100%;background-color: #fafafa;font-size:12px;font-size:12px;display:inline-block;">
                <thead (nzSortChange)="sort($event)" nzSingleSort>
                    <tr style="background-color: #fafafa;">
                        <th nzShowSort nzSortKey="trainingStatus" [nzFilters]="listOfTrainingStatus"
                            (nzFilterChange)="filterTrainingStatus($event)" nzShowFilter style="width:10%;">Training
                            Status</th>
                        <th nzShowSort nzSortKey="lastName" style="width:17%;">Name</th>
                        <th nzShowSort nzSortKey="supervisorId" style="width:17%;">Supervisor</th>
                        <th nzShowSort nzSortKey="userType" [nzFilters]="listOfUserTypes"
                            (nzFilterChange)="filterUserType($event)" nzShowFilter style="width:15%;">User Type</th>
                        <th nzShowSort nzSortKey="jobTitle" style="width:10%;" [nzFilters]="listOfJobTitles"
                            (nzFilterChange)="filterJobTitles($event)" nzShowFilter>Job Title</th>
                        <th nzShowSort nzSortKey="userData[userDataProp1]" style="width:10%;" [nzFilters]="listOfUserData1"
                            (nzFilterChange)="filterJobTitles($event)" nzShowFilter>Job Title</th>
                        <th style="width:15%;">Trainings</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-template ngFor let-data [ngForOf]="nestedTable.data" let-i="index">
                        <tr style="font-size:12px;background-color: white;line-height:10px;"
                            (mouseenter)="hoverUid = data._id" (mouseleave)="hoverUid = null"
                            [ngClass]="{'row-selected': rowSelected === i}">
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:10%;">
                                <i [ngClass]="userTypeIconHash[data.userType]"
                                    style="font-size:16px;display:inline-block;"
                                    [ngStyle]="{'color': userTrainingStatusColorHash[data.trainingStatus], 'font-size.px': iconFontSize}"
                                    nz-tooltip [nzTooltipTitle]=""></i>
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:17%;">
                                {{data.firstName}} {{data.lastName}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:17%;">
                                {{myOrgUserHash[data.supervisorId]?.firstName}}
                                {{myOrgUserHash[data.supervisorId]?.lastName}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:15%;">
                                {{data.userType}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:10%;">
                                {{data.jobTitle}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:15%;">
                                <div *ngFor="let ut of uidUTHash[data._id]" style="float:left;margin-left:10px;">
                                    <i [ngClass]="allTrainingIdHash[ut.tid]?.versions[0].iconClass"
                                        style="font-size:20px;text-align: center;vertical-align: middle;" nz-tooltip
                                        [nzTooltipTitle]="allTrainingIdHash[ut.tid]?.versions[0].title"
                                        [ngStyle]="{'color': allTrainingIdHash[ut.tid]?.versions[0].iconColor}">
                                    </i>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </tbody>
            </nz-table>
        </div>


        <div *ngIf="showOrgChart === 'true'" style="display:block;height:75%;overflow:scroll;margin-top:20px;">

            <nz-modal [nzVisible]="showOrgChartImageModal" nzTitle="Org Chart" nzWidth="80%"
                (nzOnCancel)="showOrgChartImageModal = false" (nzOnOk)="downloadPNGImage()" nzOkText="Download Image">
                <div style="text-align: center;">
                    <img #canvas width="100%">
                    <a #downloadPNGLink></a>
                </div>
            </nz-modal>
            <div style="text-align: center;width:100%;overflow: scroll;position:relative;">
                <!--
                <div id="orgChartTarget" style="width:300px;height:200px;position:fixed;left: 5px;top:200px;border:1px solid #dddddd;">
                <canvas id="canvas" width="300" height="200" style="position:fixed;left: 5px;top:200px;border:1px solid #dddddd;"></canvas>
                </div>
                -->
                <div #orgChart style="background-color:white;display:inline-block;white-space: nowrap;">
                    <div style="margin-bottom: 20px;">
                        <i *ngIf="selectionMode === 'Training'"
                            [ngClass]="getSelectedTrainingIconClass(currentTrainingSelected)"
                            [ngStyle]="{'color': getTrainingIconColor(currentTrainingSelected)}"
                            style="display:inline-block;vertical-align: baseline;font-size:28px;margin-right:15px;"></i>
                        <h2 style="display:inline-block;">{{orgChartTitle}}</h2>
                        <span style="display:inline-block;font-size:18px;color:#aaaaaa;">&nbsp;&nbsp;&nbsp;{{today |
                            date}}</span>
                    </div>
                    <div class="supervisor-node org-chart-node" style="text-align: center;margin-bottom:20px;"
                        id="{{authenticatedUser._id}}">
                        <div style="display:inline-block;padding:5px 5px 0 5px;position:relative;border:2px solid white;cursor:pointer;border-radius:5px;"
                            (mouseenter)="setHoverData(authenticatedUser._id)" (mouseleave)="setHoverData(null)"
                            (click)="selectUser(authenticatedUser._id)" joyrideStep="task1Step2"
                            [stepContent]="stepContent" [stepContentParams]="taskStepContentHash?.task1Step2"
                            (next)="onTaskWizardNext('task1Step2')"
                            [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === authenticatedUser._id) || (selectionMode !== 'Indiviual' && userIdsSelected.includes(authenticatedUser._id)), 'hover-node': authenticatedUser._id === currentHoverUid  || currentHoverReportChain.includes(authenticatedUser._id)}">

                            <i [ngClass]="userTypeIconHash[authenticatedUser.userType]" style="font-size:16px;"
                                [ngStyle]="{'color': getStatusColor(authenticatedUser._id)}"></i>
                            <span style="display: block;color:#666666;" [ngStyle]="{'font-size.px': textFontSize}">
                                {{authenticatedUser.firstName}}<br>{{authenticatedUser.lastName}}
                            </span>
                        </div>
                        <div *ngIf="!collapsedNodes.includes(authenticatedUser._id)"
                            class="org-chart-vert-connector-bottom">
                        </div>
                        <div *ngIf="!collapsedNodes.includes(authenticatedUser._id) && myOrgUserHash[authenticatedUser._id]?.userType === 'supervisor'"
                            (click)="collapseNode(authenticatedUser._id, true)" nz-tooltip
                            nzTooltipTitle="Collapse Suborganization" nzTooltipPlacement="right">
                            <i class="fal fa-minus-circle" style="font-size:14px;cursor:pointer;"></i>
                        </div>
                        <div *ngIf="collapsedNodes.includes(authenticatedUser._id) && myOrgUserHash[authenticatedUser._id]?.userType === 'supervisor'"
                            (click)="collapseNode(authenticatedUser._id, false)" style="margin:0 8px;">
                            <i class="far fa-plus-circle" nz-tooltip nzTooltipTitle="Expand Suborganization"
                                nzTooltipPlacement="right"
                                style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                            <div (mouseenter)="setHoverData(authenticatedUser._id)" (mouseleave)="setHoverData(null)"
                                class="collapsed-block"
                                [ngClass]="{'hover-collapsed-block': orgChartNodeHash[authenticatedUser._id]?.extra.reportChain.includes(currentHoverUid) || authenticatedUser._id === currentHoverUid}">
                                <div nz-tooltip nzTooltipTitle="Total Users" nzTooltipPlacement="right"
                                    style="display:flex;justify-content:space-between;">
                                    <i class="fas fa-users" style="font-size:18px;"></i>
                                    <div style="vertical-align: top;margin-left:20px;">
                                        {{nodeStatHash[authenticatedUser._id]?.userCnt}}
                                    </div>
                                </div>
                                <div *ngIf="(selectionMode === 'Org' || selectionMode === 'Individual')"
                                    style="padding:5px;">
                                    <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                        <div class="selected-node"
                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                        </div>
                                        <div style="display:inline-block;padding-top:6px;">
                                            {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                        </div>
                                    </div>
                                    <!--
                                    <div
                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                        User Training Status</div>
                                        -->
                                    <div nz-tooltip nzTooltipTitle="Users With No Trainings" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-user" style="color:black;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.noneCnt}}
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Up To Date Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-user"
                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.upToDateCnt}}
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Users With At Least One Training Past Due"
                                        nzTooltipPlacement="right" style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-user" style="color:red;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.pastDueCnt}}
                                    </div>
                                </div>
                                <div *ngIf="selectionMode === 'Training'" style="padding:5px;">
                                    <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                        <div class="selected-node"
                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                        </div>
                                        <div style="display:inline-block;padding-top:6px;">
                                            {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                        </div>
                                    </div>
                                    <div
                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                        Training Status</div>
                                    <div nz-tooltip nzTooltipTitle="In Progress" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-graduation-cap"
                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.trainingHash.upToDate}}
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Past Due" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-graduation-cap"
                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.trainingHash.pastDue}}
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Completed" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-graduation-cap"
                                            style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.trainingHash.completed}}
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Pending Certification Approval"
                                        nzTooltipPlacement="right" style="display:flex;justify-content:space-between;">
                                        <i class="fas fa-graduation-cap"
                                            style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                        {{nodeStatHash[authenticatedUser._id]?.trainingHash.pendingCertUpload}}
                                    </div>
                                </div>
                                <div *ngIf="selectionMode === 'JobTitle'" style="padding:3px;">
                                    <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                        <div class="selected-node"
                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                        </div>
                                        <div style="display:inline-block;padding-top:6px;">
                                            {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                        </div>
                                    </div>
                                    <div
                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                        Job Titles</div>
                                    <div *ngFor="let jobTitle of jobTitles"
                                        [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                        style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                        {{jobTitle}}
                                        <div style="margin-left:20px;">
                                            {{ nodeStatHash[authenticatedUser._id]?.jobTitleHash[jobTitle] }}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="selectionMode === 'UserType'" style="padding:5px;">
                                    <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                        <div class="selected-node"
                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                        </div>
                                        <div style="display:inline-block;padding-top:6px;">
                                            {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                        </div>
                                    </div>
                                    <div
                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                        User Type</div>
                                    <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                        nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user"
                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                            style="color:black;font-size:16px;padding-top:2px;"></i>

                                        <div style="justify-content: right;">
                                            {{nodeStatHash[authenticatedUser._id]?.userTypeHash.individualContributor}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Supervisors" nzTooltipPlacement="right"
                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user-tie"
                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;">
                                            {{nodeStatHash[authenticatedUser._id]?.userTypeHash.supervisor}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Volunteers" nzTooltipPlacement="right"
                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user-cowboy"
                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;">
                                            {{nodeStatHash[authenticatedUser._id]?.userTypeHash.volunteer}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Contractors" nzTooltipPlacement="right"
                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user-hard-hat"
                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;">
                                            {{nodeStatHash[authenticatedUser._id]?.userTypeHash.contractor}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Customers" nzTooltipPlacement="right"
                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user-alien"
                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;">
                                            {{nodeStatHash[authenticatedUser._id]?.userTypeHash.customer}}
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="selectionMode === 'UserStatus'" style="padding:5px;">
                                    <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                        <div class="selected-node"
                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                        </div>
                                        <div style="display:inline-block;padding-top:6px;">
                                            {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                        </div>
                                    </div>
                                    <div
                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                        User Status</div>
                                    <div nz-tooltip nzTooltipTitle="Active"
                                        [ngClass]="{'selected-item': currentUserStatus === 'active'}"
                                        nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user" style="color:blue;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;color:black;">
                                            {{nodeStatHash[authenticatedUser._id]?.userStatusHash.active}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Inactive" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user"
                                            style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;color:black;">
                                            {{nodeStatHash[authenticatedUser._id]?.userStatusHash.inactive}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Pending" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user"
                                            style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;color:black;">
                                            {{nodeStatHash[authenticatedUser._id]?.userStatusHash.pending}}
                                        </div>
                                    </div>
                                    <div nz-tooltip nzTooltipTitle="Error" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                        <i class="fas fa-user" style="color:red;font-size:16px;padding-top:2px;"></i>
                                        <div style="justify-content: right;color:black;">
                                            {{nodeStatHash[authenticatedUser._id]?.userStatusHash.error}}
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    <div *ngIf="!collapsedNodes.includes(authenticatedUser._id)"
                        style="background-color:white;display:block;">
                        <div *ngFor="let dr of authenticatedUser.directReports; let drIndex = index"
                            style="vertical-align: top;position:relative;display:inline-block;">
                            <div style="position:relative;">
                                <div class="org-chart-vert-connector">
                                </div>
                                <div *ngIf="!isLast(authenticatedUser.directReports, drIndex)"
                                    class="org-chart-horizontal-connector-right">
                                </div>
                                <div *ngIf="drIndex !== 0" class="org-chart-horizontal-connector-left">
                                </div>
                            </div>
                            <div style="text-align: center;" id="{{dr}}-container">
                                <div class="org-chart-node" [ngStyle]="{'padding.px': orgChartPadding}" id="{{dr}}"
                                    [ngClass]="{'supervisor-node': myOrgUserHash[dr]?.userType === 'supervisor'}">
                                    <div (mouseenter)="setHoverData(dr)" (mouseleave)="setHoverData(null)"
                                        class="user-icon-node" (click)="selectUser(dr)"
                                        [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr) || (selectionMode !== 'Indiviual' &&
                                        userIdsSelected.includes(dr)), 'hover-node': userIdSelected !== dr && allActive || dr === currentHoverUid ||
                                        orgChartNodeHash[dr]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr)}">

                                        <i [ngClass]="userTypeIconHash[myOrgUserHash[dr]?.userType]"
                                            style="font-size:16px;" [ngStyle]="{'color': getStatusColor(dr)}"></i>
                                        <span [ngStyle]="{'font-size.px': textFontSize}"
                                            style="z-index:1000000;display: block;color:#666666;">
                                            {{orgChartNodeHash[dr]?.fName}}<br>{{orgChartNodeHash[dr]?.lName}}
                                        </span>
                                    </div>
                                    <div *ngIf="myOrgUserHash[dr]?.userType === 'supervisor' && !collapsedNodes.includes(dr)"
                                        class="org-chart-vert-connector-bottom">
                                    </div>
                                    <div *ngIf="!collapsedNodes.includes(dr) && myOrgUserHash[dr]?.userType === 'supervisor'"
                                        (click)="collapseNode(dr, true)" nz-tooltip
                                        nzTooltipTitle="Collapse Suborganization" nzTooltipPlacement="right">
                                        <i class="fal fa-minus-circle" style="font-size:14px;cursor:pointer;"></i>
                                    </div>
                                    <div *ngIf="collapsedNodes.includes(dr) && myOrgUserHash[dr]?.userType === 'supervisor'"
                                        (click)="collapseNode(dr, false)" style="margin:0 8px;">
                                        <i class="far fa-plus-circle" nz-tooltip nzTooltipTitle="Expand Suborganization"
                                            nzTooltipPlacement="right"
                                            style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                        <div (mouseenter)="setHoverData(dr)" (mouseleave)="setHoverData(null)"
                                            class="collapsed-block"
                                            [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr]?.extra.reportChain.includes(currentHoverUid) || dr === currentHoverUid}">
                                            <div nz-tooltip nzTooltipTitle="Total Users" nzTooltipPlacement="right"
                                                style="display:flex;justify-content:space-between;">
                                                <i class="fas fa-users" style="font-size:18px;"></i>
                                                <div style="vertical-align: top;margin-left:20px;">
                                                    {{nodeStatHash[dr]?.userCnt}}
                                                </div>
                                            </div>
                                            <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                style="padding:5px;">
                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                    <div class="selected-node"
                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                    </div>
                                                    <div style="display:inline-block;padding-top:6px;">
                                                        {{nodeStatHash[dr]?.selectedCnt}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Users With No Trainings"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-user"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.noneCnt}}
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Up To Date Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-user"
                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.upToDateCnt}}
                                                </div>
                                                <div nz-tooltip
                                                    nzTooltipTitle="Users With At Least One Training Past Due"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-user"
                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.pastDueCnt}}
                                                </div>
                                            </div>
                                            <div *ngIf="selectionMode === 'Training'" style="padding:5px;">
                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                    <div class="selected-node"
                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                    </div>
                                                    <div style="display:inline-block;padding-top:6px;">
                                                        {{nodeStatHash[dr]?.selectedCnt}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="In Progress" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-graduation-cap"
                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.trainingHash.upToDate}}
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Past Due" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-graduation-cap"
                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.trainingHash.pastDue}}
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Completed" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-graduation-cap"
                                                        style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.trainingHash.completed}}
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Pending Certification Approval"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fas fa-graduation-cap"
                                                        style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                    {{nodeStatHash[dr]?.trainingHash.pendingCertUpload}}
                                                </div>
                                            </div>
                                            <div *ngIf="selectionMode === 'JobTitle'" style="padding:3px;">
                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                    <div class="selected-node"
                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                    </div>
                                                    <div style="display:inline-block;padding-top:6px;">
                                                        {{nodeStatHash[dr]?.selectedCnt}}
                                                    </div>
                                                </div>
                                                <div *ngFor="let jobTitle of jobTitles"
                                                    [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                    style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                    {{jobTitle}}
                                                    <div style="margin-left:20px;">
                                                        {{ nodeStatHash[dr]?.jobTitleHash[jobTitle] }}
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="selectionMode === 'UserType'" style="padding:5px;">
                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                    <div class="selected-node"
                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                    </div>
                                                    <div style="display:inline-block;padding-top:6px;">
                                                        {{nodeStatHash[dr]?.selectedCnt}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user"
                                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>

                                                    <div style="justify-content: right;">
                                                        {{nodeStatHash[dr]?.userTypeHash.individualContributor}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Supervisors" nzTooltipPlacement="right"
                                                    [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user-tie"
                                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;">
                                                        {{nodeStatHash[dr]?.userTypeHash.supervisor}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Volunteers" nzTooltipPlacement="right"
                                                    [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user-cowboy"
                                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;">
                                                        {{nodeStatHash[dr]?.userTypeHash.volunteer}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Contractors" nzTooltipPlacement="right"
                                                    [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user-hard-hat"
                                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;">
                                                        {{nodeStatHash[dr]?.userTypeHash.contractor}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Customers" nzTooltipPlacement="right"
                                                    [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user-alien"
                                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;">
                                                        {{nodeStatHash[dr]?.userTypeHash.customer}}
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="selectionMode === 'UserStatus'" style="padding:5px;">
                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                    nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                    <div class="selected-node"
                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                    </div>
                                                    <div style="display:inline-block;padding-top:6px;">
                                                        {{nodeStatHash[dr]?.selectedCnt}}
                                                    </div>
                                                </div>
                                                <div
                                                    style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                    User Status</div>
                                                <div nz-tooltip nzTooltipTitle="Active" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user"
                                                        style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;color:black;">
                                                        {{nodeStatHash[dr]?.userStatusHash.active}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Inactive" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user"
                                                        style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;color:black;">
                                                        {{nodeStatHash[dr]?.userStatusHash.inactive}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Pending" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user"
                                                        style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;color:black;">
                                                        {{nodeStatHash[dr]?.userStatusHash.pending}}
                                                    </div>
                                                </div>
                                                <div nz-tooltip nzTooltipTitle="Error" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                    <i class="fas fa-user"
                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                    <div style="justify-content: right;color:black;">
                                                        {{nodeStatHash[dr]?.userStatusHash.error}}
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="!collapsedNodes.includes(dr)" style="display:block;">
                                    <div *ngFor="let dr2 of myOrgUserHash[dr]?.directReports; let dr2Index = index"
                                        style="vertical-align: top;position:relative;"
                                        [ngClass]="{'inline-block': maxLevel > 2, 'block': maxLevel === 2}">
                                        <div *ngIf="maxLevel > 2" style="position:relative;">
                                            <div class="org-chart-vert-connector">
                                            </div>
                                            <div *ngIf="!isLast(myOrgUserHash[dr]?.directReports, dr2Index)"
                                                class="org-chart-horizontal-connector-right">
                                            </div>
                                            <div *ngIf="dr2Index > 0" class="org-chart-horizontal-connector-left">
                                            </div>
                                        </div>
                                        <div style="text-align: center;" id="{{dr2}}-container">
                                            <div [ngStyle]="{'padding.px': orgChartPadding}" class="org-chart-node"
                                                id="{{dr2}}"
                                                [ngClass]="{'supervisor-node': myOrgUserHash[dr2]?.userType === 'supervisor'}">
                                                <div (mouseenter)="setHoverData(dr2)" (mouseleave)="setHoverData(null)"
                                                    class="user-icon-node" (click)="selectUser(dr2)"
                                                    [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr2) || (selectionMode !== 'Indiviual' &&
                                                    userIdsSelected.includes(dr2)) , 'hover-node': userIdSelected !== dr2 && allActive || dr2 === currentHoverUid ||
                                                    orgChartNodeHash[dr2]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr2)}">
                                                    <i [ngClass]="userTypeIconHash[myOrgUserHash[dr2]?.userType]"
                                                        style="font-size:16px;"
                                                        [ngStyle]="{'color': getStatusColor(dr2)}"></i>
                                                    <span
                                                        *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor' || includeFullName"
                                                        [ngStyle]="{'font-size.px': textFontSize}"
                                                        style="display: block;color:#666666;">
                                                        {{orgChartNodeHash[dr2]?.fName}}<br>{{orgChartNodeHash[dr2]?.lName}}
                                                    </span>
                                                </div>
                                                <div *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor' && !collapsedNodes.includes(dr2)"
                                                    class="org-chart-vert-connector-bottom">
                                                </div>
                                                <div *ngIf="!collapsedNodes.includes(dr2) && myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                    (click)="collapseNode(dr2, true)" nz-tooltip
                                                    nzTooltipTitle="Collapse Suborganization"
                                                    nzTooltipPlacement="right">
                                                    <i class="fal fa-minus-circle"
                                                        style="font-size:14px;cursor:pointer;"></i>
                                                </div>
                                                <div *ngIf="collapsedNodes.includes(dr2) && myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                    (click)="collapseNode(dr2, false)" style="margin:0 8px;">
                                                    <i class="far fa-plus-circle" nz-tooltip
                                                        nzTooltipTitle="Expand Suborganization"
                                                        nzTooltipPlacement="right"
                                                        style="margin-top:4px;font-size:16px;color:red;cursor:pointer;">
                                                    </i>
                                                    <div (mouseenter)="setHoverData(dr2)"
                                                        (mouseleave)="setHoverData(null)" class="collapsed-block"
                                                        [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr2]?.extra.reportChain.includes(currentHoverUid) || dr2 === currentHoverUid}">
                                                        <div nz-tooltip nzTooltipTitle="Total Users"
                                                            nzTooltipPlacement="right"
                                                            style="display:flex;justify-content:space-between;">
                                                            <i class="fas fa-users" style="font-size:18px;"></i>
                                                            <div style="vertical-align: top;margin-left:20px;">
                                                                {{nodeStatHash[dr2]?.userCnt}}
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                            style="padding:5px;">
                                                            <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                <div class="selected-node"
                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                </div>
                                                                <div style="display:inline-block;padding-top:6px;">
                                                                    {{nodeStatHash[dr2]?.selectedCnt}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Users With No Trainings"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-user"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.noneCnt}}
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Up To Date Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-user"
                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.upToDateCnt}}
                                                            </div>
                                                            <div nz-tooltip
                                                                nzTooltipTitle="Users With At Least One Training Past Due"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-user"
                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.pastDueCnt}}
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectionMode === 'Training'" style="padding:5px;">
                                                            <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                <div class="selected-node"
                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                </div>
                                                                <div style="display:inline-block;padding-top:6px;">
                                                                    {{nodeStatHash[dr2]?.selectedCnt}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="In Progress"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-graduation-cap"
                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.trainingHash.upToDate}}
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Past Due"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-graduation-cap"
                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.trainingHash.pastDue}}
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Completed"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-graduation-cap"
                                                                    style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.trainingHash.completed}}
                                                            </div>
                                                            <div nz-tooltip
                                                                nzTooltipTitle="Pending Certification Approval"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fas fa-graduation-cap"
                                                                    style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                {{nodeStatHash[dr2]?.trainingHash.pendingCertUpload}}
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectionMode === 'JobTitle'" style="padding:3px;">
                                                            <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                <div class="selected-node"
                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                </div>
                                                                <div style="display:inline-block;padding-top:6px;">
                                                                    {{nodeStatHash[dr2]?.selectedCnt}}
                                                                </div>
                                                            </div>
                                                            <div *ngFor="let jobTitle of jobTitles"
                                                                [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                {{jobTitle}}
                                                                <div style="margin-left:20px;">
                                                                    {{ nodeStatHash[dr2]?.jobTitleHash[jobTitle] }}
                                                                </div>
                                                            </div>

                                                        </div>
                                                        <div *ngIf="selectionMode === 'UserType'" style="padding:5px;">
                                                            <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                <div class="selected-node"
                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                </div>
                                                                <div style="display:inline-block;padding-top:6px;">
                                                                    {{nodeStatHash[dr2]?.selectedCnt}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user"
                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                <div style="justify-content: right;">
                                                                    {{nodeStatHash[dr2]?.userTypeHash.individualContributor}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Supervisors"
                                                                [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user-tie"
                                                                    [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;">
                                                                    {{nodeStatHash[dr2]?.userTypeHash.supervisor}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Volunteers"
                                                                [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user-cowboy"
                                                                    [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;">
                                                                    {{nodeStatHash[dr2]?.userTypeHash.volunteer}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Contractors"
                                                                [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user-hard-hat"
                                                                    [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;">
                                                                    {{nodeStatHash[dr2]?.userTypeHash.contractor}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Customers"
                                                                [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user-alien"
                                                                    [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;">
                                                                    {{nodeStatHash[dr2]?.userTypeHash.customer}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="selectionMode === 'UserStatus'"
                                                            style="padding:5px;">
                                                            <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                <div class="selected-node"
                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                </div>
                                                                <div style="display:inline-block;padding-top:6px;">
                                                                    {{nodeStatHash[dr2]?.selectedCnt}}
                                                                </div>
                                                            </div>
                                                            <div
                                                                style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                User Status</div>
                                                            <div nz-tooltip nzTooltipTitle="Active"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user"
                                                                    style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;color:black;">
                                                                    {{nodeStatHash[dr2]?.userStatusHash.active}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Inactive"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user"
                                                                    style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;color:black;">
                                                                    {{nodeStatHash[dr2]?.userStatusHash.inactive}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Pending"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user"
                                                                    style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;color:black;">
                                                                    {{nodeStatHash[dr2]?.userStatusHash.pending}}
                                                                </div>
                                                            </div>
                                                            <div nz-tooltip nzTooltipTitle="Error"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                <i class="fas fa-user"
                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                <div style="justify-content: right;color:black;">
                                                                    {{nodeStatHash[dr2]?.userStatusHash.error}}
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                            <div *ngIf="!collapsedNodes.includes(dr2)" style="display:block;">
                                                <div *ngFor="let dr3 of myOrgUserHash[dr2]?.directReports; let dr3Index = index"
                                                    style="vertical-align: top;position:relative;display:inline-block;"
                                                    [ngClass]="{'inline-block': maxLevel > 3, 'block': maxLevel === 3}">
                                                    <div *ngIf="maxLevel > 3" style="position:relative;">
                                                        <div class="org-chart-vert-connector">
                                                        </div>
                                                        <div *ngIf="!isLast(myOrgUserHash[dr2]?.directReports, dr3Index)"
                                                            class="org-chart-horizontal-connector-right">
                                                        </div>
                                                        <div *ngIf="dr3Index !== 0"
                                                            class="org-chart-horizontal-connector-left">
                                                        </div>
                                                    </div>
                                                    <div style="text-align: center;" id="{{dr3}}-container">
                                                        <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                            class="org-chart-node" id="{{dr3}}"
                                                            [ngClass]="{'supervisor-node': myOrgUserHash[dr3]?.userType === 'supervisor'}">
                                                            <div class="user-icon-node" (mouseenter)="setHoverData(dr3)"
                                                                (mouseleave)="setHoverData(null)"
                                                                (click)="selectUser(dr3)"
                                                                [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr3) || (selectionMode !== 'Indiviual' &&
                                                                userIdsSelected.includes(dr3)), 'hover-node': userIdSelected !== dr3 && allActive || dr3 === currentHoverUid ||
                                                                orgChartNodeHash[dr3]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr3)}">
                                                                <i [ngClass]="userTypeIconHash[myOrgUserHash[dr3]?.userType]"
                                                                    style="font-size:16px;"
                                                                    [ngStyle]="{'color': getStatusColor(dr3)}"></i>
                                                                <span
                                                                    *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor' || includeFullName"
                                                                    style="display: block;color:#666666;"
                                                                    [ngStyle]="{'font-size.px': textFontSize}">
                                                                    {{orgChartNodeHash[dr3]?.fName}}<br>{{orgChartNodeHash[dr3]?.lName}}
                                                                </span>
                                                            </div>
                                                            <div *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor' && !collapsedNodes.includes(dr3)"
                                                                class="org-chart-vert-connector-bottom">
                                                            </div>
                                                            <div *ngIf="!collapsedNodes.includes(dr3) && myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                (click)="collapseNode(dr3, true)" nz-tooltip
                                                                nzTooltipTitle="Collapse Suborganization"
                                                                nzTooltipPlacement="right">
                                                                <i class="fal fa-minus-circle"
                                                                    style="font-size:14px;cursor:pointer;"></i>
                                                            </div>
                                                            <div *ngIf="collapsedNodes.includes(dr3) && myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                (click)="collapseNode(dr3, false)"
                                                                style="margin:0 8px;">
                                                                <i class="far fa-plus-circle" nz-tooltip
                                                                    nzTooltipTitle="Expand Suborganization"
                                                                    nzTooltipPlacement="right"
                                                                    style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                <div class="collapsed-block"
                                                                    (mouseenter)="setHoverData(dr3)"
                                                                    (mouseleave)="setHoverData(null)"
                                                                    [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr3]?.extra.reportChain.includes(currentHoverUid) || dr3 === currentHoverUid}">
                                                                    <div nz-tooltip nzTooltipTitle="Total Users"
                                                                        nzTooltipPlacement="right"
                                                                        style="display:flex;justify-content:space-between;">
                                                                        <i class="fas fa-users"
                                                                            style="font-size:18px;"></i>
                                                                        <div
                                                                            style="vertical-align: top;margin-left:20px;">
                                                                            {{nodeStatHash[dr3]?.userCnt}}
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                                        style="padding:5px;">
                                                                        <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                            <div class="selected-node"
                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                            </div>
                                                                            <div
                                                                                style="display:inline-block;padding-top:6px;">
                                                                                {{nodeStatHash[dr3]?.selectedCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip
                                                                            nzTooltipTitle="Users With No Trainings"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-user"
                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.noneCnt}}
                                                                        </div>
                                                                        <div nz-tooltip
                                                                            nzTooltipTitle="Up To Date Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-user"
                                                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.upToDateCnt}}
                                                                        </div>
                                                                        <div nz-tooltip
                                                                            nzTooltipTitle="Users With At Least One Training Past Due"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-user"
                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.pastDueCnt}}
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="selectionMode === 'Training'"
                                                                        style="padding:5px;">
                                                                        <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                            <div class="selected-node"
                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                            </div>
                                                                            <div
                                                                                style="display:inline-block;padding-top:6px;">
                                                                                {{nodeStatHash[dr3]?.selectedCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="In Progress"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-graduation-cap"
                                                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.trainingHash.upToDate}}
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Past Due"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-graduation-cap"
                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.trainingHash.pastDue}}
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Completed"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-graduation-cap"
                                                                                style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.trainingHash.completed}}
                                                                        </div>
                                                                        <div nz-tooltip
                                                                            nzTooltipTitle="Pending Certification Approval"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fas fa-graduation-cap"
                                                                                style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                            {{nodeStatHash[dr3]?.trainingHash.pendingCertUpload}}
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="selectionMode === 'JobTitle'"
                                                                        style="padding:3px;">
                                                                        <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                            <div class="selected-node"
                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                            </div>
                                                                            <div
                                                                                style="display:inline-block;padding-top:6px;">
                                                                                {{nodeStatHash[dr3]?.selectedCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div *ngFor="let jobTitle of jobTitles"
                                                                            [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                            {{jobTitle}}
                                                                            <div style="margin-left:20px;">
                                                                                {{
                                                                                nodeStatHash[dr3]?.jobTitleHash[jobTitle]
                                                                                }}
                                                                            </div>
                                                                        </div>

                                                                    </div>
                                                                    <div *ngIf="selectionMode === 'UserType'"
                                                                        style="padding:5px;">
                                                                        <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                            <div class="selected-node"
                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                            </div>
                                                                            <div
                                                                                style="display:inline-block;padding-top:6px;">
                                                                                {{nodeStatHash[dr3]?.selectedCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip
                                                                            nzTooltipTitle="Individual Contributors"
                                                                            nzTooltipPlacement="right"
                                                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user"
                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                style="font-size:16px;padding-top:2px;"></i>

                                                                            <div style="justify-content: right;">
                                                                                {{nodeStatHash[dr3]?.userTypeHash.individualContributor}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Supervisors"
                                                                            nzTooltipPlacement="right"
                                                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user-tie"
                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                style="font-size:16px;padding-top:2px;"></i>
                                                                            <div style="justify-content: right;">
                                                                                {{nodeStatHash[dr3]?.userTypeHash.supervisor}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Volunteers"
                                                                            nzTooltipPlacement="right"
                                                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user-cowboy"
                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                style="font-size:16px;padding-top:2px;"></i>
                                                                            <div style="justify-content: right;">
                                                                                {{nodeStatHash[dr3]?.userTypeHash.volunteer}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Contractors"
                                                                            nzTooltipPlacement="right"
                                                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user-hard-hat"
                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                style="font-size:16px;padding-top:2px;"></i>
                                                                            <div style="justify-content: right;">
                                                                                {{nodeStatHash[dr3]?.userTypeHash.contractor}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Customers"
                                                                            nzTooltipPlacement="right"
                                                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user-alien"
                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                style="font-size:16px;padding-top:2px;"></i>
                                                                            <div style="justify-content: right;">
                                                                                {{nodeStatHash[dr3]?.userTypeHash.customer}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="selectionMode === 'UserStatus'"
                                                                        style="padding:5px;">
                                                                        <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                            <div class="selected-node"
                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                            </div>
                                                                            <div
                                                                                style="display:inline-block;padding-top:6px;">
                                                                                {{nodeStatHash[dr3]?.selectedCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div
                                                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                            User Status</div>
                                                                        <div nz-tooltip nzTooltipTitle="Active"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user"
                                                                                style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                            <div
                                                                                style="justify-content: right;color:black;">
                                                                                {{nodeStatHash[dr3]?.userStatusHash.active}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Inactive"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user"
                                                                                style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                            <div
                                                                                style="justify-content: right;color:black;">
                                                                                {{nodeStatHash[dr3]?.userStatusHash.inactive}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Pending"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user"
                                                                                style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                            <div
                                                                                style="justify-content: right;color:black;">
                                                                                {{nodeStatHash[dr3]?.userStatusHash.pending}}
                                                                            </div>
                                                                        </div>
                                                                        <div nz-tooltip nzTooltipTitle="Error"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                            <i class="fas fa-user"
                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                            <div
                                                                                style="justify-content: right;color:black;">
                                                                                {{nodeStatHash[dr3]?.userStatusHash.error}}
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                        <div *ngIf="!collapsedNodes.includes(dr3)"
                                                            style="display:block;">
                                                            <div *ngFor="let dr4 of myOrgUserHash[dr3]?.directReports; let dr4Index = index"
                                                                style="vertical-align: top;position:relative;"
                                                                [ngClass]="{'inline-block': maxLevel > 4, 'block': maxLevel === 4}">
                                                                <div *ngIf="maxLevel > 4" style="position:relative;">
                                                                    <div class="org-chart-vert-connector">
                                                                    </div>
                                                                    <div *ngIf="!isLast(myOrgUserHash[dr3]?.directReports, dr4Index)"
                                                                        class="org-chart-horizontal-connector-right">
                                                                    </div>
                                                                    <div *ngIf="dr4Index !== 0"
                                                                        class="org-chart-horizontal-connector-left">
                                                                    </div>
                                                                </div>
                                                                <div style="text-align: center;" id="{{dr4}}-container">
                                                                    <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                        class="org-chart-node" id="{{dr4}}"
                                                                        [ngClass]="{'supervisor-node': myOrgUserHash[dr4]?.userType === 'supervisor'}">
                                                                        <div (mouseenter)="setHoverData(dr4)"
                                                                            (mouseleave)="setHoverData(null)"
                                                                            (click)="selectUser(dr4)"
                                                                            class="user-icon-node"
                                                                            [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr4) || (selectionMode !== 'Indiviual' &&
                                                                            userIdsSelected.includes(dr4)), 'hover-node': userIdSelected !== dr4 && allActive || dr4 === currentHoverUid ||
                                                                            orgChartNodeHash[dr4]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr4)}">
                                                                            <i [ngClass]="userTypeIconHash[myOrgUserHash[dr4]?.userType]"
                                                                                style="font-size:16px;"
                                                                                [ngStyle]="{'color': getStatusColor(dr4)}"></i>
                                                                            <span
                                                                                *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor' || includeFullName"
                                                                                style="display: block;color:#666666;"
                                                                                [ngStyle]="{'font-size.px': textFontSize}">
                                                                                {{orgChartNodeHash[dr4]?.fName}}<br>{{orgChartNodeHash[dr4]?.lName}}
                                                                            </span>
                                                                        </div>
                                                                        <div *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor' && !collapsedNodes.includes(dr4)"
                                                                            class="org-chart-vert-connector-bottom">
                                                                        </div>
                                                                        <div *ngIf="!collapsedNodes.includes(dr4) && myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                            (click)="collapseNode(dr4, true)" nz-tooltip
                                                                            nzTooltipTitle="Collapse Suborganization"
                                                                            nzTooltipPlacement="right">
                                                                            <i class="fal fa-minus-circle"
                                                                                style="font-size:14px;cursor:pointer;"></i>
                                                                        </div>
                                                                        <div *ngIf="collapsedNodes.includes(dr4) && myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                            (click)="collapseNode(dr4, false)"
                                                                            style="margin:0 8px;">
                                                                            <i class="far fa-plus-circle" nz-tooltip
                                                                                nzTooltipTitle="Expand Suborganization"
                                                                                nzTooltipPlacement="right"
                                                                                style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                            <div (mouseenter)="setHoverData(dr4)"
                                                                                (mouseleave)="setHoverData(null)"
                                                                                class="collapsed-block"
                                                                                [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr4]?.extra.reportChain.includes(currentHoverUid) || dr4 === currentHoverUid}">
                                                                                <div nz-tooltip
                                                                                    nzTooltipTitle="Total Users"
                                                                                    nzTooltipPlacement="right"
                                                                                    style="display:flex;justify-content:space-between;">
                                                                                    <i class="fas fa-users"
                                                                                        style="font-size:18px;"></i>
                                                                                    <div
                                                                                        style="vertical-align: top;margin-left:20px;">
                                                                                        {{nodeStatHash[dr4]?.userCnt}}
                                                                                    </div>
                                                                                </div>
                                                                                <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                                                    style="padding:5px;">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Selected Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                        <div class="selected-node"
                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                        </div>
                                                                                        <div
                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                            {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Users With No Trainings"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.noneCnt}}
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Up To Date Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.upToDateCnt}}
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.pastDueCnt}}
                                                                                    </div>
                                                                                </div>
                                                                                <div *ngIf="selectionMode === 'Training'"
                                                                                    style="padding:5px;">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Selected Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                        <div class="selected-node"
                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                        </div>
                                                                                        <div
                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                            {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="In Progress"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-graduation-cap"
                                                                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.trainingHash.upToDate}}
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Past Due"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-graduation-cap"
                                                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.trainingHash.pastDue}}
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Completed"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-graduation-cap"
                                                                                            style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.trainingHash.completed}}
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Pending Certification Approval"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fas fa-graduation-cap"
                                                                                            style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                        {{nodeStatHash[dr4]?.trainingHash.pendingCertUpload}}
                                                                                    </div>
                                                                                </div>
                                                                                <div *ngIf="selectionMode === 'JobTitle'"
                                                                                    style="padding:3px;">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Selected Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                        <div class="selected-node"
                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                        </div>
                                                                                        <div
                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                            {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngFor="let jobTitle of jobTitles"
                                                                                        [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                                        {{jobTitle}}
                                                                                        <div style="margin-left:20px;">
                                                                                            {{
                                                                                            nodeStatHash[dr4]?.jobTitleHash[jobTitle]
                                                                                            }}
                                                                                        </div>
                                                                                    </div>

                                                                                </div>
                                                                                <div *ngIf="selectionMode === 'UserType'"
                                                                                    style="padding:5px;">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Selected Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                        <div class="selected-node"
                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                        </div>
                                                                                        <div
                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                            {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Individual Contributors"
                                                                                        nzTooltipPlacement="right"
                                                                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user"
                                                                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                        <div
                                                                                            style="justify-content: right;">
                                                                                            {{nodeStatHash[dr4]?.userTypeHash.individualContributor}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Supervisors"
                                                                                        nzTooltipPlacement="right"
                                                                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user-tie"
                                                                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;">
                                                                                            {{nodeStatHash[dr4]?.userTypeHash.supervisor}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Volunteers"
                                                                                        nzTooltipPlacement="right"
                                                                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user-cowboy"
                                                                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;">
                                                                                            {{nodeStatHash[dr4]?.userTypeHash.volunteer}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Contractors"
                                                                                        nzTooltipPlacement="right"
                                                                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user-hard-hat"
                                                                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;">
                                                                                            {{nodeStatHash[dr4]?.userTypeHash.contractor}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Customers"
                                                                                        nzTooltipPlacement="right"
                                                                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user-alien"
                                                                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;">
                                                                                            {{nodeStatHash[dr4]?.userTypeHash.customer}}
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div *ngIf="selectionMode === 'UserStatus'"
                                                                                    style="padding:5px;">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Selected Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                        <div class="selected-node"
                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                        </div>
                                                                                        <div
                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                            {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div
                                                                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                        User Status</div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Active"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;color:black;">
                                                                                            {{nodeStatHash[dr4]?.userStatusHash.active}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Inactive"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;color:black;">
                                                                                            {{nodeStatHash[dr4]?.userStatusHash.inactive}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Pending"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;color:black;">
                                                                                            {{nodeStatHash[dr4]?.userStatusHash.pending}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Error"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                        <i class="fas fa-user"
                                                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                        <div
                                                                                            style="justify-content: right;color:black;">
                                                                                            {{nodeStatHash[dr4]?.userStatusHash.error}}
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                    <div *ngIf="!collapsedNodes.includes(dr4)"
                                                                        style="display:block;">
                                                                        <div *ngFor="let dr5 of myOrgUserHash[dr4]?.directReports; let dr5Index = index"
                                                                            style="vertical-align: top;position:relative;"
                                                                            [ngClass]="{'inline-block': maxLevel > 5, 'block': maxLevel === 5}">
                                                                            <div *ngIf="maxLevel > 5"
                                                                                style="position:relative;">
                                                                                <div class="org-chart-vert-connector">
                                                                                </div>
                                                                                <div *ngIf="!isLast(myOrgUserHash[dr4]?.directReports, dr5Index)"
                                                                                    class="org-chart-horizontal-connector-right">
                                                                                </div>
                                                                                <div *ngIf="dr5Index !== 0"
                                                                                    class="org-chart-horizontal-connector-left">
                                                                                </div>
                                                                            </div>

                                                                            <div style="text-align: center;"
                                                                                id="{{dr5}}-container">
                                                                                <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                    class="org-chart-node">
                                                                                    <div (click)="selectUser(dr5)"
                                                                                        class="user-icon-node"
                                                                                        (mouseenter)="setHoverData(dr5)"
                                                                                        id="{{dr5}}"
                                                                                        (mouseleave)="setHoverData(null)"
                                                                                        [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr5) || (selectionMode !== 'Indiviual' &&
                                                                                        userIdsSelected.includes(dr5)), 'hover-node': userIdSelected !== dr5 && allActive || dr5 === currentHoverUid ||
                                                                                        orgChartNodeHash[dr5]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr5)}">
                                                                                        <i [ngClass]="userTypeIconHash[myOrgUserHash[dr5].userType]"
                                                                                            style="font-size:16px;"
                                                                                            [ngStyle]="{'color': getStatusColor(dr5)}"></i>
                                                                                        <span
                                                                                            *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor' || includeFullName"
                                                                                            style="display: block;color:#666666;"
                                                                                            [ngStyle]="{'font-size.px': textFontSize}">
                                                                                            {{orgChartNodeHash[dr5]?.fName}}<br>{{orgChartNodeHash[dr5]?.lName}}
                                                                                        </span>
                                                                                    </div>
                                                                                    <div *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor' && !collapsedNodes.includes(dr5)"
                                                                                        class="org-chart-vert-connector-bottom">
                                                                                    </div>
                                                                                    <div *ngIf="!collapsedNodes.includes(dr5) && myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                        (click)="collapseNode(dr5, true)">
                                                                                        <i class="fal fa-minus-circle"
                                                                                            style="font-size:14px;cursor:pointer;"></i>
                                                                                    </div>
                                                                                    <div *ngIf="collapsedNodes.includes(dr5) && myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                        (click)="collapseNode(dr5, false)"
                                                                                        style="margin:0 8px;">
                                                                                        <i class="far fa-plus-circle"
                                                                                            nz-tooltip
                                                                                            nzTooltipTitle="Expand Suborganization"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                        <div class="collapsed-block"
                                                                                            (mouseenter)="setHoverData(dr5)"
                                                                                            (mouseleave)="setHoverData(null)"
                                                                                            [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr5]?.extra.reportChain.includes(currentHoverUid) || dr5 === currentHoverUid}">
                                                                                            <div nz-tooltip
                                                                                                nzTooltipTitle="Total Users"
                                                                                                nzTooltipPlacement="right"
                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                <i class="fas fa-users"
                                                                                                    style="font-size:18px;"></i>
                                                                                                <div
                                                                                                    style="vertical-align: top;margin-left:20px;">
                                                                                                    {{nodeStatHash[dr5]?.userCnt}}
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                                                                style="padding:5px;">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                    <div class="selected-node"
                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                    </div>
                                                                                                    <div
                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                        {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Users With No Trainings"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.noneCnt}}
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Up To Date Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.upToDateCnt}}
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.pastDueCnt}}
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="selectionMode === 'Training'"
                                                                                                style="padding:5px;">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                    <div class="selected-node"
                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                    </div>
                                                                                                    <div
                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                        {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="In Progress"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-graduation-cap"
                                                                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.trainingHash.upToDate}}
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Past Due"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-graduation-cap"
                                                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.trainingHash.pastDue}}
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Completed"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-graduation-cap"
                                                                                                        style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.trainingHash.completed}}
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Pending Certification Approval"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fas fa-graduation-cap"
                                                                                                        style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                    {{nodeStatHash[dr5]?.trainingHash.pendingCertUpload}}
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="selectionMode === 'JobTitle'"
                                                                                                style="padding:3px;">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                    <div class="selected-node"
                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                    </div>
                                                                                                    <div
                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                        {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngFor="let jobTitle of jobTitles"
                                                                                                    [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                                                    {{jobTitle}}
                                                                                                    <div
                                                                                                        style="margin-left:20px;">
                                                                                                        {{
                                                                                                        nodeStatHash[dr5]?.jobTitleHash[jobTitle]
                                                                                                        }}
                                                                                                    </div>
                                                                                                </div>

                                                                                            </div>
                                                                                            <div *ngIf="selectionMode === 'UserType'"
                                                                                                style="padding:5px;">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                    <div class="selected-node"
                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                    </div>
                                                                                                    <div
                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                        {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Individual Contributors"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user"
                                                                                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                    <div
                                                                                                        style="justify-content: right;">
                                                                                                        {{nodeStatHash[dr5]?.userTypeHash.individualContributor}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Supervisors"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user-tie"
                                                                                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;">
                                                                                                        {{nodeStatHash[dr5]?.userTypeHash.supervisor}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Volunteers"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user-cowboy"
                                                                                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;">
                                                                                                        {{nodeStatHash[dr5]?.userTypeHash.volunteer}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Contractors"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user-hard-hat"
                                                                                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;">
                                                                                                        {{nodeStatHash[dr5]?.userTypeHash.contractor}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Customers"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user-alien"
                                                                                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;">
                                                                                                        {{nodeStatHash[dr5]?.userTypeHash.customer}}
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="selectionMode === 'UserStatus'"
                                                                                                style="padding:5px;">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                    <div class="selected-node"
                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                    </div>
                                                                                                    <div
                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                        {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div
                                                                                                    style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                                    User Status</div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Active"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;color:black;">
                                                                                                        {{nodeStatHash[dr5]?.userStatusHash.active}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Inactive"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;color:black;">
                                                                                                        {{nodeStatHash[dr5]?.userStatusHash.inactive}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Pending"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;color:black;">
                                                                                                        {{nodeStatHash[dr5]?.userStatusHash.pending}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Error"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                    <i class="fas fa-user"
                                                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                    <div
                                                                                                        style="justify-content: right;color:black;">
                                                                                                        {{nodeStatHash[dr5]?.userStatusHash.error}}
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                                <div *ngIf="!collapsedNodes.includes(dr5)"
                                                                                    style="display: block;text-align: center;">
                                                                                    <div *ngFor="let dr6 of myOrgUserHash[dr5]?.directReports; let dr6Index = index"
                                                                                        style="vertical-align: top;display: inline-block;"
                                                                                        [ngClass]="{'inline-block': maxLevel > 6, 'block': maxLevel === 6}">
                                                                                        <div *ngIf="maxLevel > 6"
                                                                                            style="position:relative;">
                                                                                            <div
                                                                                                class="org-chart-vert-connector">
                                                                                            </div>
                                                                                            <div *ngIf="!isLast(myOrgUserHash[dr5]?.directReports, dr6Index)"
                                                                                                class="org-chart-horizontal-connector-right">
                                                                                            </div>
                                                                                            <div *ngIf="dr6Index !== 0"
                                                                                                class="org-chart-horizontal-connector-left">
                                                                                            </div>
                                                                                        </div>
                                                                                        <div style="text-align: center;"
                                                                                            id="{{dr6}}-container">
                                                                                            <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                class="org-chart-node">
                                                                                                <div (click)="selectUser(dr6)"
                                                                                                    class="user-icon-node"
                                                                                                    id="{{dr6}}"
                                                                                                    (mouseenter)="setHoverData(dr6)"
                                                                                                    (mouseleave)="setHoverData(null)"
                                                                                                    [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr6) || (selectionMode !== 'Indiviual' &&
                                                                                                    userIdsSelected.includes(dr6)), 'hover-node': userIdSelected !== dr6 && allActive || dr6 === currentHoverUid ||
                                                                                                    orgChartNodeHash[dr6]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr6)}">
                                                                                                    <i [ngClass]="userTypeIconHash[myOrgUserHash[dr6]?.userType]"
                                                                                                        style="font-size:16px;"
                                                                                                        [ngStyle]="{'color': getStatusColor(dr6)}"></i>

                                                                                                    <span
                                                                                                        *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor' || includeFullName"
                                                                                                        style="display: block;color:#666666;"
                                                                                                        [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                        {{orgChartNodeHash[dr6]?.fName}}<br>{{orgChartNodeHash[dr6]?.lName}}
                                                                                                    </span>
                                                                                                </div>
                                                                                                <div *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor' && !collapsedNodes.includes(dr6)"
                                                                                                    class="org-chart-vert-connector-bottom">
                                                                                                </div>
                                                                                                <div *ngIf="!collapsedNodes.includes(dr6) && myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                    (click)="collapseNode(dr6, true)"
                                                                                                    nz-tooltip
                                                                                                    nzTooltipTitle="Collapse Suborganization"
                                                                                                    nzTooltipPlacement="right">
                                                                                                    <i class="fal fa-minus-circle"
                                                                                                        style="font-size:14px;cursor:pointer;"></i>
                                                                                                </div>
                                                                                                <div *ngIf="collapsedNodes.includes(dr6) && myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                    (click)="collapseNode(dr6, false)"
                                                                                                    style="margin:0 8px;"
                                                                                                    [id]="dr6">
                                                                                                    <i class="far fa-plus-circle"
                                                                                                        nz-tooltip
                                                                                                        nzTooltipTitle="Expand Suborganization"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                                    <div class="collapsed-block"
                                                                                                        (mouseenter)="setHoverData(dr6)"
                                                                                                        (mouseleave)="setHoverData(null)"
                                                                                                        [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr6]?.extra.reportChain.includes(currentHoverUid) || dr6 === currentHoverUid}">
                                                                                                        <div nz-tooltip
                                                                                                            nzTooltipTitle="Total Users"
                                                                                                            nzTooltipPlacement="right"
                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                            <i class="fas fa-users"
                                                                                                                style="font-size:18px;"></i>
                                                                                                            <div
                                                                                                                style="vertical-align: top;margin-left:20px;">
                                                                                                                {{nodeStatHash[dr6]?.userCnt}}
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                                                                            style="padding:5px;">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                <div class="selected-node"
                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                    {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Users With No Trainings"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.noneCnt}}
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Up To Date Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.upToDateCnt}}
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.pastDueCnt}}
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div *ngIf="selectionMode === 'Training'"
                                                                                                            style="padding:5px;">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                <div class="selected-node"
                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                    {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="In Progress"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-graduation-cap"
                                                                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.trainingHash.upToDate}}
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Past Due"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-graduation-cap"
                                                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.trainingHash.pastDue}}
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Completed"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-graduation-cap"
                                                                                                                    style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.trainingHash.completed}}
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Pending Certification Approval"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fas fa-graduation-cap"
                                                                                                                    style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                                {{nodeStatHash[dr6]?.trainingHash.pendingCertUpload}}
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div *ngIf="selectionMode === 'JobTitle'"
                                                                                                            style="padding:3px;">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                <div class="selected-node"
                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                    {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngFor="let jobTitle of jobTitles"
                                                                                                                [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                                                                {{jobTitle}}
                                                                                                                <div
                                                                                                                    style="margin-left:20px;">
                                                                                                                    {{
                                                                                                                    nodeStatHash[dr6]?.jobTitleHash[jobTitle]
                                                                                                                    }}
                                                                                                                </div>
                                                                                                            </div>

                                                                                                        </div>
                                                                                                        <div *ngIf="selectionMode === 'UserType'"
                                                                                                            style="padding:5px;">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                <div class="selected-node"
                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                    {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Individual Contributors"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                                <div
                                                                                                                    style="justify-content: right;">
                                                                                                                    {{nodeStatHash[dr6]?.userTypeHash.individualContributor}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Supervisors"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user-tie"
                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;">
                                                                                                                    {{nodeStatHash[dr6]?.userTypeHash.supervisor}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Volunteers"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user-cowboy"
                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;">
                                                                                                                    {{nodeStatHash[dr6]?.userTypeHash.volunteer}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Contractors"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user-hard-hat"
                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;">
                                                                                                                    {{nodeStatHash[dr6]?.userTypeHash.contractor}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Customers"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user-alien"
                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;">
                                                                                                                    {{nodeStatHash[dr6]?.userTypeHash.customer}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div *ngIf="selectionMode === 'UserStatus'"
                                                                                                            style="padding:5px;">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                <div class="selected-node"
                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                    {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                                                User
                                                                                                                Status
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Active"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                    {{nodeStatHash[dr6]?.userStatusHash.active}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Inactive"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                    {{nodeStatHash[dr6]?.userStatusHash.inactive}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Pending"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                    {{nodeStatHash[dr6]?.userStatusHash.pending}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Error"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                <i class="fas fa-user"
                                                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                <div
                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                    {{nodeStatHash[dr6]?.userStatusHash.error}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                            <div *ngIf="!collapsedNodes.includes(dr6)"
                                                                                                style="display: block;">
                                                                                                <div *ngFor="let dr7 of myOrgUserHash[dr6]?.directReports"
                                                                                                    style="vertical-align: top;"
                                                                                                    [ngClass]="{'inline-block': maxLevel > 7, 'block': maxLevel === 7}">
                                                                                                    <div
                                                                                                        class="org-chart-vert-connector">
                                                                                                    </div>
                                                                                                    <div *ngIf="!isLast(myOrgUserHash[dr6]?.directReports, dr7Index)"
                                                                                                        class="org-chart-horizontal-connector-right">
                                                                                                    </div>
                                                                                                    <div *ngIf="dr7Index !== 0"
                                                                                                        class="org-chart-horizontal-connector-left">
                                                                                                    </div>
                                                                                                    <div style="text-align: center;"
                                                                                                        id="{{dr7}}-container">
                                                                                                        <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                            class="org-chart-node">
                                                                                                            <div (click)="selectUser(dr7)"
                                                                                                                id="{{dr7}}"
                                                                                                                class="user-icon-node"
                                                                                                                (mouseenter)="setHoverData(dr7)"
                                                                                                                (mouseleave)="setHoverData(null)"
                                                                                                                [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr7) || (selectionMode !== 'Indiviual' &&
                                                                                                                userIdsSelected.includes(dr7)), 'hover-node': userIdSelected !== dr7 && allActive || dr7 === currentHoverUid ||
                                                                                                                orgChartNodeHash[dr7]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr7)}">
                                                                                                                <i [ngClass]="userTypeIconHash[myOrgUserHash[dr7]?.userType]"
                                                                                                                    style="font-size:14px;"
                                                                                                                    [ngStyle]="{'color': getStatusColor(dr7)}"></i>
                                                                                                                <span
                                                                                                                    *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor' || includeFullName"
                                                                                                                    style="display: block;color:#666666;"
                                                                                                                    [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                                    {{orgChartNodeHash[dr7]?.fName}}<br>{{orgChartNodeHash[dr7]?.lName}}
                                                                                                                </span>
                                                                                                            </div>
                                                                                                            <div *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor' && !collapsedNodes.includes(dr7)"
                                                                                                                class="org-chart-vert-connector-bottom">
                                                                                                            </div>
                                                                                                            <div *ngIf="!collapsedNodes.includes(dr7)"
                                                                                                                (click)="collapseNode(dr7, true)"
                                                                                                                nz-tooltip
                                                                                                                nzTooltipTitle="Collapse Suborganization"
                                                                                                                nzTooltipPlacement="right">
                                                                                                                <i class="fal fa-minus-circle"
                                                                                                                    style="font-size:14px;cursor:pointer;"></i>
                                                                                                            </div>
                                                                                                            <div *ngIf="collapsedNodes.includes(dr7)"
                                                                                                                (click)="collapseNode(dr7, false)"
                                                                                                                style="margin:0 8px;">
                                                                                                                <i class="far fa-plus-circle"
                                                                                                                    nz-tooltip
                                                                                                                    nzTooltipTitle="Expand Suborganization"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                                                <div class="collapsed-block"
                                                                                                                    (mouseenter)="setHoverData(dr7)"
                                                                                                                    (mouseleave)="setHoverData(null)"
                                                                                                                    [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr7]?.extra.reportChain.includes(currentHoverUid) || dr7 === currentHoverUid}">
                                                                                                                    <div nz-tooltip
                                                                                                                        nzTooltipTitle="Total Users"
                                                                                                                        nzTooltipPlacement="right"
                                                                                                                        style="display:flex;justify-content:space-between;">
                                                                                                                        <i class="fas fa-users"
                                                                                                                            style="font-size:18px;"></i>
                                                                                                                        <div
                                                                                                                            style="vertical-align: top;margin-left:20px;">
                                                                                                                            {{nodeStatHash[dr7]?.userCnt}}
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div *ngIf="selectionMode === 'Org' || selectionMode === 'Individual'"
                                                                                                                        style="padding:5px;">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Selected Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                            <div class="selected-node"
                                                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                                                {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Users With No Trainings"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.noneCnt}}
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Up To Date Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.upToDateCnt}}
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.pastDueCnt}}
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div *ngIf="selectionMode === 'Training'"
                                                                                                                        style="padding:5px;">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Selected Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                            <div class="selected-node"
                                                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                                                {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="In Progress"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-graduation-cap"
                                                                                                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.trainingHash.upToDate}}
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Past Due"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-graduation-cap"
                                                                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.trainingHash.pastDue}}
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Completed"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-graduation-cap"
                                                                                                                                style="color:#4891f7;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.trainingHash.completed}}
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Pending Certification Approval"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fas fa-graduation-cap"
                                                                                                                                style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                                            {{nodeStatHash[dr7]?.trainingHash.pendingCertUpload}}
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div *ngIf="selectionMode === 'JobTitle'"
                                                                                                                        style="padding:3px;">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Selected Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                            <div class="selected-node"
                                                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                                                {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div *ngFor="let jobTitle of jobTitles"
                                                                                                                            [ngClass]="{'selected-item': currentJobTitlesSelected.includes(jobTitle)}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom: 3px;">
                                                                                                                            {{jobTitle}}
                                                                                                                            <div
                                                                                                                                style="margin-left:20px;">
                                                                                                                                {{
                                                                                                                                nodeStatHash[dr7]?.jobTitleHash[jobTitle]
                                                                                                                                }}
                                                                                                                            </div>
                                                                                                                        </div>

                                                                                                                    </div>
                                                                                                                    <div *ngIf="selectionMode === 'UserType'"
                                                                                                                        style="padding:5px;">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Selected Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                            <div class="selected-node"
                                                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                                                {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Individual Contributors"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                                            <div
                                                                                                                                style="justify-content: right;">
                                                                                                                                {{nodeStatHash[dr7]?.userTypeHash.individualContributor}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Supervisors"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user-tie"
                                                                                                                                [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;">
                                                                                                                                {{nodeStatHash[dr7]?.userTypeHash.supervisor}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Volunteers"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user-cowboy"
                                                                                                                                [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;">
                                                                                                                                {{nodeStatHash[dr7]?.userTypeHash.volunteer}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Contractors"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user-hard-hat"
                                                                                                                                [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;">
                                                                                                                                {{nodeStatHash[dr7]?.userTypeHash.contractor}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Customers"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user-alien"
                                                                                                                                [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;">
                                                                                                                                {{nodeStatHash[dr7]?.userTypeHash.customer}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <div *ngIf="selectionMode === 'UserStatus'"
                                                                                                                        style="padding:5px;">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Selected Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                            <div class="selected-node"
                                                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                                                {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                                                            User
                                                                                                                            Status
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Active"
                                                                                                                            [ngClass]="{'selected-item': currentUserStatus === 'active'}"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;color:black;">
                                                                                                                                {{nodeStatHash[dr7]?.userStatusHash.active}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Inactive"
                                                                                                                            [ngClass]="{'selected-item': currentUserStatus === 'inactive'}"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;color:black;">
                                                                                                                                {{nodeStatHash[dr7]?.userStatusHash.inactive}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Pending"
                                                                                                                            [ngClass]="{'selected-item': currentUserStatus === 'pending'}"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;color:black;">
                                                                                                                                {{nodeStatHash[dr7]?.userStatusHash.pending}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Error"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                            <i class="fas fa-user"
                                                                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                            <div
                                                                                                                                style="justify-content: right;color:black;">
                                                                                                                                {{nodeStatHash[dr7]?.userStatusHash.error}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <div *ngIf="!collapsedNodes.includes(dr7)"
                                                                                                            style="display: block;">
                                                                                                            <div *ngFor="let dr8 of myOrgUserHash[dr7]?.directReports"
                                                                                                                style="vertical-align: top;"
                                                                                                                [ngClass]="{'inline-block': maxLevel > 8, 'block': maxLevel === 8}">
                                                                                                                <div
                                                                                                                    class="org-chart-vert-connector">
                                                                                                                </div>
                                                                                                                <div *ngIf="!isLast(myOrgUserHash[dr7]?.directReports, dr8Index)"
                                                                                                                    class="org-chart-horizontal-connector-right">
                                                                                                                </div>
                                                                                                                <div *ngIf="dr8Index !== 0"
                                                                                                                    class="org-chart-horizontal-connector-left">
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="text-align: center;">
                                                                                                                    <div (mouseenter)="setHoverData(dr8)"
                                                                                                                        [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                                        (mouseleave)="setHoverData(null)"
                                                                                                                        class="org-chart-node">
                                                                                                                        <div (click)="selectUser(dr8)"
                                                                                                                            style="border:2px solid white;margin:0 8px;"
                                                                                                                            [ngClass]="{'selected-node': (selectionMode === 'Individual' && userIdSelected === dr8) || (selectionMode !== 'Indiviual' &&
                                                                                                                            userIdsSelected.includes(dr8)), 'hover-node': userIdSelected !== dr8 && allActive || dr8 === currentHoverUid ||
                                                                                                                            orgChartNodeHash[dr8]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr8)}">
                                                                                                                            <i [ngClass]="userTypeIconHash[myOrgUserHash[dr8]?.userType]"
                                                                                                                                [ngStyle]="{'color': getStatusColor(dr8), 'font-size.px': iconFontSize}"></i>
                                                                                                                        </div>
                                                                                                                        <span
                                                                                                                            *ngIf="myOrgUserHash[dr8]?.userType === 'supervisor' || includeFullName"
                                                                                                                            style="display: block;"
                                                                                                                            [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                                            {{orgChartNodeHash[dr8]?.fName}}<br>{{orgChartNodeHash[dr8]?.lName}}
                                                                                                                        </span>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
        <nz-drawer [nzMaskClosable]="true" [nzVisible]="userPanelVisible" nzPlacement="right" nzTitle="User Profile"
            [nzWidth]="1000" (nzOnClose)="closeUserPanel()">
            <div *ngIf="selectedUser" style="display:block;width:100%;">
                <div style="display:block;width:90%;margin-bottom:5px;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Status
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <nz-radio-group [(ngModel)]="selectedUser.userStatus" (ngModelChange)="statusChanged($event)">
                            <label nz-radio-button nzValue="active"
                                [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'error'">
                                Active
                            </label>
                            <label nz-radio-button nzValue="inactive"
                                [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'error'">
                                Inactive
                            </label>
                            <label nz-radio-button nzValue="pending" nz-tooltip
                                nzTooltipTitle="This status indicates the user has not completed the registration process."
                                [nzDisabled]="selectedUser.userStatus === 'error' || selectedUser.userStatus === 'active' || selectedUser.userStatus === 'inactive'">
                                Pending
                            </label>
                            <label nz-radio-button nzValue="error" nz-tooltip
                                nzTooltipTitle="This status indicates the user has either a bad email address or a bad supervisor id."
                                [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'active' || selectedUser.userStatus === 'inactive'">
                                Error
                            </label>
                        </nz-radio-group>
                    </div>
                </div>

                <div style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Errors
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <ul>
                            <li *ngFor="let error of selectedUser.settings.statusList">{{error}}</li>
                        </ul>
                    </div>
                </div>
                <div style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            First Name
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <input nz-input nzSize="small" type="text" placeholder="First Name" ngDefaultControl
                            [(ngModel)]="selectedUser.firstName" style="margin-bottom:2px;">
                    </div>
                </div>
                <div style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Last Name
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <input nz-input nzSize="small" type="text" placeholder="Last Name" ngDefaultControl
                            [(ngModel)]="selectedUser.lastName" style="margin-bottom:2px;">
                    </div>
                </div>
                <div style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Email
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <nz-input-group [nzSuffix]="suffixTemplate">
                            <input nz-input nzSize="small" type="text" placeholder="Email" ngDefaultControl
                                [(ngModel)]="selectedUser.email" (ngModelChange)="checkUniqueEmail($event)"
                                style="margin-bottom:2px;" (keydown.enter)="checkUniqueEmail($event)"
                                (blur)="checkUniqueEmail($event)">
                        </nz-input-group>
                        <ng-template #suffixTemplate>
                            <i *ngIf="!emailUnique" nz-icon nz-tooltip nzTooltipTitle="Extra information"
                                nzType="close-circle" [nzTheme]="'twotone'" nzTwotoneColor="red"></i>
                            <i *ngIf="emailUnique" nz-icon nz-tooltip nzTooltipTitle="Extra information"
                                nzType="check-circle" [nzTheme]="'twotone'" nzTwotoneColor="#46bc16"></i>
                        </ng-template>
                    </div>
                </div>
                <div style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Job Title
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <input style="margin-bottom:2px;" placeholder="Job Title" nz-input
                            [(ngModel)]="selectedUser.jobTitle" ngDefaultControl nzSize="small"
                            (ngModelChange)="onJobTitleChange($event)" [nzAutocomplete]="auto"
                            (keydown.enter)="setJobTitle($event)" (blur)="setJobTitle($event)" />
                        <nz-autocomplete [nzDataSource]="matchingJobTitles" #auto></nz-autocomplete>
                    </div>
                </div>
                <div *ngIf="selectedUser?._id !== authenticatedUser._id" style="display:block;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                        <label style="font-size:14px;color:#000000;">
                            Supervisor
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <input style="margin-bottom:2px;" nz-input placeholder="Supervisor Name"
                            [(ngModel)]="supervisorName" nzSize="small" (ngModelChange)="onSupervisorNameChange($event)"
                            [nzAutocomplete]="autoSupervisor" />
                        <nz-autocomplete [nzDataSource]="matchingSupervisors" #autoSupervisor>
                        </nz-autocomplete>
                    </div>
                </div>
                <div style="display:block;margin-top:10px;width:90%;">
                    <div style="float:left;width:25%;text-align: right;">
                        <label>
                            User Type
                        </label>
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <nz-radio-group ngDefaultControl [(ngModel)]="selectedUser.userType"
                            (ngModelChanged)="userChanged('userType')" style="margin-bottom:20px;">
                            <label nz-radio nzValue="individualContributor" (click)="newSupervisorSelected(false)"
                                style="display:block;font-size:20px;">
                                <i class="fad fa-user" style="vertical-align: bottom;"></i>
                                <span style="margin-left:10px;font-size:12px;">Individual
                                    Contributor</span>
                            </label>
                            <label nz-radio nzValue="supervisor" (click)="newSupervisorSelected(true)"
                                style="display:block;font-size:20px;">
                                <i class="fad fa-user-tie" style="vertical-align: bottom;"></i>
                                <span style="margin-left:10px;font-size:12px;">Supervisor</span>
                            </label>
                            <label nz-radio nzValue="volunteer" (click)="newSupervisorSelected(false)"
                                style="display:block;font-size:20px;">
                                <i class="fad fa-user-cowboy" style="vertical-align: bottom;"></i>
                                <span style="margin-left:10px;font-size:12px;">Volunteer</span>
                            </label>
                            <label nz-radio nzValue="contractor" (click)="newSupervisorSelected(false)"
                                style="display:block;font-size:20px;">
                                <i class="fad fa-user-hard-hat" style="vertical-align: bottom;"></i>
                                <span style="margin-left:10px;font-size:12px;">Contractor</span>
                            </label>
                            <label nz-radio nzValue="customer" (click)="newSupervisorSelected(false)"
                                style="display:block;font-size:20px;">
                                <i class="fad fa-user-alien" style="vertical-align: bottom;"></i>
                                <span style="margin-left:10px;  font-size:12px;">Customer</span>
                            </label>
                        </nz-radio-group>
                    </div>
                </div>
                <div style="display:block;margin-top:10px;width:90%;">
                    <div style="display:inline-block;width:25%;text-align: right;">
                    </div>
                    <div style="display:inline-block;width:70%;margin-left:20px;">
                        <label nz-checkbox ngDefaultControl [(ngModel)]="selectedUser.teamAdmin"
                            style="margin-top:5px;font-size:12px;" nz-tooltip
                            nzTooltipTitle="Give this person the ability to create, update, delete trainings.">Training
                            Admin
                            Access</label>
                    </div>
                </div>

                <hr>

                <div style="display:block;margin-top:20px;width:90%;text-align: center;">
                    <div style="display:inline-block;width:60%;">
                        <!--
                        <button nz-button nzSize="small" nzShape="round" (click)="handleCancel()" nzType="default"
                            style="margin: 10px;display:inline-block;">Cancel
                        </button>
                        <button *ngIf="newUser" nz-button nzSize="small" nzShape="round" (click)="handleAddUser(true)"
                            nzType="primary" style="margin: 10px;display:inline-block;" [disabled]="!emailUnique">Add
                            Person
                        </button>
                        -->
                        <button nz-button nzSize="small" nzShape="round" (click)="handleUpdateUser()" nzType="primary"
                            style="margin: 10px;display:inline-block;">Update
                            User
                        </button>
                    </div>
                </div>
            </div>
            <!--
            <app-profile></app-profile>
            -->
        </nz-drawer>
        <nz-modal [nzVisible]="showUserTrainingModal" nzTitle="Assign Training"
            [nzCancelDisabled]="assignableTrainings.length === 0" (nzOnCancel)="handleCancelUserTraining()"
            [nzOkDisabled]="!selectedTrainingId" (nzOnOk)="handleAssignUserTraining()"
            style="width:500px;padding:10px;float:left;">
            <div>
                <div style="background-color:white;display:inline-block;width:100%;">
                    <div *ngIf="teamTrainings.length === 0">
                        You have not created any trainings yet!<br> Head over to the <span style="color:blue;">All
                            Trainings</span> page to create your
                        trainings.
                    </div>
                    <div *ngIf="teamTrainings.length > 0 && assignableTrainings.length === 0">
                        You have already assigned all trainings to this user!
                    </div>
                    <div *ngIf="assignableTrainings.length > 0">
                        Select the training you would like to assign.
                    </div>
                    <div *ngFor="let training of assignableTrainings" class="all-training-list-entry"
                        style="padding:10px 20px;width:100%;"
                        [ngClass]="{'selected-training': selectedTrainingId === training._id, 'disabled': training?.versions.length === 1, 'active-training': training?.versions.length > 1 }"
                        (click)="selectTraining(training._id)">
                        <i [ngClass]="allTrainingIdHash[training._id]?.versions[0].iconClass"
                            style="display:inline-block;font-size:20px;margin-right:10px;vertical-align: middle;"
                            [ngStyle]="{'color': allTrainingIdHash[training._id]?.versions[0].iconColor}">
                        </i>
                        <div style="display:inline-block;font-size:14px;">
                            {{ training.versions[0].title }}
                        </div>
                        <div style="float:right;font-size:14px;margin-left:20px;">
                            version {{ versionFormatter(training.versions[0].version) }}
                        </div>
                    </div>
                </div>
            </div>
        </nz-modal>
        <nz-modal [nzVisible]="manageCurrentTrainingsModal" nzTitle="Manage Training" [nzCancelText]="null"
            (nzOnOk)="handleOkManageCurrentTrainings()" nzWidth="1200" style="padding:10px;float:left;">
            <div>
                <div
                    style="width:100%;overflow:scroll;text-align: left;background-color: white;border: 1px solid #eaab10;">
                    <app-user-trainings mode="admin" logSession="off"></app-user-trainings>
                </div>
            </div>
        </nz-modal>
    </div>
</div>