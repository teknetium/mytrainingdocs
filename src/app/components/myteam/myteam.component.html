<nz-modal [(nzVisible)]="showBulkAddModal" nzTitle="Deploy Wizard" nzWidth="80%" [nzFooter]="null"
    (nzOnCancel)="showBulkAddModal = false" (nzOnOk)="showBulkAddModal = false">
    <ng-template #stepContent let-task="task" let-desc="description" let-title="title" let-content="content">
        <div style="width:500px;height:300px;">
            <div style="text-align:center;font-size:14px;color:blue;font-weight:500;">
                {{task}}&nbsp;&nbsp;-&nbsp;&nbsp;{{desc}}</div>
            <div style="margin-top:20px;height:80%;">
                <div style="font-weight:200;font-size:22px;">{{title}}</div>
                <div
                    style="margin-top:20px;padding:20px;height:60%;border:1px solid #bbbbbb;border-radius:5px;background-color: #f1f1f1;">
                    {{ content }}
                </div>
            </div>
        </div>
    </ng-template>
    <div style="width:100%;background-color: white;">
        <div style="float:left;width:30%;">
            <nz-steps nzDirection="vertical" [nzCurrent]="currentStep">
                <nz-step nzTitle="Overview"></nz-step>
                <nz-step nzTitle="Data Requirements"></nz-step>
                <nz-step nzTitle="Upload User Data"></nz-step>
                <nz-step nzTitle="Create User Accounts"></nz-step>
                <nz-step nzTitle="Invite Users"></nz-step>
            </nz-steps>
        </div>
        <div style="float:right;width:70%;">
            <div *ngIf="currentStep === 0" class="steps-content">
                <div>
                    <h2 style="text-align: center;">Welcome to the Deploy Wizard</h2>
                    <p>
                        This wizard will walk you through onboarding your entire organization.
                    </p>
                    <p>
                        Note: step 5 is optional and can be completed later. If you choose to exit the wizard after
                        completing step 4, the users added
                        will have a user status of <span style="color:fuchsia;">Not Invited</span>.
                    </p>
                    <p> This will be useful if you would prefer to onboard subsets of your organization instead of your
                        entire organization all at once.
                    </p>
                </div>
            </div>
            <div *ngIf="currentStep === 1" class="steps-content">
                <div style="display:inline-block;font-size:16px;font-weight: 200;">
                    <p>
                        You will need the following data for each user:
                    </p>
                    <div style="padding-left:40px;">
                        <ul style="list-style-type:none;">
                            <li>First Name</li>
                            <li>Last Name</li>
                            <li>Email Address</li>
                            <li>Supervisor's Email Address</li>
                            <li>Job Title (optional)</li>
                            <!--
                        <li>User Type (optional - one of 'individualContributor', 'supervisor', 'volunteer', 'contractor', 'customer')</li>
                        -->
                        </ul>

                    </div>
                    <p>
                        You can upload any .csv, .tsv, .xls, .xlsx, .xml file with any set of columns as long as it has
                        1
                        record per row.
                        <br>
                        The wizard will allow you to match your spreadsheet columns to the above data points. You'll be
                        able
                        to clean up or
                        remove any corrupted data before submitting your report.
                    </p>
                    <p>

                    </p>
                </div>
            </div>
            <div *ngIf="currentStep === 2" class="steps-content">
                <div style="display:block;margin-bottom:20px;">
                    <div style="margin-bottom: 20px;">
                        <button nz-button nzShape="round" (click)="launchImporter()" nzType="primary"
                            style="display:inline-block;margin-right: 10px;" [disabled]="newUsers.length > 0">
                            Upload Data
                        </button>
                        <button [disabled]="newUsers.length === 0" nz-button nzShape="round" (click)="newUsers = []"
                            nzType="primary" style="display:inline-block;">
                            reset
                        </button>
                    </div>

                    <div *ngIf="newUsers.length > 0" style="margin: 20px 0;">
                        You have successfully uploaded
                        <span style="color:red;">{{newUsers.length}}</span>
                        users.
                    </div>

                </div>
                <!--
            <div *ngIf="authenticatedUser.appAdmin" style="float:left;">
                <button nz-button nzShape="round" (click)="testBulkAdd()" nzType="primary"
                    style="display:inline-block;margin-right:10px;">
                    Generate New Org
                </button>
                <div style="display:inline-block;">
                    Max Depth
                    <nz-input-number [(ngModel)]="maxLevel" [nzMin]="1" [nzMax]="10" [nzStep]="1">
                    </nz-input-number>
                </div>
                <div style="display:inline-block;">
                    User Min
                    <nz-input-number [(ngModel)]="userMin" [nzMin]="1" [nzMax]="10" [nzStep]="1">
                    </nz-input-number>
                </div>
                <div style="display:inline-block;">
                    User Max
                    <nz-input-number [(ngModel)]="userMax" [nzMin]="1" [nzMax]="20" [nzStep]="1">
                    </nz-input-number>
                </div>
            </div>
            -->
            </div>
            <div *ngIf="currentStep === 3" class="steps-content">
                <div *ngIf="!batchUsersCreated">
                    <p>
                        This step creates user accounts for the uploaded users.
                    </p>
                    <button nz-button nzType="primary" (click)="createNewUsersFromBatch()"
                        [disabled]="batchUsersCreated">
                        <span>Create User Accounts</span>
                    </button>
                </div>
                <div *ngIf="batchUsersCreated">
                    <p>
                        User accounts have been created for the users uploaded.
                    </p>
                </div>

            </div>
            <div *ngIf="currentStep === 4" class="steps-content">
                <div *ngIf="!registrationInvitationsSent">
                    <p>
                        This step sends registration invitations to ALL the user accounts created in the previous step.
                    </p>
                    <button nz-button nzType="primary" (click)="sendRegistrationEmail()">
                        <span>Send invitations</span>
                    </button>
                </div>
                <div *ngIf="registrationInvitationsSent">
                    <p>
                        Registrations invitations sent!
                    </p>
                </div>
            </div>
        </div>
        <div style="clear:both;"></div>
        <div class="steps-action">
            <button nz-button nzType="default" (click)="pre()" [disabled]="currentStep === 0">
                <span>Previous</span>
            </button>
            <button nz-button nzType="default" (click)="next()"
                [disabled]="(currentStep === 2 && newUsers.length === 0) || (currentStep === 3 && !batchUsersCreated) || currentStep === 4">
                <span>Next</span>
            </button>
            <button nz-button nzType="primary" (click)="done()"
                [disabled]="currentStep === 0 || currentStep === 1 || currentStep === 2 || (currentStep === 3 && !batchUsersCreated) || (currentStep === 4 && registrationInvitationsSent)">
                <span>Done</span>
            </button>
        </div>
    </div>
</nz-modal>
<div *ngIf="authenticatedUser && !showBulkAddModal" style="height:100%;">
    <nz-drawer [nzMaskClosable]="true" [nzVisible]="showLegend" nzPlacement="left" nzTitle="Legend" [nzWidth]="400"
        (nzOnClose)="showLegend = false">
        <div>
            <div class="legend-header">
                DISPLAY MODE
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="User Status Mode" nzPopoverContent="Shows User Status"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-check legend-icon"></i>
                <span class="legend-text">User Status</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="User Training Status Mode"
                nzPopoverContent="Displays User Training Status" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-graduate legend-icon"></i>
                <span class="legend-text">User Training Status</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Training Mode"
                nzPopoverContent="Displays Training Status" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-graduation-cap legend-icon"></i>
                <span class="legend-text">Training</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Job Title Mode" nzPopoverContent="Displays Job Title"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-briefcase legend-icon"></i>
                <span class="legend-text">Job Title</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="User Type Mode" nzPopoverContent="Displays User Type"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-cowboy legend-icon"></i>
                <span class="legend-text">User Type</span>
            </div>
            <div class="legend-header">
                USER STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Active User"
                nzPopoverContent="A blue user icon indicates that this user is active" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:blue;"></i>
                <span class="legend-text">Active User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Inactive User"
                nzPopoverContent="A grey user icon indicates that this user has been marked as inactive."
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:#aaaaaa;"></i>
                <span class="legend-text">Inactive User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Not Invited"
                nzPopoverContent="A fucshia user icon indicates that the user has not been invited to complete their registration."
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:fuchsia;"></i>
                <span class="legend-text">Not Invited</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Pending"
                nzPopoverContent="An orange user icon indicates that this user has not completed the registration process."
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:orange;"></i>
                <span class="legend-text">Pending Registration Completion</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Error"
                nzPopoverContent="A red user icon indicates that there is some error associated with this user account."
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:red;"></i>
                <span class="legend-text">Error</span>
            </div>
            <div class="legend-header">
                USER TRAINING STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="No Trainings Assigned"
                nzPopoverContent="Black user icon indicates no trainings have been assigned" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon"></i>
                <span class="legend-text">No Trainings Assigned</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Inprogress"
                nzPopoverContent="Green user icon indicates that this user has no trainings that are past due"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:#46bd15;"></i>
                <span class="legend-text">Trainings In Progress</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Past Due"
                nzPopoverContent="Red user icon indicates that at least one training is past due"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon" style="color:red;"></i>
                <span class="legend-text">&#62;= 1 Training Past Due</span>
            </div>
            <div class="legend-header">
                USER TYPE
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Individual Contributor"
                nzPopoverContent="This user is an individual contributor" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user legend-icon"></i>
                <span class="legend-text">Individual Contributor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Supervisor"
                nzPopoverContent="This user is a supervisor who has individual contributors reporting to them"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-tie legend-icon"></i>
                <span class="legend-text">Supervisor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Volunteer" nzPopoverContent="This user is a volunteer"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-cowboy legend-icon"></i>
                <span class="legend-text">Volunteer</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Contractor"
                nzPopoverContent="This user is employed as a contractor" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-hard-hat legend-icon"></i>
                <span class="legend-text">Contractor</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Customer"
                nzPopoverContent="This user is an external customer" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-user-alien legend-icon"></i>
                <span class="legend-text">Customer</span>
            </div>
            <div class="legend-header">
                TRAINING STATUS
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="In Progress"
                nzPopoverContent="This training is in progress, not completed nor past due" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-graduation-cap legend-icon" style="color:#46bd15;"></i>
                <span class="legend-text">In Progress</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Past Due" nzPopoverContent="This training is past due"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-graduation-cap legend-icon" style="color:red;"></i>
                <span class="legend-text">Past Due</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Completed" nz-popover
                nzPopoverContent="This training has been completed" nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-graduation-cap legend-icon" style="color:#4891f7;"></i>
                <span class="legend-text">Completed</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Pending Cert Approval"
                nzPopoverContent="This training is a recurring training whose certificate is pending approval by the user's supervisor"
                nzPopoverPlacement="right">
                <i class="fa-solid fa-fw fa-graduation-cap legend-icon" style="color:#feb90b;"></i>
                <span class="legend-text">Pending Cert Approval</span>
            </div>
            <div class="legend-header">
                MISC
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Selected User"
                nzPopoverContent="This style container indicates that this user is included in the selection group"
                nzPopoverPlacement="rightBottom">
                <div
                    style="display:inline-block;width:15px;height:15px;font-size:16px;border:2px solid #eaab10;background: rgba(253, 239, 178, 1);vertical-align: middle;">
                </div>
                <span class="legend-text">Selected User</span>
            </div>
            <div class="legend-item" nz-popover nzPopoverTitle="Hover User" [nzPopoverContent]="hoverTemplate"
                nzPopoverPlacement="rightBottom">
                <div
                    style="display:inline-block;width:15px;height:15px;font-size:16px;border:2px solid #afbcf8;background: rgba(0,0,255,.2);vertical-align: middle;">
                </div>
                <span class="legend-text">Hover User</span>
            </div>
            <ng-template #hoverTemplate>
                <div style="width:400px;height:fit-content;">
                    This style container indicates that this user either:
                    <div style="padding-left:30px;">
                        <ul>
                            <li>
                                has mouse focus
                            </li>
                            <li>
                                is in the suborganization of the user with mouse focus
                            </li>
                            <li>
                                is in the reporting chain of the user with mouse focus
                            </li>
                        </ul>
                    </div>
                </div>
            </ng-template>
        </div>
    </nz-drawer>
    <div style="position:relative;width:100%;height:100%;">
        <div
            style="position:relative;margin-left:-20px;margin-top:-20px;margin-right:-20px;background-color: #eeeeee;border:1px solid #dddddd;padding:10px 20px;">
            <div style="text-align:center;">
                <div style="float:left;width:33%;">
                    <div style="vertical-align: middle;">
                        <div style="float:left;margin-top:10px;">
                            <i *ngIf="!showLegend" class="fa-regular fa-indent" style="cursor:pointer;font-size:24px;"
                                (click)="showLegend = true" nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Show Legend"></i>
                        </div>
                        <nz-radio-group [(ngModel)]="showOrgChart" (ngModelChange)="toggleMainView($event)"
                            style="float:left;margin-left:1.5vw;">
                            <label nz-radio-button nzValue="true" nz-tooltip nzTooltipTitle="Org Chart">
                                <i class="fa-solid fa-sitemap" style="font-size:18px;"></i></label>
                            <label nz-radio-button nzValue="false" nz-tooltip nzTooltipTitle="List">
                                <i class="fa-solid fa-list" style="font-size:18px;"></i></label>
                        </nz-radio-group>
                        <div style="margin-left:1.5vw;float:left;margin-top:5px;">
                            <button nz-button nzSize="default" nzShape="circle" nzType="primary"
                                style="display:inline-block;margin-right:5px;" (click)="showBulkAddModal = true"
                                nz-tooltip nzTooltipPlacement="top" nzTooltipTitle="Add Users">
                                <i class="fa-solid fa-user-plus"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="primary"
                                style="display:inline-block;margin-right:5px;" (click)="showDownloadPNGImageModal()"
                                nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Download the Org Chart as a PNG image (with preview)">
                                <i class="fa-solid fa-camera"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="primary"
                                style="display:inline-block;margin-right:5px;" (click)="centerIt(authenticatedUser._id)"
                                nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Center Yourself in the Browser Window">
                                <i class="fa-solid fa-align-center"></i>
                            </button>
                        </div>
                        <div style="clear: both;"></div>
                    </div>
                    <!--
                    <div style="cursor:pointer;position:fixed;top:65px;left:220px;width:20px;height:60px;z-index:1000;"
                        (click)="showCSVBuffer = !showCSVBuffer"></div>
                        -->
                </div>
                <div *ngIf="showOrgChart === 'true'" style="display:inline-block;width:33%;">
                    <!--
                    <div style="display:inline-block;margin-right:20px;">
                        <nz-radio-group [(ngModel)]="orgChartSelectMode"
                            (ngModelChange)="toggleOrgChartSelectMode($event)">
                            <label nz-radio-button nzValue="Individual" nz-tooltip nzTooltipTitle="Select an Individual">
                                <i class="fa-solid fa-user" style="font-size:18px;"></i></label>
                            <label nz-radio-button nzValue="Org" nz-tooltip nzTooltipTitle="Multi-user selection">
                                <i class="fa-solid fa-users" style="font-size:18px;"></i></label>
                        </nz-radio-group>
                    </div>
                    -->
                    <div style="display:inline-block;">
                        <!--
                        <div style="display:block;font-size:14px;margin-right:10px;font-weight:500;">
                            Display Mode
                        </div>
                        -->
                        <nz-radio-group [(ngModel)]="rootDisplayMode" (ngModelChange)="setDisplayMode($event)">
                            <label nz-radio-button nzValue="UserStatus" nz-tooltip nzTooltipTitle="Display User Status"
                                nzTooltipPlacement="top">
                                <i class="fa-solid fa-fw fa-user-check" style="font-size:18px;"></i>
                            </label>
                            <!--
                            <label nz-radio-button nzValue="Individual" nzTooltipPlacement nz-tooltip
                                nzTooltipTitle="Select a Single User" nzTooltipPlacement="bottomLeft"
                                joyrideStep="task1Step1" [stepContent]="stepContent"
                                [stepContentParams]="taskStepContentHash?.task1Step1"
                                (next)="onTaskWizardNext('task1Step1')">
                                <i class="fa-solid fa-fw fa-user" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="Org" nz-tooltip nzTooltipTitle="Select by Suborganization"
                                nzTooltipPlacement="bottomLeft">
                                <i class="fa-solid fa-fw fa-users" style="font-size:18px;"></i>
                            </label>
                            -->
                            <label nz-radio-button nzValue="UserTrainingStatus" nz-tooltip
                                nzTooltipTitle="Display User Training Status" nzTooltipPlacement="top">
                                <i class="fa-solid fa-fw fa-user-graduate" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="Training" nz-tooltip
                                nzTooltipTitle="Display Training Status" nzTooltipPlacement="top">
                                <i class="fa-solid fa-fw fa-graduation-cap" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="JobTitle" nz-tooltip nzTooltipTitle="Display Job Titles"
                                nzTooltipPlacement="top">
                                <i class="fa-solid fa-fw fa-briefcase" style="font-size:18px;"></i>
                            </label>
                            <label nz-radio-button nzValue="UserType" nz-tooltip nzTooltipTitle="Display User Types"
                                nzTooltipPlacement="top">
                                <i class="fa-solid fa-fw fa-user-cowboy" style="font-size:18px;"></i>
                            </label>
                        </nz-radio-group>
                    </div>
                    <div style="clear:both;"></div>
                </div>
                <div style="float:right;width:33%;">
                    <div style="float:right;width:25vw;z-index: 1;">
                        <nz-input-group nzSearch [nzAddOnAfter]="suffixIconButton" class="user-search">
                            <input type="text" nz-input placeholder="User Search" [(ngModel)]="userNameToSearchFor"
                                (ngModelChange)="onUserSearchChange($event)" [nzAutocomplete]="autoUserSearch"
                                style="border:1px solid white;" />
                        </nz-input-group>
                        <nz-autocomplete [nzDataSource]="matchingUsers" #autoUserSearch></nz-autocomplete>
                        <ng-template #suffixIconButton>
                            <button nz-button nzType="primary" nzSearch style="height:41px;"><i nz-icon
                                    nzType="search"></i></button>
                        </ng-template>
                    </div>
                </div>
                <div style="clear:both;"></div>
            </div>
        </div>
        <div *ngIf="authenticatedUser.email === 'gregl@teknetium.com' && showCSVBuffer">
            <textarea rows="10" nz-input [(ngModel)]="usersCSV"></textarea>
        </div>
        <div *ngIf="showOrgChart === 'true'" style="position:relative;z-index:1;">
            <div *ngIf="currentSupervisorMenu"
                style="position: fixed;top:0;bottom:0;left:0;right:0;background: rgba(0,0,0,0.6);z-index:999999;">
            </div>

            <nz-modal [(nzVisible)]="showMessageModal" nzTitle="Send a Message to the Selected Users"
                (nzOnCancel)="handleSendMessageCancel()" (nzOnOk)="sendMessage()" nzOkText="Send">
                <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Recipients ( {{
                    recipientUidList.length }} )</label>
                <div
                    style="display:block;margin-bottom:10px;padding:5px;max-height:200px;height:fit-content;overflow: scroll;border:1px solid #999999;border-radius: 5px;">
                    <div style="display:block;padding:4px 20px 0 10px;" *ngFor="let uid of recipientUidList; index as i"
                        (mouseenter)="currentRecipient(uid)"
                        [ngClass]="{'current-recipient': currentRecipientUid === uid}">
                        {{ myOrgUserHash[uid]?.firstName }} {{ myOrgUserHash[uid]?.lastName }}

                        <i *ngIf="currentRecipientUid === uid" nz-icon nzType="close-circle" [nzTheme]="'twotone'"
                            [nzTwotoneColor]="'red'" nz-popconfirm nzPopconfirmTitle="Remove this recipient?"
                            [nzPopconfirmTrigger]="'click'" [nzPopconfirmPlacement]="'right'"
                            (nzOnConfirm)="removeRecipient(i)"
                            style="float:right;font-size:16px;cursor:pointer;vertical-align: middle;"></i>

                    </div>
                </div>
                <div style="z-index: 1000;background-color: white;" (mouseenter)="currentRecipient('')">
                    <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Subject</label>
                    <input nz-input type="text" placeholder="Subject" ngDefaultControl [(ngModel)]="msgSubject"
                        style="margin-bottom:10px;">
                    <label style="margin-bottom: 3px;font-size:12px;color:#999999;">Message</label>
                    <textarea rows="4" nz-input [(ngModel)]="msgBody"></textarea>
                </div>
            </nz-modal>
            <div
                style="position:fixed;bottom:5px;left:75px;right:75px;background:rgba(0,0,255,.09);padding:10px;border:2px solid #afbcf8;border-radius: 5px;">
                <div
                    style="float:left;width:50%;background: rgba(255,255,255, .9);border-radius: 5px;height:35px;padding:5px;">
                    <div *ngIf="currentHoverUser" style="width:100%;">
                        <div style="float:left;overflow-x: hidden;">
                            <i [ngClass]="userTypeIconHash[currentHoverUser?.userType]"
                                style="font-size:16px;vertical-align: middle;"
                                [ngStyle]="{'color': userTrainingStatusColorHash[currentHoverUser?.trainingStatus]}"
                                nz-tooltip [nzTooltipTitle]=""></i>&nbsp;
                            <span
                                style="display:inline-block;font-size:16px;font-weight: 500;color:black;vertical-align: middle;">{{currentHoverUser?.firstName}}
                                {{currentHoverUser?.lastName}}&nbsp;&nbsp;
                            </span>
                            <span
                                style="display:inline-block;font-size:12px;font-weight: 300;color:#444444;vertical-align: middle;margin-right:20px;">({{currentHoverUser?.jobTitle}})
                            </span>
                        </div>
                        <!--
                        <div *ngIf="currentHoverUser?.userType === 'supervisor'" style="float:right;">
                            <i class="fa-solid fa-user"
                                style="font-size:16px;color:black;vertical-align: middle;margin-right:3px;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="No Trainings Assigned"></i>
                            <span style="margin-right:10px;vertical-align: middle;">{{
                                nodeStatHash[currentHoverUid]?.noneCnt}}</span>
                            <i class="fa-solid fa-user"
                                style="font-size:16px;color:#46bd15;margin-right:3px;vertical-align: middle;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="Up To Date"></i>
                            <span style="margin-right:10px;vertical-align: middle;">{{
                                nodeStatHash[currentHoverUid]?.upToDateCnt}}</span>
                            <i class="fa-solid fa-user"
                                style="font-size:16px;color:red;margin-right:3px;vertical-align: middle;" nz-tooltip
                                nzTooltipPlacement="bottomLeft" nzTooltipTitle="Past Due"></i>
                            <span style="vertical-align: middle;">{{ nodeStatHash[currentHoverUid]?.pastDueCnt}}</span>
                        </div>
                        -->
                    </div>
                </div>
                <div style="float:right;width:48%;background: rgba(255,255,255, .9);border-radius: 5px;height:35px;">
                    <app-user-trainings mode="admin" logSession="off" [uid]="currentHoverUid"
                        style="width:100%;height:35px;float:left;" compact="yes">
                    </app-user-trainings>
                </div>
                <div style="clear: both;"></div>
            </div>
        </div>
        <div *ngIf="showOrgChart !== 'true'" style="padding-top:20px;">
            <div style="width:100%;">
                <span style="float:right;margin-right:5px;">1 -
                    {{userListDisplay.length}}</span>
                <div style="clear:both;"></div>
            </div>
            <nz-table #nestedTable [nzData]="userListDisplay" nzPageSize="50000" nzShowRowSelection="true"
                nzShowPagination="false" nzSize="small" [nzScroll]="{ y: '350px' }"
                style="width:100%;background-color: #fafafa;font-size:12px;font-size:12px;display:inline-block;">
                <thead (nzSortChange)="sort($event)" nzSingleSort>
                    <tr style="background-color: #fafafa;">
                        <th nzShowSort nzSortKey="trainingStatus" [nzFilters]="listOfTrainingStatus"
                            (nzFilterChange)="filterTrainingStatus($event)" nzShowFilter style="width:10%;">Status</th>
                        <th nzShowSort nzSortKey="lastName" style="width:17%;">Name</th>
                        <th nzShowSort nzSortKey="supervisorId" style="width:17%;">Supervisor</th>
                        <th nzShowSort nzSortKey="userType" [nzFilters]="listOfUserTypes"
                            (nzFilterChange)="filterUserType($event)" nzShowFilter style="width:15%;">User Type</th>
                        <th nzShowSort nzSortKey="jobTitle" style="width:10%;" [nzFilters]="listOfJobTitles"
                            (nzFilterChange)="filterJobTitles($event)" nzShowFilter>Job Title</th>
                        <th style="width:15%;">Trainings</th>
                    </tr>
                </thead>
                <tbody>
                    <ng-template ngFor let-data [ngForOf]="nestedTable.data" let-i="index">
                        <tr style="font-size:12px;background-color: white;line-height:10px;"
                            (mouseenter)="hoverUid = data._id" (mouseleave)="hoverUid = null"
                            [ngClass]="{'row-selected': rowSelected === i}">
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:10%;">
                                <i [ngClass]="userTypeIconHash[data.userType]"
                                    style="font-size:16px;display:inline-block;"
                                    [ngStyle]="{'color': userTrainingStatusColorHash[data.trainingStatus], 'font-size.px': iconFontSize}"
                                    nz-tooltip [nzTooltipTitle]=""></i>
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:17%;">
                                {{data.firstName}} {{data.lastName}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:17%;">
                                {{myOrgUserHash[data.supervisorId]?.firstName}}
                                {{myOrgUserHash[data.supervisorId]?.lastName}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:15%;">
                                {{data.userType}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:10%;">
                                {{data.jobTitle}}
                            </td>
                            <td (click)="selectUser(data._id, i)" [ngClass]="{'row-selected': rowSelected === i}"
                                style="width:15%;">
                                <div *ngFor="let ut of uidUTHash[data._id]" style="float:left;margin-left:10px;">
                                    <i [ngClass]="allTrainingIdHash[ut.tid]?.versions[0].iconClass"
                                        style="font-size:20px;text-align: center;vertical-align: middle;" nz-tooltip
                                        [nzTooltipTitle]="allTrainingIdHash[ut.tid]?.versions[0].title"
                                        [ngStyle]="{'color': allTrainingIdHash[ut.tid]?.versions[0].iconColor}">
                                    </i>
                                </div>
                            </td>
                        </tr>
                    </ng-template>
                </tbody>
            </nz-table>
        </div>
        <div style="display:block;padding:20px;text-align:center;width:100%;height:98%;">
            <div *ngIf="orgChartSelections.length > 0">
                <h4>Selection</h4>
                <table *ngIf="orgChartSelections.length > 0"
                    style="font-size:12px;width:80%;border:1px solid #dddddd;margin:0 10%;">
                    <tr style="background-color: #f1f1f1;border-bottom: 1px solid #dddddd;">
                        <th>Name</th>
                        <th>Type</th>
                        <th>Value</th>
                        <th>Users selected</th>
                        <th>Actions</th>
                    </tr>
                    <tr *ngFor="let selection of orgChartSelections; let selectionIndex = index" style="width:100%;"
                        class="selection-table-row" (click)="openToUser(selection.rootUid)">
                        <td style="text-align: left;padding:5px;">
                            {{ selection?.name }}
                        </td>
                        <td style="text-align: center;padding:5px;">
                            {{ selectionModeHash[selection?.type] }}
                        </td>
                        <td style="text-align: center;padding:5px;">
                            <div *ngIf="selection?.type === 'UserStatus'">
                                <div style="display: inline-block;vertical-align: middle;">
                                    <i class="fa-solid fa-user" [ngStyle]="{'color': userStatusColorHash[selection.value]}"
                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                    </i>
                                </div>
                                <span>{{ userStatusHash[selection?.value] }}</span>
                            </div>
                            <div *ngIf="selection?.type === 'UserTrainingStatus'">
                                <div style="display: inline-block;vertical-align: middle;">
                                    <i class="fa-solid fa-user"
                                        [ngStyle]="{'color': userTrainingStatusColorHash[selection.value]}"
                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                    </i>
                                </div>
                                <span>{{ userTrainingStatusHash[selection?.value] }}</span>
                            </div>
                            <div *ngIf="selection?.type === 'JobTitle'">
                                <span>{{ selection?.value }}</span>
                            </div>
                            <div *ngIf="selection?.type === 'UserType'">
                                <div style="display: inline-block;vertical-align: middle;">
                                    <i [ngClass]="userTypeIconHash[selection.value]"
                                        style="font-size:16px;margin-right:10px;"></i>
                                </div>
                                <span>{{ userTypeHash[selection?.value] }}</span>
                            </div>
                            <div *ngIf="selection?.type === 'Training'">
                                <div style="display: inline-block;vertical-align: middle;">
                                    <i [ngClass]="getSelectedTrainingIconClass(selection.value)"
                                        [ngStyle]="{'color': getTrainingIconColor(selection.value)}"
                                        style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                    </i>
                                </div>
                                <span>{{ allTrainingIdHash[selection?.value]?.title }}</span>
                            </div>
                        </td>
                        <td style="text-align: center;padding:5px;">
                            {{ userIdsSelected?.length }}
                        </td>
                        <td style="text-align: center;padding:5px;">
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                style="display:inline-block;margin-right:5px;" nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Open to the selected suborganization"
                                (click)="openToUser(selection.rootUid)">
                                <i class="fa-solid fa-search"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                [disabled]="userIdsSelected.length === 0" style="display:inline-block;margin-right:5px;"
                                nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Assign a training to the selected users"
                                (click)="assignTrainingToUser(null)">
                                <i class="fa-solid fa-plus"></i>
                            </button>
                            <button nz-button nzShape="circle"
                                [disabled]="userIdsSelected.length === 0 || !currentTrainingSelected"
                                style="display:inline-block;margin-right:5px;" nz-popconfirm
                                nzPopconfirmTitle="Remove this training from all users selected?"
                                (nzOnConfirm)="confirmUserTrainingDelete()" nz-tooltip nzTooltipPlacement="bottomLeft"
                                nzTooltipTitle="Remove Training from Users">
                                <i class="fa-solid fa-trash"></i></button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                [disabled]="userIdsSelected.length === 0" style="display:inline-block;margin-right:5px;"
                                nz-tooltip nzTooltipPlacement="top" nzTooltipTitle="Email selected users"
                                (click)="showMsgModal()">
                                <i class="fa-solid fa-envelope"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                [disabled]="userIdsSelected.length === 0 || selection.value !== 'notInvited'"
                                style="display:inline-block;margin-right:5px;" nz-tooltip nzTooltipPlacement="top"
                                nzTooltipTitle="Send the Registration Invitation Message to the Selected Users"
                                (click)="sendRegistrationEmail()">
                                <i class="fa-solid fa-envelopes-bulk"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                [disabled]="userIdsSelected.length === 0" style="display:inline-block;margin-right:5px;"
                                nz-tooltip nzTooltipPlacement="top" nzTooltipTitle="Add Users to Watch List"
                                (click)="addToWatchList('user', userIdsSelected, null)">
                                <i class="fa-solid fa-watch"></i>
                            </button>
                            <button nz-button nzSize="default" nzShape="circle" nzType="default"
                                style="display:inline-block;margin-right:5px;color:red;" nz-tooltip
                                nzTooltipPlacement="top" nzTooltipTitle="Remove this selection"
                                (click)="removeSelectionByUid(selection.rootUid)">
                                <i class="fa-solid fa-times"></i>
                            </button>
                            <!--
                            <i class="fa-solid fa-fw fa-plus" style="margin-right:5px;" nz-tooltip
                                nzTooltipTitle="Assign a training to the selected users" nzTooltipPlacement="top"></i>
                            <i class="fa-solid fa-fw fa-trash" nz-tooltip nzTooltipTitle="Remove this selection"
                                (click)="removeSelection(selectionIndex, selection.rootUid)"
                                nzTooltipPlacement="top"></i>
                                -->
                        </td>
                    </tr>
                </table>
                <!--
            <div *ngIf="orgChartSelections.length === 0" style="width:80%;border:1px solid #dddddd;margin:0 10%;">
                No Selections Made Yet.
            </div>
            -->
            </div>

            <div *ngIf="showOrgChart === 'true'"
                style="display:block;height:90%;overflow:scroll;margin-top:20px;width:100%;">

                <nz-modal [nzVisible]="showOrgChartImageModal" nzTitle="Org Chart" nzWidth="80%"
                    (nzOnCancel)="showOrgChartImageModal = false" (nzOnOk)="downloadPNGImage()"
                    nzOkText="Download Image">
                    <div style="text-align: center;">
                        <img #canvas width="100%">
                        <a #downloadPNGLink></a>
                    </div>
                </nz-modal>
                <div style="text-align: center;width:100%;overflow: scroll;position:relative;height:100%;">
                    <!--
                <div id="orgChartTarget" style="width:300px;height:200px;position:fixed;left: 5px;top:200px;border:1px solid #dddddd;">
                <canvas id="canvas" width="300" height="200" style="position:fixed;left: 5px;top:200px;border:1px solid #dddddd;"></canvas>
                </div>
                -->
                    <div #orgChart style="background-color:white;display:inline-block;white-space: nowrap;"
                        [ngClass]="{'node-selected': orgChartSelectionList.includes(authenticatedUser._id)}">
                        <div style="margin-bottom: 20px;">
                            <i *ngIf="selectionMode === 'Training'"
                                [ngClass]="getSelectedTrainingIconClass(currentTrainingSelected)"
                                [ngStyle]="{'color': getTrainingIconColor(currentTrainingSelected)}"
                                style="display:inline-block;vertical-align: baseline;font-size:28px;margin-right:15px;"></i>
                            <h2 style="display:inline-block;">{{orgChartTitle}}</h2>
                            <span style="display:inline-block;font-size:18px;color:#aaaaaa;">&nbsp;&nbsp;&nbsp;{{today |
                                date}}</span>
                        </div>
                        <div class="supervisor-node org-chart-node"
                            style="text-align: center;margin-bottom:20px;position:relative;"
                            id="{{authenticatedUser._id}}">
                            <div *ngIf="supervisorMenuHash[authenticatedUser._id].main" class="supervisor-menu"
                                [ngStyle]="{'left': getMenuXPlacement(authenticatedUser._id), 'top': getMenuYPlacement(authenticatedUser._id)}">
                                <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                    (click)="hideSupervisorMenu(authenticatedUser._id)">
                                    <i class="fa-light fa-times" style="font-size:20px;color:red;"></i>
                                </div>
                                <div style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                    <div style="font-weight:300;font-size:18px;color:blue;">
                                        {{orgChartNodeHash[authenticatedUser._id]?.fName}}
                                        {{orgChartNodeHash[authenticatedUser._id]?.lName}}
                                    </div>
                                </div>
                                <ul class="no-bullets">
                                    <li (click)="assignTrainingToUser(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-plus" style="font-size:14px;margin-right:10px;"></i>
                                        Assign Training
                                    </li>
                                    <li (click)="manageCurrentTrainings(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-file-certificate"
                                            style="font-size:14px;margin-right:10px;"></i>
                                        Manage Current Trainings
                                    </li>
                                    <li (click)="editUser(authenticatedUser._id)" class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-user-edit" style="font-size:14px;margin-right:10px;"></i>
                                        Edit User Data
                                    </li>
                                    <li (click)="showMsgModal(authenticatedUser._id)" class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-envelope" style="font-size:14px;margin-right:10px;"></i>
                                        Email User
                                    </li>
                                    <!--
                                    <li *ngIf="!userIdsSelected.includes(authenticatedUser._id)"
                                        (click)="addToSelectedUsers(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <div>
                                            <div class="selected-node"
                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                <i class="fa-solid fa-plus"
                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                            </div>
                                            Add to Selected Users
                                        </div>
                                    </li>
                                    <li *ngIf="userIdsSelected.includes(authenticatedUser._id)"
                                        (click)="removeFromSelectedUsers(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <div>
                                            <div class="selected-node"
                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                <i class="fa-solid fa-minus"
                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                            </div>
                                            Unselect this User
                                        </div>
                                    </li>
                                    -->
                                    <li (click)="collapseAllSubOrgs(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-angle-double-up"
                                            style="font-size:14px;margin-right:10px;"></i>
                                        Collapse All Suborganizations
                                    </li>
                                    <li (click)="expandAllSubOrgs(authenticatedUser._id)" class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-angle-double-down"
                                            style="font-size:14px;margin-right:10px;"></i>
                                        Expand All Suborganizations
                                    </li>
                                    <li>
                                        <div
                                            style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                            Select Users in this suborganization by
                                        </div>
                                    </li>
                                    <li class="supervisor-menu-item" style="position:relative;"
                                        (mouseover)="showSupervisorSubMenu(authenticatedUser._id, 'userStatus')"
                                        (mouseleave)="hideSupervisorSubMenu(authenticatedUser._id, 'userStatus')">
                                        <i class="fa-solid fa-fw fa-user-check"
                                            style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                        <span style="float:left;">User Status</span>
                                        <i class="fa-light fa-angle-right"
                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                        <div style="clear:both;"></div>
                                        <div *ngIf="supervisorMenuHash[authenticatedUser._id].userStatus"
                                            (mouseleave)="supervisorMenuHash[authenticatedUser._id].userStatus = false"
                                            class="supervisor-sub-menu">
                                            <div *ngFor="let userStatus of listOfUserStatus"
                                                class="supervisor-menu-item"
                                                (click)="filterChanged(authenticatedUser._id, 'UserStatus', userStatus.value)">
                                                <i class="fa-solid fa-user"
                                                    [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                </i>
                                                <div style="font-size:12px;float:left;overflow: hidden;">
                                                    {{userStatus.text}}
                                                </div>
                                                <div style="clear: both;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="supervisor-menu-item" style="position:relative;"
                                        (mouseover)="showSupervisorSubMenu(authenticatedUser._id, 'userTrainingStatus')"
                                        (mouseleave)="hideSupervisorSubMenu(authenticatedUser._id, 'userTrainingStatus')">
                                        <i class="fa-solid fa-fw fa-user-graduate"
                                            style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                        <span style="float:left;">User Training Status</span>
                                        <i class="fa-light fa-angle-right"
                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                        <div style="clear:both;"></div>
                                        <div *ngIf="supervisorMenuHash[authenticatedUser._id].userTrainingStatus"
                                            style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                            (mouseleave)="supervisorMenuHash[authenticatedUser._id].userStatus = false">
                                            <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                style="padding:5px;" class="supervisor-menu-item"
                                                (click)="filterChanged(authenticatedUser._id, 'UserTrainingStatus', userTrainingStatus.value)">
                                                <i class="fa-solid fa-user"
                                                    [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                </i>
                                                <div style="font-size:12px;float:left;overflow: hidden;">
                                                    {{userTrainingStatus.text}}
                                                </div>
                                                <div style="clear: both;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="supervisor-menu-item" style="position:relative;"
                                        (mouseover)="showSupervisorSubMenu(authenticatedUser._id, 'jobTitle')"
                                        (mouseleave)="hideSupervisorSubMenu(authenticatedUser._id, 'jobTitle')">
                                        <i class="fa-solid fa-fw fa-briefcase"
                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                        <span style="float:left;">Job Title</span>
                                        <i class="fa-light fa-angle-right"
                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                        <div style="clear:both;"></div>
                                        <div *ngIf="supervisorMenuHash[authenticatedUser._id].jobTitle"
                                            style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                            (mouseleave)="supervisorMenuHash[authenticatedUser._id].jobTitle = false">
                                            <div *ngFor="let jobTitle of listOfJobTitles" style="padding:5px;"
                                                class="supervisor-menu-item"
                                                (click)="filterChanged(authenticatedUser._id, 'JobTitle', jobTitle.value)">
                                                <div style="font-size:12px;float:left;overflow: hidden;">
                                                    {{jobTitle.text}}
                                                </div>
                                                <div style="clear: both;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="supervisor-menu-item" style="position:relative;"
                                        (mouseover)="showSupervisorSubMenu(authenticatedUser._id, 'userType')"
                                        (mouseleave)="hideSupervisorSubMenu(authenticatedUser._id, 'userType')">
                                        <i class="fa-solid fa-fw fa-user-cowboy"
                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                        <span style="float:left;">User Type</span>
                                        <i class="fa-light fa-angle-right"
                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                        <div style="clear:both;"></div>
                                        <div *ngIf="supervisorMenuHash[authenticatedUser._id].userType"
                                            style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                            (mouseleave)="supervisorMenuHash[authenticatedUser._id].userType = false">
                                            <div *ngFor="let userType of listOfUserTypes" style="padding:5px;"
                                                class="supervisor-menu-item"
                                                (click)="filterChanged(authenticatedUser._id, 'UserType', userType.value)">
                                                <i class="fas" [ngClass]="userTypeIconHash[userType.value]"
                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                </i>
                                                <div style="font-size:12px;float:left;overflow: hidden;">
                                                    {{userType.text}}
                                                </div>
                                                <div style="clear: both;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li class="supervisor-menu-item" style="position:relative;"
                                        (mouseover)="showSupervisorSubMenu(authenticatedUser._id, 'training')"
                                        (mouseleave)="hideSupervisorSubMenu(authenticatedUser._id, 'training')">
                                        <i class="fa-solid fa-fw fa-graduation-cap"
                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                        <span style="float:left;">Training</span>
                                        <i class="fa-light fa-angle-right"
                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                        <div style="clear:both;"></div>
                                        <div *ngIf="supervisorMenuHash[authenticatedUser._id].training"
                                            style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                            (mouseleave)="supervisorMenuHash[authenticatedUser._id].training = false">
                                            <div *ngFor="let training of listOfTrainingTitles" style="padding:5px;"
                                                class="supervisor-menu-item"
                                                (click)="filterChanged(authenticatedUser._id, 'Training', training.value)">
                                                <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                    [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                    style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                </i>
                                                <div style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                    {{training.text}}
                                                </div>
                                                <div style="clear:both;"></div>
                                            </div>
                                        </div>
                                    </li>
                                    <li (click)="selectOrg(authenticatedUser._id)" class="supervisor-menu-item">
                                        <i class="fa-solid fa-fw fa-users" style="font-size:14px;margin-right:10px;"></i>
                                        Select Entire Suborganization
                                    </li>
                                    <li (click)="removeSelectionByUid(authenticatedUser._id)"
                                        class="supervisor-menu-item">
                                        <div>
                                            <div class="selected-node"
                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                <i class="fa-solid fa-minus"
                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                            </div>
                                            Clear Selection
                                        </div>
                                    </li>
                                </ul>
                            </div>

                            <div (mouseenter)="setHoverData(authenticatedUser._id)" (mouseleave)="setHoverData(null)"
                                joyrideStep="task1Step2" [stepContent]="stepContent"
                                [stepContentParams]="taskStepContentHash?.task1Step2"
                                (next)="onTaskWizardNext('task1Step2')"
                                (click)="showSupervisorMenu(authenticatedUser._id)"
                                [ngClass]="{'selected-node': (userIdsSelected.includes(authenticatedUser._id)), 'hover-node': authenticatedUser._id === currentHoverUid  || currentHoverReportChain.includes(authenticatedUser._id), 'non-supervisor-icon-node': myOrgUserHash[authenticatedUser._id]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[authenticatedUser._id]?.userType === 'supervisor'}">
                                <!--
                                <div *ngIf="authenticatedUser._id === currentHoverUid && authenticatedUser.userType === 'supervisor'"
                                    class="supervisor-menu-icon" (click)="showSupervisorMenu(authenticatedUser._id)">
                                    <i class="fa-regular fa-fw fa-ellipsis-v"></i>
                                </div>
                                -->
                                <i [ngClass]="userTypeIconHash[authenticatedUser.userType]"
                                    [ngStyle]="{'color': getStatusColor(authenticatedUser._id)}"></i>
                                <span style="display: block;color:#666666;" [ngStyle]="{'font-size.px': textFontSize}">
                                    {{authenticatedUser.firstName}}<br>{{authenticatedUser.lastName}}
                                </span>
                            </div>
                            <div *ngIf="!collapsedNodes.includes(authenticatedUser._id)"
                                class="org-chart-vert-connector-bottom">
                            </div>
                            <div *ngIf="!collapsedNodes.includes(authenticatedUser._id) && myOrgUserHash[authenticatedUser._id]?.userType === 'supervisor'"
                                (click)="collapseNode(authenticatedUser._id, true)" nz-tooltip
                                nzTooltipTitle="Collapse Suborganization" nzTooltipPlacement="right">
                                <i class="fa-light fa-minus-circle" style="font-size:14px;cursor:pointer;"></i>
                            </div>
                            <div *ngIf="collapsedNodes.includes(authenticatedUser._id) && myOrgUserHash[authenticatedUser._id]?.userType === 'supervisor'"
                                (click)="collapseNode(authenticatedUser._id, false)" style="margin:0 8px;"
                                [ngClass]="{'option-selected': orgChartSelectionList.includes(authenticatedUser._id)}">
                                <i class="fa-regular fa-plus-circle" nz-tooltip nzTooltipTitle="Expand Suborganization"
                                    nzTooltipPlacement="right"
                                    style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                <div (mouseenter)="setHoverData(authenticatedUser._id)"
                                    (mouseleave)="setHoverData(null)" class="collapsed-block"
                                    [ngClass]="{'hover-collapsed-block': orgChartNodeHash[authenticatedUser._id]?.extra.reportChain.includes(currentHoverUid) || authenticatedUser._id === currentHoverUid}">
                                    <div nz-tooltip nzTooltipTitle="Total Users" nzTooltipPlacement="right"
                                        style="display:flex;justify-content:space-between;">
                                        <i class="fa-solid fa-users" style="font-size:18px;"></i>
                                        <div style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                            {{nodeStatHash[authenticatedUser._id]?.userCnt}}
                                        </div>
                                    </div>
                                    <div *ngIf="(displayMode[authenticatedUser._id] === 'UserTrainingStatus')"
                                        style="padding:5px;">
                                        <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                            <div class="selected-node"
                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                            </div>
                                            <div style="display:inline-block;padding-top:6px;">
                                                {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                            </div>
                                        </div>
                                        <div
                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                            User Training Status
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Users With No Trainings"
                                            nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTrainingStatus:none'}">
                                            <i class="fa-solid fa-user"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                            {{nodeStatHash[authenticatedUser._id]?.userTrainingStatusHash?.none.length}}
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Up To Date Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTrainingStatus:upToDate'}">
                                            <i class="fa-solid fa-user"
                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                            {{nodeStatHash[authenticatedUser._id]?.userTrainingStatusHash?.upToDate.length}}
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Users With At Least One Training Past Due"
                                            nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTrainingStatus:pastDue'}">
                                            <i class="fa-solid fa-user"
                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                            {{nodeStatHash[authenticatedUser._id]?.userTrainingStatusHash?.pastDue.length}}
                                        </div>
                                    </div>
                                    <div *ngIf="displayMode[authenticatedUser._id] === 'Training'" style="padding:5px;">
                                        <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                            <div class="selected-node"
                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                            </div>
                                            <div style="display:inline-block;padding-top:6px;">
                                                {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                            </div>
                                        </div>
                                        <div
                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                            Training Status
                                        </div>
                                        <!--
                                        <div>
                                            <nz-badge [nzCount]="assignableTrainings?.length" [nzStyle]="{ backgroundColor: '#bbbbbb', fontSize: '10px' }">
                                            </nz-badge>
                                            <nz-badge [nzCount]="assignableTrainings?.length" [nzStyle]="{ backgroundColor: 'red', fontSize: '10px' }">
                                            </nz-badge>
                                            <nz-badge [nzCount]="'0'" [nzStyle]="{ backgroundColor: '#4891f7', fontSize: '10px' }"></nz-badge>
                                            <nz-badge [nzCount]="'0'" [nzStyle]="{ backgroundColor: '#feb90b', fontSize: '10px' }">
                                            </nz-badge>
                                            <ng-template #trainingPercentageBadgeTemplate>
                                                {{assignableTrainings?.length}}%
                                            </ng-template>
                                        </div>
                                        -->
                                        <div class="collapsed-training-status-node">
                                            <div *ngFor="let training of assignableTrainings" nz-tooltip
                                                [nzTooltipTitle]="training.title" nzTooltipPlacement="right"
                                                class="training-status-row">
                                                <div class="training-status-icon">
                                                    <i [ngClass]="training.iconClass" style="font-size:16px;"
                                                        [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                </div>
                                                <div class="training-status-rhs">
                                                    <span class="training-status-values"
                                                        style="color:#46bd15;">{{nodeStatHash[authenticatedUser._id]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                    <span class="training-status-values"
                                                        style="color:red;">{{nodeStatHash[authenticatedUser._id]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                    <span class="training-status-values"
                                                        style="color:#4891f7;">{{nodeStatHash[authenticatedUser._id]?.trainingHash[training._id]?.completed?.length}}</span>
                                                    <span class="training-status-values"
                                                        style="color:#feb90b;">{{nodeStatHash[authenticatedUser._id]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="displayMode[authenticatedUser._id] === 'JobTitle'" style="padding:5px;">
                                        <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                            <div class="selected-node"
                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                            </div>
                                            <div style="display:inline-block;padding-top:6px;">
                                                {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                            </div>
                                        </div>
                                        <div
                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                            Job Titles
                                        </div>
                                        <div *ngFor="let jobTitle of jobTitles"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'JobTitle:' + jobTitle}"
                                            style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                            {{jobTitle}}
                                            <div style="margin-left:20px;font-size: 12px;">
                                                {{ nodeStatHash[authenticatedUser._id]?.jobTitleHash[jobTitle]?.length
                                                }}
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="displayMode[authenticatedUser._id] === 'UserType'" style="padding:5px;">
                                        <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                            <div class="selected-node"
                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                            </div>
                                            <div style="display:inline-block;padding-top:6px;">
                                                {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                            </div>
                                        </div>
                                        <div
                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                            User Types</div>
                                        <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTypes:individualContributor'}"
                                            nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user"
                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>

                                            <div style="justify-content: right;">
                                                {{nodeStatHash[authenticatedUser._id]?.userTypeHash?.individualContributor?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Supervisors" nzTooltipPlacement="right"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTypes:supervisor'}"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user-tie"
                                                [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;">
                                                {{nodeStatHash[authenticatedUser._id]?.userTypeHash?.supervisor?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Volunteers" nzTooltipPlacement="right"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTypes:volunteer'}"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user-cowboy"
                                                [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;">
                                                {{nodeStatHash[authenticatedUser._id]?.userTypeHash?.volunteer?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Contractors" nzTooltipPlacement="right"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTypes:contractor'}"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user-hard-hat"
                                                [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;">
                                                {{nodeStatHash[authenticatedUser._id]?.userTypeHash?.contractor?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Customers" nzTooltipPlacement="right"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserTypes:customer'}"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user-alien"
                                                [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;">
                                                {{nodeStatHash[authenticatedUser._id]?.userTypeHash?.customer?.length}}
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="displayMode[authenticatedUser._id] === 'UserStatus'"
                                        style="padding:5px;">
                                        <div nz-tooltip nzTooltipTitle="Selected Users" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                            <div class="selected-node"
                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                            </div>
                                            <div style="display:inline-block;padding-top:6px;">
                                                {{nodeStatHash[authenticatedUser._id]?.selectedCnt}}
                                            </div>
                                        </div>
                                        <div
                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                            User Status
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Active"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserStatus:active'}"
                                            nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                            <i class="fa-solid fa-user"
                                                style="color:blue;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;color:black;">
                                                {{nodeStatHash[authenticatedUser._id]?.userStatusHash?.active?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Inactive" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserStatus:inactive'}">
                                            <i class="fa-solid fa-user"
                                                style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;color:black;">
                                                {{nodeStatHash[authenticatedUser._id]?.userStatusHash?.inactive?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Not Invited" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserStatus:notInvited'}">
                                            <i class="fa-solid fa-user"
                                                style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;color:black;">
                                                {{nodeStatHash[authenticatedUser._id]?.userStatusHash?.notInvited?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Pending" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserStatus:pending'}">
                                            <i class="fa-solid fa-user"
                                                style="color:orange;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;color:black;">
                                                {{nodeStatHash[authenticatedUser._id]?.userStatusHash?.pending?.length}}
                                            </div>
                                        </div>
                                        <div nz-tooltip nzTooltipTitle="Error" nzTooltipPlacement="right"
                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                            [ngClass]="{'option-selected': currentFilterHash[authenticatedUser._id] === 'UserStatus:error'}">
                                            <i class="fa-solid fa-user"
                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                            <div style="justify-content: right;color:black;">
                                                {{nodeStatHash[authenticatedUser._id]?.userStatusHash?.error?.length}}
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="!collapsedNodes.includes(authenticatedUser._id)"
                            style="background-color:white;display:block;">
                            <div *ngFor="let dr of authenticatedUser.directReports; let drIndex = index"
                                style="vertical-align: top;position:relative;display:inline-block;">
                                <div style="position:relative;">
                                    <div class="org-chart-vert-connector">
                                    </div>
                                    <div *ngIf="!isLast(authenticatedUser.directReports, drIndex)"
                                        class="org-chart-horizontal-connector-right">
                                    </div>
                                    <div *ngIf="drIndex !== 0" class="org-chart-horizontal-connector-left">
                                    </div>
                                </div>
                                <div style="text-align: center;" id="{{dr}}-container"
                                    [ngClass]="{'node-selected': orgChartSelectionList.includes(dr)}">
                                    <div class="org-chart-node" [ngStyle]="{'padding.px': orgChartPadding}" id="{{dr}}"
                                        [ngClass]="{'supervisor-node': myOrgUserHash[dr]?.userType === 'supervisor'}">
                                        <div *ngIf="supervisorMenuHash[dr]?.main" class="supervisor-menu"
                                            [ngStyle]="{'left': getMenuXPlacement(dr), 'top': getMenuYPlacement(dr)}">
                                            <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                (click)="hideSupervisorMenu(dr)">
                                                <i class="fa-light fa-times" style="font-size:20px;color:red;"></i>
                                            </div>
                                            <div style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                <div style="font-weight:300;font-size:18px;color:blue;">
                                                    {{orgChartNodeHash[dr]?.fName}}
                                                    {{orgChartNodeHash[dr]?.lName}}
                                                </div>
                                            </div>
                                            <ul class="no-bullets">
                                                <li (click)="assignTrainingToUser(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-plus"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Assign Training
                                                </li>
                                                <li (click)="manageCurrentTrainings(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-file-certificate"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Manage Current Trainings
                                                </li>
                                                <li (click)="editUser(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-user-edit"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Edit User Data
                                                </li>
                                                <li (click)="showMsgModal(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-envelope"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Email User
                                                </li>
                                                <li (click)="addToWatchList('user', [dr], dr)"
                                                    class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-watch"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Add To Watch List
                                                </li>
                                                <!--
                                                <li *ngIf="!userIdsSelected.includes(dr)"
                                                    (click)="addToSelectedUsers(dr)" class="supervisor-menu-item">
                                                    <div>
                                                        <div class="selected-node"
                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                            <i class="fa-solid fa-plus"
                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                        </div>
                                                        Add to Selected Users
                                                    </div>
                                                </li>
                                                <li *ngIf="userIdsSelected.includes(dr)"
                                                    (click)="removeFromSelectedUsers(dr)" class="supervisor-menu-item">
                                                    <div>
                                                        <div class="selected-node"
                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                            <i class="fa-solid fa-minus"
                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                        </div>
                                                        Unselect this User
                                                    </div>
                                                </li>
                                                -->
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    (click)="collapseAllSubOrgs(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-angle-double-up"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Collapse All Suborganizations
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    (click)="expandAllSubOrgs(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-angle-double-down"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Expand All Suborganizations
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'">
                                                    <div
                                                        style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                        Select Users in this suborganization by
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    class="supervisor-menu-item" style="position:relative;"
                                                    (mouseover)="showSupervisorSubMenu(dr, 'userStatus')"
                                                    (mouseleave)="hideSupervisorSubMenu(dr, 'userStatus')">
                                                    <i class="fa-solid fa-fw fa-user-check"
                                                        style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                    <span style="float:left;">User Status</span>
                                                    <i class="fa-light fa-angle-right"
                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                    <div style="clear:both;"></div>
                                                    <div *ngIf="supervisorMenuHash[dr].userStatus"
                                                        (mouseleave)="supervisorMenuHash[dr].userStatus = false"
                                                        class="supervisor-sub-menu">
                                                        <div *ngFor="let userStatus of listOfUserStatus"
                                                            class="supervisor-menu-item"
                                                            (click)="filterChanged(dr, 'UserStatus', userStatus.value)">
                                                            <i class="fa-solid fa-user"
                                                                [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                            </i>
                                                            <div style="font-size:12px;float:left;overflow: hidden;">
                                                                {{userStatus.text}}
                                                            </div>
                                                            <div style="clear: both;"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    class="supervisor-menu-item" style="position:relative;"
                                                    (mouseover)="showSupervisorSubMenu(dr, 'userTrainingStatus')"
                                                    (mouseleave)="hideSupervisorSubMenu(dr, 'userTrainingStatus')">
                                                    <i class="fa-solid fa-fw fa-user-graduate"
                                                        style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                    <span style="float:left;">User Training Status</span>
                                                    <i class="fa-light fa-angle-right"
                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                    <div style="clear:both;"></div>
                                                    <div *ngIf="supervisorMenuHash[dr].userTrainingStatus"
                                                        style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                        (mouseleave)="supervisorMenuHash[dr].userStatus = false">
                                                        <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                            style="padding:5px;" class="supervisor-menu-item"
                                                            (click)="filterChanged(dr, 'UserTrainingStatus', userTrainingStatus.value)">
                                                            <i class="fa-solid fa-user"
                                                                [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                            </i>
                                                            <div style="font-size:12px;float:left;overflow: hidden;">
                                                                {{userTrainingStatus.text}}
                                                            </div>
                                                            <div style="clear: both;"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    class="supervisor-menu-item" style="position:relative;"
                                                    (mouseover)="showSupervisorSubMenu(dr, 'jobTitle')"
                                                    (mouseleave)="hideSupervisorSubMenu(dr, 'jobTitle')">
                                                    <i class="fa-solid fa-fw fa-briefcase"
                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                    <span style="float:left;">Job Title</span>
                                                    <i class="fa-light fa-angle-right"
                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                    <div style="clear:both;"></div>
                                                    <div *ngIf="supervisorMenuHash[dr].jobTitle"
                                                        style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                        (mouseleave)="supervisorMenuHash[dr].jobTitle = false">
                                                        <div *ngFor="let jobTitle of listOfJobTitles"
                                                            style="padding:5px;" class="supervisor-menu-item"
                                                            (click)="filterChanged(dr, 'JobTitle', jobTitle.value)">
                                                            <div style="font-size:12px;float:left;overflow: hidden;">
                                                                {{jobTitle.text}}
                                                            </div>
                                                            <div style="clear: both;"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    class="supervisor-menu-item" style="position:relative;"
                                                    (mouseover)="showSupervisorSubMenu(dr, 'userType')"
                                                    (mouseleave)="hideSupervisorSubMenu(dr, 'userType')">
                                                    <i class="fa-solid fa-fw fa-user-cowboy"
                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                    <span style="float:left;">User Type</span>
                                                    <i class="fa-light fa-angle-right"
                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                    <div style="clear:both;"></div>
                                                    <div *ngIf="supervisorMenuHash[dr].userType"
                                                        style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                        (mouseleave)="supervisorMenuHash[dr].userType = false">
                                                        <div *ngFor="let userType of listOfUserTypes"
                                                            style="padding:5px;" class="supervisor-menu-item"
                                                            (click)="filterChanged(dr, 'UserType', userType.value)">
                                                            <i class="fas" [ngClass]="userTypeIconHash[userType.value]"
                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                            </i>
                                                            <div style="font-size:12px;float:left;overflow: hidden;">
                                                                {{userType.text}}
                                                            </div>
                                                            <div style="clear: both;"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    class="supervisor-menu-item" style="position:relative;"
                                                    (mouseover)="showSupervisorSubMenu(dr, 'training')"
                                                    (mouseleave)="hideSupervisorSubMenu(dr, 'training')">
                                                    <i class="fa-solid fa-fw fa-graduation-cap"
                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                    <span style="float:left;">Training</span>
                                                    <i class="fa-light fa-angle-right"
                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                    <div style="clear:both;"></div>
                                                    <div *ngIf="supervisorMenuHash[dr].training"
                                                        style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                        (mouseleave)="supervisorMenuHash[dr].training = false">
                                                        <div *ngFor="let training of listOfTrainingTitles"
                                                            style="padding:5px;" class="supervisor-menu-item"
                                                            (click)="filterChanged(dr, 'Training', training.value)">
                                                            <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                            </i>
                                                            <div
                                                                style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                {{training.text}}
                                                            </div>
                                                            <div style="clear:both;"></div>
                                                        </div>
                                                    </div>
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    (click)="selectOrg(dr)" class="supervisor-menu-item">
                                                    <i class="fa-solid fa-fw fa-users"
                                                        style="font-size:14px;margin-right:10px;"></i>
                                                    Select Entire Suborganization
                                                </li>
                                                <li *ngIf="myOrgUserHash[dr]?.userType === 'supervisor'"
                                                    (click)="removeSelectionByUid(dr)" class="supervisor-menu-item">
                                                    <div>
                                                        <div class="selected-node"
                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                            <i class="fa-solid fa-minus"
                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                        </div>
                                                        Clear Selection
                                                    </div>
                                                </li>
                                            </ul>
                                        </div>
                                        <div (mouseenter)="setHoverData(dr)" (mouseleave)="setHoverData(null)"
                                            (click)="showSupervisorMenu(dr)"
                                            [ngClass]="{'selected-node': userIdsSelected.includes(dr), 'hover-node': dr === currentHoverUid ||
                                        orgChartNodeHash[dr]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr), 'non-supervisor-icon-node': myOrgUserHash[dr]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr]?.userType !== 'supervisor' && currentHoverUid === dr}">
                                            <!--
                                            <div *ngIf="dr === currentHoverUid" class="supervisor-menu-icon"
                                                (click)="showSupervisorMenu(dr)">
                                                <i class="fa-regular fa-fw fa-ellipsis-v"></i>
                                            </div>
                                            -->
                                            <i [ngClass]="userTypeIconHash[myOrgUserHash[dr]?.userType]"
                                                [ngStyle]="{'color': getStatusColor(dr)}"></i>
                                            <span
                                                *ngIf="myOrgUserHash[dr]?.userType === 'supervisor' || includeFullName"
                                                [ngStyle]="{'font-size.px': textFontSize}"
                                                style="z-index:1000000;display: block;color:#666666;">
                                                {{orgChartNodeHash[dr]?.fName}}<br>{{orgChartNodeHash[dr]?.lName}}
                                            </span>
                                        </div>
                                        <div *ngIf="myOrgUserHash[dr]?.userType === 'supervisor' && !collapsedNodes.includes(dr)"
                                            class="org-chart-vert-connector-bottom">
                                        </div>
                                        <div *ngIf="!collapsedNodes.includes(dr) && myOrgUserHash[dr]?.userType === 'supervisor'"
                                            (click)="collapseNode(dr, true)" nz-tooltip
                                            nzTooltipTitle="Collapse Suborganization" nzTooltipPlacement="right">
                                            <i class="fa-light fa-minus-circle" style="font-size:14px;cursor:pointer;"></i>
                                        </div>
                                        <div *ngIf="collapsedNodes.includes(dr) && myOrgUserHash[dr]?.userType === 'supervisor'"
                                            (click)="collapseNode(dr, false)" style="margin:0 8px;"
                                            [ngClass]="{'option-selected': orgChartSelectionList.includes(dr)}">
                                            <i class="fa-regular fa-plus-circle" nz-tooltip
                                                nzTooltipTitle="Expand Suborganization" nzTooltipPlacement="right"
                                                style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                            <div (mouseenter)="setHoverData(dr)" (mouseleave)="setHoverData(null)"
                                                class="collapsed-block"
                                                [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr]?.extra.reportChain.includes(currentHoverUid) || dr === currentHoverUid}">
                                                <div nz-tooltip nzTooltipTitle="Total Users" nzTooltipPlacement="right"
                                                    style="display:flex;justify-content:space-between;">
                                                    <i class="fa-solid fa-users" style="font-size:18px;"></i>
                                                    <div
                                                        style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                        {{nodeStatHash[dr]?.userCnt}}
                                                    </div>
                                                </div>
                                                <div *ngIf="displayMode[dr] === 'UserTrainingStatus'"
                                                    style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Users With No Trainings"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserTrainingStatus:none'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                        {{nodeStatHash[dr]?.userTrainingStatusHash?.none?.length}}
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Up To Date Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserTrainingStatus:upToDate'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                        {{nodeStatHash[dr]?.userTrainingStatusHash.upToDate?.length}}
                                                    </div>
                                                    <div nz-tooltip
                                                        nzTooltipTitle="Users With At Least One Training Past Due"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserTrainingStatus:pastDue'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                        {{nodeStatHash[dr]?.userTrainingStatusHash.pastDue?.length}}
                                                    </div>
                                                </div>
                                                <div *ngIf="displayMode[dr] === 'Training'" style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <div class="collapsed-training-status-node">
                                                        <div *ngFor="let training of assignableTrainings" nz-tooltip
                                                            [nzTooltipTitle]="training.title" nzTooltipPlacement="right"
                                                            class="training-status-row">
                                                            <div class="training-status-icon">
                                                                <i [ngClass]="training.iconClass"
                                                                    style="font-size:16px;"
                                                                    [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                            </div>
                                                            <div class="training-status-rhs">
                                                                <span class="training-status-values"
                                                                    style="color:#46bd15;">{{nodeStatHash[dr]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                <span class="training-status-values"
                                                                    style="color:red;">{{nodeStatHash[dr]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                <span class="training-status-values"
                                                                    style="color:#4891f7;">{{nodeStatHash[dr]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                <span class="training-status-values"
                                                                    style="color:#feb90b;">{{nodeStatHash[dr]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                            </div>
                                                            <div style="clear:both;"></div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <!--
                                                <div *ngIf="displayMode[dr] === 'Training'" style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <div *ngFor="let training of assignableTrainings" nz-tooltip
                                                        [nzTooltipTitle]="training.title" nzTooltipPlacement="right">
                                                        <div style="float:left;padding:2px;">
                                                            <i [ngClass]="training.iconClass"
                                                                [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                        </div>
                                                        <div style="float:right;margin-left:20px;">
                                                            <span class="training-status-values"
                                                                style="color:#46bd15;">{{nodeStatHash[dr]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                            <span class="training-status-values"
                                                                style="color:red;">{{nodeStatHash[dr]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                            <span class="training-status-values"
                                                                style="color:#4891f7;">{{nodeStatHash[dr]?.trainingHash[training._id]?.completed?.length}}</span>
                                                            <span class="training-status-values"
                                                                style="color:#feb90b;">{{nodeStatHash[dr]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                        </div>
                                                        <div style="clear: both;"></div>
                                                    </div>
                                                </div>
                                                -->
                                                <div *ngIf="displayMode[dr] === 'JobTitle'" style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <div *ngFor="let jobTitle of jobTitles"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'JobTitle:' + jobTitle}"
                                                        style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                        {{jobTitle}}
                                                        <div style="margin-left:20px;font-size: 12px;">
                                                            {{ nodeStatHash[dr]?.jobTitleHash[jobTitle]?.length }}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="displayMode[dr] === 'UserType'" style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserType:individualContributor'}"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                        <i class="fa-solid fa-user"
                                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>

                                                        <div style="justify-content: right;">
                                                            {{nodeStatHash[dr]?.userTypeHash?.individualContributor?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Supervisors"
                                                        nzTooltipPlacement="right"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserType:supervisor'}"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                        <i class="fa-solid fa-user-tie"
                                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;">
                                                            {{nodeStatHash[dr]?.userTypeHash?.supervisor?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Volunteers"
                                                        nzTooltipPlacement="right"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserType:volunteer'}"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                        <i class="fa-solid fa-user-cowboy"
                                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;">
                                                            {{nodeStatHash[dr]?.userTypeHash?.volunteer?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Contractors"
                                                        nzTooltipPlacement="right"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserType:contractor'}"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                        <i class="fa-solid fa-user-hard-hat"
                                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;">
                                                            {{nodeStatHash[dr]?.userTypeHash?.contractor?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Customers"
                                                        nzTooltipPlacement="right"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserType:customer'}"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                        <i class="fa-solid fa-user-alien"
                                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;">
                                                            {{nodeStatHash[dr]?.userTypeHash?.customer?.length}}
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="displayMode[dr] === 'UserStatus'" style="padding:5px;">
                                                    <div nz-tooltip nzTooltipTitle="Selected Users"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                        <div class="selected-node"
                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                        </div>
                                                        <div style="display:inline-block;padding-top:6px;">
                                                            {{nodeStatHash[dr]?.selectedCnt}}
                                                        </div>
                                                    </div>
                                                    <!--
                                                <div
                                                    style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                    User Status</div>
                                                    -->
                                                    <div nz-tooltip nzTooltipTitle="Active" nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserStatus:active'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;color:black;">
                                                            {{nodeStatHash[dr]?.userStatusHash?.active?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Inactive" nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserStatus:inactive'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;color:black;">
                                                            {{nodeStatHash[dr]?.userStatusHash?.inactive?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Not Invited"
                                                        nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserStatus:notInvited'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;color:black;">
                                                            {{nodeStatHash[dr]?.userStatusHash?.notInvited?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Pending" nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserStatus:pending'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;color:black;">
                                                            {{nodeStatHash[dr]?.userStatusHash?.pending?.length}}
                                                        </div>
                                                    </div>
                                                    <div nz-tooltip nzTooltipTitle="Error" nzTooltipPlacement="right"
                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                        [ngClass]="{'option-selected': currentFilterHash[dr] === 'UserStatus:error'}">
                                                        <i class="fa-solid fa-user"
                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                        <div style="justify-content: right;color:black;">
                                                            {{nodeStatHash[dr]?.userStatusHash?.error?.length}}
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                    <div *ngIf="!collapsedNodes.includes(dr)" style="display:block;">
                                        <div *ngFor="let dr2 of myOrgUserHash[dr]?.directReports; let dr2Index = index"
                                            style="vertical-align: top;position:relative;"
                                            [ngClass]="{'inline-block': orgChartDirectionHash[dr] === 'inline-block', 'block': orgChartDirectionHash[dr] === 'block'}">
                                            <div *ngIf="orgChartDirectionHash[dr] === 'inline-block'"
                                                style="position:relative;">
                                                <div class="org-chart-vert-connector">
                                                </div>
                                                <div *ngIf="!isLast(myOrgUserHash[dr]?.directReports, dr2Index)"
                                                    class="org-chart-horizontal-connector-right">
                                                </div>
                                                <div *ngIf="dr2Index > 0" class="org-chart-horizontal-connector-left">
                                                </div>
                                            </div>
                                            <div style="text-align: center;" id="{{dr2}}-container"
                                                [ngClass]="{'node-selected': orgChartSelectionList.includes(dr2)}">
                                                <div [ngStyle]="{'padding.px': orgChartPadding}" class="org-chart-node"
                                                    id="{{dr2}}"
                                                    [ngClass]="{'supervisor-node': myOrgUserHash[dr2]?.userType === 'supervisor'}">
                                                    <div *ngIf="supervisorMenuHash[dr2]?.main" class="supervisor-menu"
                                                        [ngStyle]="{'left': getMenuXPlacement(dr2), 'top': getMenuYPlacement(dr2)}">
                                                        <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                            (click)="hideSupervisorMenu(dr2)">
                                                            <i class="fa-light fa-times"
                                                                style="font-size:20px;color:red;"></i>
                                                        </div>
                                                        <div
                                                            style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                            <div style="font-weight:300;font-size:18px;color:blue;">
                                                                {{orgChartNodeHash[dr2]?.fName}}
                                                                {{orgChartNodeHash[dr2]?.lName}}
                                                            </div>
                                                        </div>
                                                        <ul class="no-bullets">
                                                            <li (click)="assignTrainingToUser(dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-plus"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Assign Training
                                                            </li>
                                                            <li (click)="manageCurrentTrainings(dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-file-certificate"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Manage Current Trainings
                                                            </li>
                                                            <li (click)="editUser(dr2)" class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-user-edit"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Edit User Data
                                                            </li>
                                                            <li (click)="showMsgModal(dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-envelope"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Email User
                                                            </li>
                                                            <li (click)="addToWatchList('user', [dr2], dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-watch"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Add To Watch List
                                                            </li>
                                                            <!--
                                                            <li *ngIf="!userIdsSelected.includes(dr2)"
                                                                (click)="addToSelectedUsers(dr2)"
                                                                class="supervisor-menu-item">
                                                                <div>
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                        <i class="fa-solid fa-plus"
                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                    </div>
                                                                    Add to Selected Users
                                                                </div>
                                                            </li>
                                                            <li *ngIf="userIdsSelected.includes(dr2)"
                                                                (click)="removeFromSelectedUsers(dr2)"
                                                                class="supervisor-menu-item">
                                                                <div>
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                        <i class="fa-solid fa-minus"
                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                    </div>
                                                                    Unselect this User
                                                                </div>
                                                            </li>
                                                            -->
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                (click)="collapseAllSubOrgs(dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-angle-double-up"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Collapse All Suborganizations
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                (click)="expandAllSubOrgs(dr2)"
                                                                class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-angle-double-down"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Expand All Suborganizations
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'">
                                                                <div
                                                                    style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                    Select Users in this suborganization by
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                class="supervisor-menu-item" style="position:relative;"
                                                                (mouseover)="showSupervisorSubMenu(dr2, 'userStatus')"
                                                                (mouseleave)="hideSupervisorSubMenu(dr2, 'userStatus')">
                                                                <i class="fa-solid fa-fw fa-user-check"
                                                                    style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                <span style="float:left;">User Status</span>
                                                                <i class="fa-light fa-angle-right"
                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                <div style="clear:both;"></div>
                                                                <div *ngIf="supervisorMenuHash[dr2].userStatus"
                                                                    (mouseleave)="supervisorMenuHash[dr2].userStatus = false"
                                                                    class="supervisor-sub-menu">
                                                                    <div *ngFor="let userStatus of listOfUserStatus"
                                                                        class="supervisor-menu-item"
                                                                        (click)="filterChanged(dr2, 'UserStatus', userStatus.value)">
                                                                        <i class="fa-solid fa-user"
                                                                            [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                        </i>
                                                                        <div
                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                            {{userStatus.text}}
                                                                        </div>
                                                                        <div style="clear: both;"></div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                class="supervisor-menu-item" style="position:relative;"
                                                                (mouseover)="showSupervisorSubMenu(dr2, 'userTrainingStatus')"
                                                                (mouseleave)="hideSupervisorSubMenu(dr2, 'userTrainingStatus')">
                                                                <i class="fa-solid fa-fw fa-user-graduate"
                                                                    style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                <span style="float:left;">User Training Status</span>
                                                                <i class="fa-light fa-angle-right"
                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                <div style="clear:both;"></div>
                                                                <div *ngIf="supervisorMenuHash[dr2].userTrainingStatus"
                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                    (mouseleave)="supervisorMenuHash[dr2].userStatus = false">
                                                                    <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                        style="padding:5px;"
                                                                        class="supervisor-menu-item"
                                                                        (click)="filterChanged(dr2, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                        <i class="fa-solid fa-user"
                                                                            [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                        </i>
                                                                        <div
                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                            {{userTrainingStatus.text}}
                                                                        </div>
                                                                        <div style="clear: both;"></div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                class="supervisor-menu-item" style="position:relative;"
                                                                (mouseover)="showSupervisorSubMenu(dr2, 'jobTitle')"
                                                                (mouseleave)="hideSupervisorSubMenu(dr2, 'jobTitle')">
                                                                <i class="fa-solid fa-fw fa-briefcase"
                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                <span style="float:left;">Job Title</span>
                                                                <i class="fa-light fa-angle-right"
                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                <div style="clear:both;"></div>
                                                                <div *ngIf="supervisorMenuHash[dr2].jobTitle"
                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                    (mouseleave)="supervisorMenuHash[dr2].jobTitle = false">
                                                                    <div *ngFor="let jobTitle of listOfJobTitles"
                                                                        style="padding:5px;"
                                                                        class="supervisor-menu-item"
                                                                        (click)="filterChanged(dr2, 'JobTitle', jobTitle.value)">
                                                                        <div
                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                            {{jobTitle.text}}
                                                                        </div>
                                                                        <div style="clear: both;"></div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                class="supervisor-menu-item" style="position:relative;"
                                                                (mouseover)="showSupervisorSubMenu(dr2, 'userType')"
                                                                (mouseleave)="hideSupervisorSubMenu(dr2, 'userType')">
                                                                <i class="fa-solid fa-fw fa-user-cowboy"
                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                <span style="float:left;">User Type</span>
                                                                <i class="fa-light fa-angle-right"
                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                <div style="clear:both;"></div>
                                                                <div *ngIf="supervisorMenuHash[dr2].userType"
                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                    (mouseleave)="supervisorMenuHash[dr2].userType = false">
                                                                    <div *ngFor="let userType of listOfUserTypes"
                                                                        style="padding:5px;"
                                                                        class="supervisor-menu-item"
                                                                        (click)="filterChanged(dr2, 'UserType', userType.value)">
                                                                        <i class="fas"
                                                                            [ngClass]="userTypeIconHash[userType.value]"
                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                        </i>
                                                                        <div
                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                            {{userType.text}}
                                                                        </div>
                                                                        <div style="clear: both;"></div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                class="supervisor-menu-item" style="position:relative;"
                                                                (mouseover)="showSupervisorSubMenu(dr2, 'training')"
                                                                (mouseleave)="hideSupervisorSubMenu(dr2, 'training')">
                                                                <i class="fa-solid fa-fw fa-graduation-cap"
                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                <span style="float:left;">Training</span>
                                                                <i class="fa-light fa-angle-right"
                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                <div style="clear:both;"></div>
                                                                <div *ngIf="supervisorMenuHash[dr2].training"
                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                    (mouseleave)="supervisorMenuHash[dr2].training = false">
                                                                    <div *ngFor="let training of listOfTrainingTitles"
                                                                        style="padding:5px;"
                                                                        class="supervisor-menu-item"
                                                                        (click)="filterChanged(dr2, 'Training', training.value)">
                                                                        <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                            [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                            style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                        </i>
                                                                        <div
                                                                            style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                            {{training.text}}
                                                                        </div>
                                                                        <div style="clear:both;"></div>
                                                                    </div>
                                                                </div>
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                (click)="selectOrg(dr2)" class="supervisor-menu-item">
                                                                <i class="fa-solid fa-fw fa-users"
                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                Select Entire Suborganization
                                                            </li>
                                                            <li *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                                (click)="removeSelectionByUid(dr2)"
                                                                class="supervisor-menu-item">
                                                                <div>
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                        <i class="fa-solid fa-minus"
                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                    </div>
                                                                    Clear Selection
                                                                </div>
                                                            </li>
                                                        </ul>
                                                    </div>

                                                    <div (mouseenter)="setHoverData(dr2)"
                                                        (mouseleave)="setHoverData(null)"
                                                        (click)="showSupervisorMenu(dr2)"
                                                        [ngClass]="{'selected-node': userIdsSelected.includes(dr2) , 'hover-node': dr2 === currentHoverUid ||
                                                    orgChartNodeHash[dr2]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr2), 'non-supervisor-icon-node': myOrgUserHash[dr2]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr2]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr2]?.userType !== 'supervisor' && currentHoverUid === dr2}">
                                                        <!--
                                                        <div *ngIf="dr2 === currentHoverUid"
                                                            class="supervisor-menu-icon"
                                                            (click)="showSupervisorMenu(dr2)">
                                                            <i class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                        </div>
                                                        -->
                                                        <i [ngClass]="userTypeIconHash[myOrgUserHash[dr2]?.userType]"
                                                            [ngStyle]="{'color': getStatusColor(dr2)}"></i>
                                                        <span
                                                            *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor' || includeFullName"
                                                            [ngStyle]="{'font-size.px': textFontSize}"
                                                            style="display: block;color:#666666;">
                                                            {{orgChartNodeHash[dr2]?.fName}}<br>{{orgChartNodeHash[dr2]?.lName}}
                                                        </span>
                                                    </div>
                                                    <div *ngIf="myOrgUserHash[dr2]?.userType === 'supervisor' && !collapsedNodes.includes(dr2)"
                                                        class="org-chart-vert-connector-bottom">
                                                    </div>
                                                    <div *ngIf="!collapsedNodes.includes(dr2) && myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                        (click)="collapseNode(dr2, true)" nz-tooltip
                                                        nzTooltipTitle="Collapse Suborganization"
                                                        nzTooltipPlacement="right">
                                                        <i class="fa-light fa-minus-circle"
                                                            style="font-size:14px;cursor:pointer;"></i>
                                                    </div>
                                                    <div *ngIf="collapsedNodes.includes(dr2) && myOrgUserHash[dr2]?.userType === 'supervisor'"
                                                        (click)="collapseNode(dr2, false)" style="margin:0 8px;"
                                                        [ngClass]="{'option-selected': orgChartSelectionList.includes(dr2)}">
                                                        <i class="fa-regular fa-plus-circle" nz-tooltip
                                                            nzTooltipTitle="Expand Suborganization"
                                                            nzTooltipPlacement="right"
                                                            style="margin-top:4px;font-size:16px;color:red;cursor:pointer;">
                                                        </i>
                                                        <div (mouseenter)="setHoverData(dr2)"
                                                            (mouseleave)="setHoverData(null)" class="collapsed-block"
                                                            [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr2]?.extra.reportChain.includes(currentHoverUid) || dr2 === currentHoverUid}">
                                                            <div nz-tooltip nzTooltipTitle="Total Users"
                                                                nzTooltipPlacement="right"
                                                                style="display:flex;justify-content:space-between;">
                                                                <i class="fa-solid fa-users" style="font-size:18px;"></i>
                                                                <div
                                                                    style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                    {{nodeStatHash[dr2]?.userCnt}}
                                                                </div>
                                                            </div>
                                                            <div *ngIf="displayMode[dr2] === 'UserTrainingStatus'"
                                                                style="padding:5px;">
                                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                    </div>
                                                                    <div style="display:inline-block;padding-top:6px;">
                                                                        {{nodeStatHash[dr2]?.selectedCnt}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Users With No Trainings"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserTrainingStatus:none'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                    {{nodeStatHash[dr2]?.userTrainingStatusHash.none?.length}}
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Up To Date Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserTrainingStatus:upToDate'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                    {{nodeStatHash[dr2]?.userTrainingStatusHash.upToDate?.length}}
                                                                </div>
                                                                <div nz-tooltip
                                                                    nzTooltipTitle="Users With At Least One Training Past Due"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserTrainingStatus:pastDue'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                    {{nodeStatHash[dr2]?.userTrainingStatusHash.pastDue?.length}}
                                                                </div>
                                                            </div>
                                                            <div *ngIf="displayMode[dr2] === 'Training'"
                                                                style="padding:5px;">
                                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                    </div>
                                                                    <div style="display:inline-block;padding-top:6px;">
                                                                        {{nodeStatHash[dr2]?.selectedCnt}}
                                                                    </div>
                                                                </div>
                                                                <div class="collapsed-training-status-node">
                                                                    <div *ngFor="let training of assignableTrainings"
                                                                        nz-tooltip [nzTooltipTitle]="training.title"
                                                                        nzTooltipPlacement="right"
                                                                        class="training-status-row">
                                                                        <div class="training-status-icon">
                                                                            <i [ngClass]="training.iconClass"
                                                                                style="font-size:16px;"
                                                                                [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                        </div>
                                                                        <div class="training-status-rhs">
                                                                            <span class="training-status-values"
                                                                                style="color:#46bd15;">{{nodeStatHash[dr2]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                            <span class="training-status-values"
                                                                                style="color:red;">{{nodeStatHash[dr2]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                            <span class="training-status-values"
                                                                                style="color:#4891f7;">{{nodeStatHash[dr2]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                            <span class="training-status-values"
                                                                                style="color:#feb90b;">{{nodeStatHash[dr2]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="displayMode[dr2] === 'JobTitle'"
                                                                style="padding:5px;">
                                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                    </div>
                                                                    <div style="display:inline-block;padding-top:6px;">
                                                                        {{nodeStatHash[dr2]?.selectedCnt}}
                                                                    </div>
                                                                </div>
                                                                <div *ngFor="let jobTitle of jobTitles"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'JobTitle:' + jobTitle}"
                                                                    [ngClass]="{'selected-item': currentJobTitle === jobTitle}"
                                                                    style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                                    {{jobTitle}}
                                                                    <div style="margin-left:20px;font-size: 12px;">
                                                                        {{
                                                                        nodeStatHash[dr2]?.jobTitleHash[jobTitle]?.length
                                                                        }}
                                                                    </div>
                                                                </div>

                                                            </div>
                                                            <div *ngIf="displayMode[dr2] === 'UserType'"
                                                                style="padding:5px;">
                                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                    </div>
                                                                    <div style="display:inline-block;padding-top:6px;">
                                                                        {{nodeStatHash[dr2]?.selectedCnt}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Individual Contributors"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserType:individualContributor'}"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                    <i class="fa-solid fa-user"
                                                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                    <div style="justify-content: right;">
                                                                        {{nodeStatHash[dr2]?.userTypeHash.individualContributor?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Supervisors"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserType:supervisor'}"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                    <i class="fa-solid fa-user-tie"
                                                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;">
                                                                        {{nodeStatHash[dr2]?.userTypeHash.supervisor?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Volunteers"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserType:volunteer'}"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                    <i class="fa-solid fa-user-cowboy"
                                                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;">
                                                                        {{nodeStatHash[dr2]?.userTypeHash.volunteer?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Contractors"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserType:contractor'}"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                    <i class="fa-solid fa-user-hard-hat"
                                                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;">
                                                                        {{nodeStatHash[dr2]?.userTypeHash.contractor?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Customers"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserType:customer'}"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                    <i class="fa-solid fa-user-alien"
                                                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;">
                                                                        {{nodeStatHash[dr2]?.userTypeHash.customer?.length}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="displayMode[dr2] === 'UserStatus'"
                                                                style="padding:5px;">
                                                                <div nz-tooltip nzTooltipTitle="Selected Users"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                    <div class="selected-node"
                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                    </div>
                                                                    <div style="display:inline-block;padding-top:6px;">
                                                                        {{nodeStatHash[dr2]?.selectedCnt}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Active"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserStatus:active'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;color:black;">
                                                                        {{nodeStatHash[dr2]?.userStatusHash.active?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Inactive"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserStatus:inactive'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;color:black;">
                                                                        {{nodeStatHash[dr2]?.userStatusHash.inactive?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Not Invited"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserStatus:notInvited'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;color:black;">
                                                                        {{nodeStatHash[dr2]?.userStatusHash.notInvited?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Pending"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserStatus:pending'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;color:black;">
                                                                        {{nodeStatHash[dr2]?.userStatusHash.pending?.length}}
                                                                    </div>
                                                                </div>
                                                                <div nz-tooltip nzTooltipTitle="Error"
                                                                    nzTooltipPlacement="right"
                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                    [ngClass]="{'option-selected': currentFilterHash[dr2] === 'UserStatus:error'}">
                                                                    <i class="fa-solid fa-user"
                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                    <div style="justify-content: right;color:black;">
                                                                        {{nodeStatHash[dr2]?.userStatusHash.error?.length}}
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                                <div *ngIf="!collapsedNodes.includes(dr2)" style="display:block;">
                                                    <div *ngFor="let dr3 of myOrgUserHash[dr2]?.directReports; let dr3Index = index"
                                                        style="vertical-align: top;position:relative;display:inline-block;"
                                                        [ngClass]="{'inline-block': orgChartDirectionHash[dr2] === 'inline-block', 'block': orgChartDirectionHash[dr2] === 'block'}">
                                                        <div *ngIf="orgChartDirectionHash[dr2] === 'inline-block'"
                                                            style="position:relative;">
                                                            <div class="org-chart-vert-connector">
                                                            </div>
                                                            <div *ngIf="!isLast(myOrgUserHash[dr2]?.directReports, dr3Index)"
                                                                class="org-chart-horizontal-connector-right">
                                                            </div>
                                                            <div *ngIf="dr3Index !== 0"
                                                                class="org-chart-horizontal-connector-left">
                                                            </div>
                                                        </div>
                                                        <div style="text-align: center;" id="{{dr3}}-container"
                                                            [ngClass]="{'node-selected': orgChartSelectionList.includes(dr3)}">
                                                            <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                class="org-chart-node" id="{{dr3}}"
                                                                [ngClass]="{'supervisor-node': myOrgUserHash[dr3]?.userType === 'supervisor'}">
                                                                <div *ngIf="supervisorMenuHash[dr3]?.main"
                                                                    class="supervisor-menu"
                                                                    [ngStyle]="{'left': getMenuXPlacement(dr3), 'top': getMenuYPlacement(dr3)}">
                                                                    <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                                        (click)="hideSupervisorMenu(dr3)">
                                                                        <i class="fa-light fa-times"
                                                                            style="font-size:20px;color:red;"></i>
                                                                    </div>
                                                                    <div
                                                                        style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                                        <div
                                                                            style="font-weight:300;font-size:18px;color:blue;">
                                                                            {{orgChartNodeHash[dr3]?.fName}}
                                                                            {{orgChartNodeHash[dr3]?.lName}}
                                                                        </div>
                                                                    </div>
                                                                    <ul class="no-bullets">
                                                                        <li (click)="assignTrainingToUser(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-plus"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Assign Training
                                                                        </li>
                                                                        <li (click)="manageCurrentTrainings(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-file-certificate"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Manage Current Trainings
                                                                        </li>
                                                                        <li (click)="editUser(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-user-edit"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Edit User Data
                                                                        </li>
                                                                        <li (click)="showMsgModal(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-envelope"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Email User
                                                                        </li>
                                                                        <li (click)="addToWatchList('user', [dr3], dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-watch"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Add To Watch List
                                                                        </li>
                                                                        <!--
                                                                        <li *ngIf="!userIdsSelected.includes(dr3)"
                                                                            (click)="addToSelectedUsers(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <div>
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                    <i class="fa-solid fa-plus"
                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                </div>
                                                                                Add to Selected Users
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="userIdsSelected.includes(dr3)"
                                                                            (click)="removeFromSelectedUsers(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <div>
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                    <i class="fa-solid fa-minus"
                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                </div>
                                                                                Unselect this User
                                                                            </div>
                                                                        </li>
                                                                        -->
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            (click)="collapseAllSubOrgs(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-angle-double-up"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Collapse All Suborganizations
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            (click)="expandAllSubOrgs(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-angle-double-down"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Expand All Suborganizations
                                                                        </li>
                                                                        <li
                                                                            *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'">
                                                                            <div
                                                                                style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                                Select Users in this suborganization by
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            class="supervisor-menu-item"
                                                                            style="position:relative;"
                                                                            (mouseover)="showSupervisorSubMenu(dr3, 'userStatus')"
                                                                            (mouseleave)="hideSupervisorSubMenu(dr3, 'userStatus')">
                                                                            <i class="fa-solid fa-fw fa-user-check"
                                                                                style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                            <span style="float:left;">User Status</span>
                                                                            <i class="fa-light fa-angle-right"
                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                            <div style="clear:both;"></div>
                                                                            <div *ngIf="supervisorMenuHash[dr3].userStatus"
                                                                                (mouseleave)="supervisorMenuHash[dr3].userStatus = false"
                                                                                class="supervisor-sub-menu">
                                                                                <div *ngFor="let userStatus of listOfUserStatus"
                                                                                    class="supervisor-menu-item"
                                                                                    (click)="filterChanged(dr3, 'UserStatus', userStatus.value)">
                                                                                    <i class="fa-solid fa-user"
                                                                                        [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                    </i>
                                                                                    <div
                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                        {{userStatus.text}}
                                                                                    </div>
                                                                                    <div style="clear: both;"></div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            class="supervisor-menu-item"
                                                                            style="position:relative;"
                                                                            (mouseover)="showSupervisorSubMenu(dr3, 'userTrainingStatus')"
                                                                            (mouseleave)="hideSupervisorSubMenu(dr3, 'userTrainingStatus')">
                                                                            <i class="fa-solid fa-fw fa-user-graduate"
                                                                                style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                            <span style="float:left;">User Training
                                                                                Status</span>
                                                                            <i class="fa-light fa-angle-right"
                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                            <div style="clear:both;"></div>
                                                                            <div *ngIf="supervisorMenuHash[dr3].userTrainingStatus"
                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                (mouseleave)="supervisorMenuHash[dr3].userStatus = false">
                                                                                <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                                    style="padding:5px;"
                                                                                    class="supervisor-menu-item"
                                                                                    (click)="filterChanged(dr3, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                                    <i class="fa-solid fa-user"
                                                                                        [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                    </i>
                                                                                    <div
                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                        {{userTrainingStatus.text}}
                                                                                    </div>
                                                                                    <div style="clear: both;"></div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            class="supervisor-menu-item"
                                                                            style="position:relative;"
                                                                            (mouseover)="showSupervisorSubMenu(dr3, 'jobTitle')"
                                                                            (mouseleave)="hideSupervisorSubMenu(dr3, 'jobTitle')">
                                                                            <i class="fa-solid fa-fw fa-briefcase"
                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                            <span style="float:left;">Job Title</span>
                                                                            <i class="fa-light fa-angle-right"
                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                            <div style="clear:both;"></div>
                                                                            <div *ngIf="supervisorMenuHash[dr3].jobTitle"
                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                (mouseleave)="supervisorMenuHash[dr3].jobTitle = false">
                                                                                <div *ngFor="let jobTitle of listOfJobTitles"
                                                                                    style="padding:5px;"
                                                                                    class="supervisor-menu-item"
                                                                                    (click)="filterChanged(dr3, 'JobTitle', jobTitle.value)">
                                                                                    <div
                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                        {{jobTitle.text}}
                                                                                    </div>
                                                                                    <div style="clear: both;"></div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            class="supervisor-menu-item"
                                                                            style="position:relative;"
                                                                            (mouseover)="showSupervisorSubMenu(dr3, 'userType')"
                                                                            (mouseleave)="hideSupervisorSubMenu(dr3, 'userType')">
                                                                            <i class="fa-solid fa-fw fa-user-cowboy"
                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                            <span style="float:left;">User Type</span>
                                                                            <i class="fa-light fa-angle-right"
                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                            <div style="clear:both;"></div>
                                                                            <div *ngIf="supervisorMenuHash[dr3]?.userType"
                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                (mouseleave)="supervisorMenuHash[dr3].userType = false">
                                                                                <div *ngFor="let userType of listOfUserTypes"
                                                                                    style="padding:5px;"
                                                                                    class="supervisor-menu-item"
                                                                                    (click)="filterChanged(dr3, 'UserType', userType.value)">
                                                                                    <i class="fas"
                                                                                        [ngClass]="userTypeIconHash[userType.value]"
                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                                    </i>
                                                                                    <div
                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                        {{userType.text}}
                                                                                    </div>
                                                                                    <div style="clear: both;"></div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            class="supervisor-menu-item"
                                                                            style="position:relative;"
                                                                            (mouseover)="showSupervisorSubMenu(dr3, 'training')"
                                                                            (mouseleave)="hideSupervisorSubMenu(dr3, 'training')">
                                                                            <i class="fa-solid fa-fw fa-graduation-cap"
                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                            <span style="float:left;">Training</span>
                                                                            <i class="fa-light fa-angle-right"
                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                            <div style="clear:both;"></div>
                                                                            <div *ngIf="supervisorMenuHash[dr3].training"
                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                (mouseleave)="supervisorMenuHash[dr3].training = false">
                                                                                <div *ngFor="let training of listOfTrainingTitles"
                                                                                    style="padding:5px;"
                                                                                    class="supervisor-menu-item"
                                                                                    (click)="filterChanged(dr3, 'Training', training.value)">
                                                                                    <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                                        [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                                        style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                                    </i>
                                                                                    <div
                                                                                        style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                                        {{training.text}}
                                                                                    </div>
                                                                                    <div style="clear:both;"></div>
                                                                                </div>
                                                                            </div>
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            (click)="selectOrg(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <i class="fa-solid fa-fw fa-users"
                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                            Select Entire Suborganization
                                                                        </li>
                                                                        <li *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                            (click)="removeSelectionByUid(dr3)"
                                                                            class="supervisor-menu-item">
                                                                            <div>
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                                    <i class="fa-solid fa-minus"
                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                </div>
                                                                                Clear Selection
                                                                            </div>
                                                                        </li>
                                                                    </ul>
                                                                </div>
                                                                <div (mouseenter)="setHoverData(dr3)"
                                                                    (mouseleave)="setHoverData(null)"
                                                                    (click)="showSupervisorMenu(dr3)"
                                                                    [ngClass]="{'selected-node': userIdsSelected.includes(dr3), 'hover-node': dr3 === currentHoverUid ||
                                                                orgChartNodeHash[dr3]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr3), 'non-supervisor-icon-node': myOrgUserHash[dr3]?.userType !== 'supervisor',
                                                                'supervisor-icon-node': myOrgUserHash[dr3]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr3]?.userType !== 'supervisor' && currentHoverUid === dr3}">
                                                                    <!--
                                                                    <div *ngIf="dr3 === currentHoverUid"
                                                                        class="supervisor-menu-icon"
                                                                        (click)="showSupervisorMenu(dr3)">
                                                                        <i class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                    </div>
                                                                    -->
                                                                    <i [ngClass]="userTypeIconHash[myOrgUserHash[dr3]?.userType]"
                                                                        [ngStyle]="{'color': getStatusColor(dr3)}"></i>
                                                                    <span
                                                                        *ngIf="myOrgUserHash[dr3].userType === 'supervisor' || includeFullName"
                                                                        style="display: block;color:#666666;"
                                                                        [ngStyle]="{'font-size.px': textFontSize}">
                                                                        {{orgChartNodeHash[dr3]?.fName}}<br>{{orgChartNodeHash[dr3]?.lName}}
                                                                    </span>
                                                                </div>
                                                                <div *ngIf="myOrgUserHash[dr3]?.userType === 'supervisor' && !collapsedNodes.includes(dr3)"
                                                                    class="org-chart-vert-connector-bottom">
                                                                </div>
                                                                <div *ngIf="!collapsedNodes.includes(dr3) && myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                    (click)="collapseNode(dr3, true)" nz-tooltip
                                                                    nzTooltipTitle="Collapse Suborganization"
                                                                    nzTooltipPlacement="right">
                                                                    <i class="fa-light fa-minus-circle"
                                                                        style="font-size:14px;cursor:pointer;"></i>
                                                                </div>
                                                                <div *ngIf="collapsedNodes.includes(dr3) && myOrgUserHash[dr3]?.userType === 'supervisor'"
                                                                    (click)="collapseNode(dr3, false)"
                                                                    style="margin:0 8px;"
                                                                    [ngClass]="{'option-selected': orgChartSelectionList.includes(dr3)}">
                                                                    <i class="fa-regular fa-plus-circle" nz-tooltip
                                                                        nzTooltipTitle="Expand Suborganization"
                                                                        nzTooltipPlacement="right"
                                                                        style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                    <div class="collapsed-block"
                                                                        (mouseenter)="setHoverData(dr3)"
                                                                        (mouseleave)="setHoverData(null)"
                                                                        [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr3]?.extra.reportChain.includes(currentHoverUid) || dr3 === currentHoverUid}">
                                                                        <div nz-tooltip nzTooltipTitle="Total Users"
                                                                            nzTooltipPlacement="right"
                                                                            style="display:flex;justify-content:space-between;">
                                                                            <i class="fa-solid fa-users"
                                                                                style="font-size:18px;"></i>
                                                                            <div
                                                                                style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                                {{nodeStatHash[dr3]?.userCnt}}
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="displayMode[dr3] === 'UserTrainingStatus'"
                                                                            style="padding:5px;">
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Selected Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                </div>
                                                                                <div
                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                    {{nodeStatHash[dr3]?.selectedCnt}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Users With No Trainings"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserTrainingStatus:none'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                {{nodeStatHash[dr3]?.userTrainingStatusHash.none?.length}}
                                                                            </div>
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Up To Date Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserTrainingStatus:upToDate'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                {{nodeStatHash[dr3]?.userTrainingStatusHash.upToDate?.length}}
                                                                            </div>
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserTrainingStatus:pastDue'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                {{nodeStatHash[dr3]?.userTrainingStatusHash.pastDue?.length}}
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="displayMode[dr3] === 'Training'"
                                                                            style="padding:5px;">
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Selected Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                </div>
                                                                                <div
                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                    {{nodeStatHash[dr3]?.selectedCnt}}
                                                                                </div>
                                                                            </div>
                                                                            <div class="collapsed-training-status-node">
                                                                                <div *ngFor="let training of assignableTrainings"
                                                                                    nz-tooltip
                                                                                    [nzTooltipTitle]="training.title"
                                                                                    nzTooltipPlacement="right"
                                                                                    class="training-status-row">
                                                                                    <div class="training-status-icon">
                                                                                        <i [ngClass]="training.iconClass"
                                                                                            style="font-size:16px;"
                                                                                            [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                                    </div>
                                                                                    <div class="training-status-rhs">
                                                                                        <span
                                                                                            class="training-status-values"
                                                                                            style="color:#46bd15;">{{nodeStatHash[dr3]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                                        <span
                                                                                            class="training-status-values"
                                                                                            style="color:red;">{{nodeStatHash[dr3]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                                        <span
                                                                                            class="training-status-values"
                                                                                            style="color:#4891f7;">{{nodeStatHash[dr3]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                                        <span
                                                                                            class="training-status-values"
                                                                                            style="color:#feb90b;">{{nodeStatHash[dr3]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="displayMode[dr3] === 'JobTitle'"
                                                                            style="padding:5px;">
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Selected Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                </div>
                                                                                <div
                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                    {{nodeStatHash[dr3]?.selectedCnt}}
                                                                                </div>
                                                                            </div>
                                                                            <div *ngFor="let jobTitle of jobTitles"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'JobTitle:' + jobTitle}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                                                {{jobTitle}}
                                                                                <div
                                                                                    style="margin-left:20px;font-size: 12px;">
                                                                                    {{nodeStatHash[dr3]?.jobTitleHash[jobTitle]?.length}}
                                                                                </div>
                                                                            </div>

                                                                        </div>
                                                                        <div *ngIf="displayMode[dr3] === 'UserType'"
                                                                            style="padding:5px;">
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Selected Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                </div>
                                                                                <div
                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                    {{nodeStatHash[dr3]?.selectedCnt}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Individual Contributors"
                                                                                nzTooltipPlacement="right"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserType:individualContributor'}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                <i class="fa-solid fa-user"
                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                    style="font-size:16px;padding-top:2px;"></i>

                                                                                <div style="justify-content: right;">
                                                                                    {{nodeStatHash[dr3]?.userTypeHash.individualContributor?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Supervisors"
                                                                                nzTooltipPlacement="right"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserType:supervisor'}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                <i class="fa-solid fa-user-tie"
                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                    style="font-size:16px;padding-top:2px;"></i>
                                                                                <div style="justify-content: right;">
                                                                                    {{nodeStatHash[dr3]?.userTypeHash.supervisor?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Volunteers"
                                                                                nzTooltipPlacement="right"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserType:volunteer'}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                <i class="fa-solid fa-user-cowboy"
                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                    style="font-size:16px;padding-top:2px;"></i>
                                                                                <div style="justify-content: right;">
                                                                                    {{nodeStatHash[dr3]?.userTypeHash.volunteer?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Contractors"
                                                                                nzTooltipPlacement="right"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserType:contractor'}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                <i class="fa-solid fa-user-hard-hat"
                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                    style="font-size:16px;padding-top:2px;"></i>
                                                                                <div style="justify-content: right;">
                                                                                    {{nodeStatHash[dr3]?.userTypeHash.contractor?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Customers"
                                                                                nzTooltipPlacement="right"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserType:customer'}"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                <i class="fa-solid fa-user-alien"
                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                    style="font-size:16px;padding-top:2px;"></i>
                                                                                <div style="justify-content: right;">
                                                                                    {{nodeStatHash[dr3]?.userTypeHash.customer?.length}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="displayMode[dr3] === 'UserStatus'"
                                                                            style="padding:5px;">
                                                                            <div nz-tooltip
                                                                                nzTooltipTitle="Selected Users"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                <div class="selected-node"
                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                </div>
                                                                                <div
                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                    {{nodeStatHash[dr3]?.selectedCnt}}
                                                                                </div>
                                                                            </div>
                                                                            <!--
                                                                        <div
                                                                            style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                            User Status</div>
                                                                            -->
                                                                            <div nz-tooltip nzTooltipTitle="Active"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserStatus:active'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                <div
                                                                                    style="justify-content: right;color:black;">
                                                                                    {{nodeStatHash[dr3]?.userStatusHash.active?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Inactive"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserStatus:inactive'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                <div
                                                                                    style="justify-content: right;color:black;">
                                                                                    {{nodeStatHash[dr3]?.userStatusHash.inactive?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Not Invited"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserStatus:notInvited'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                                <div
                                                                                    style="justify-content: right;color:black;">
                                                                                    {{nodeStatHash[dr3]?.userStatusHash.notInvited?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Pending"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserStatus:pending'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:orange;font-size:16px;padding-top:2px;"></i>
                                                                                <div
                                                                                    style="justify-content: right;color:black;">
                                                                                    {{nodeStatHash[dr3]?.userStatusHash.pending?.length}}
                                                                                </div>
                                                                            </div>
                                                                            <div nz-tooltip nzTooltipTitle="Error"
                                                                                nzTooltipPlacement="right"
                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                [ngClass]="{'option-selected': currentFilterHash[dr3] === 'UserStatus:error'}">
                                                                                <i class="fa-solid fa-user"
                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                <div
                                                                                    style="justify-content: right;color:black;">
                                                                                    {{nodeStatHash[dr3]?.userStatusHash.error?.length}}
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                            <div *ngIf="!collapsedNodes.includes(dr3)"
                                                                style="display:block;">
                                                                <div *ngFor="let dr4 of myOrgUserHash[dr3]?.directReports; let dr4Index = index"
                                                                    style="vertical-align: top;position:relative;"
                                                                    [ngClass]="{'inline-block': orgChartDirectionHash[dr3] === 'inline-block', 'block': orgChartDirectionHash[dr3] === 'block'}">
                                                                    <div *ngIf="orgChartDirectionHash[dr3] === 'inline-block'"
                                                                        style="position:relative;">
                                                                        <div class="org-chart-vert-connector">
                                                                        </div>
                                                                        <div *ngIf="!isLast(myOrgUserHash[dr3]?.directReports, dr4Index)"
                                                                            class="org-chart-horizontal-connector-right">
                                                                        </div>
                                                                        <div *ngIf="dr4Index !== 0"
                                                                            class="org-chart-horizontal-connector-left">
                                                                        </div>
                                                                    </div>
                                                                    <div style="text-align: center;"
                                                                        id="{{dr4}}-container"
                                                                        [ngClass]="{'node-selected': orgChartSelectionList.includes(dr4)}">
                                                                        <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                            class="org-chart-node" id="{{dr4}}"
                                                                            [ngClass]="{'supervisor-node': myOrgUserHash[dr4]?.userType === 'supervisor'}">
                                                                            <div *ngIf="supervisorMenuHash[dr4]?.main"
                                                                                class="supervisor-menu"
                                                                                [ngStyle]="{'left': getMenuXPlacement(dr4), 'top': getMenuYPlacement(dr4)}">
                                                                                <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                                                    (click)="hideSupervisorMenu(dr4)">
                                                                                    <i class="fa-light fa-times"
                                                                                        style="font-size:20px;color:red;"></i>
                                                                                </div>
                                                                                <div
                                                                                    style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                                                    <div
                                                                                        style="font-weight:300;font-size:18px;color:blue;">
                                                                                        {{orgChartNodeHash[dr4]?.fName}}
                                                                                        {{orgChartNodeHash[dr4]?.lName}}
                                                                                    </div>
                                                                                </div>
                                                                                <ul class="no-bullets">
                                                                                    <li (click)="assignTrainingToUser(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-plus"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Assign Training
                                                                                    </li>
                                                                                    <li (click)="manageCurrentTrainings(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-file-certificate"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Manage Current Trainings
                                                                                    </li>
                                                                                    <li (click)="editUser(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-user-edit"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Edit User Data
                                                                                    </li>
                                                                                    <li (click)="showMsgModal(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-envelope"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Email User
                                                                                    </li>
                                                                                    <li (click)="addToWatchList('user', [dr4], dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-watch"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Add To Watch List
                                                                                    </li>
                                                                                    <!--
                                                                                    <li *ngIf="!userIdsSelected.includes(dr4)"
                                                                                        (click)="addToSelectedUsers(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <div>
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                <i class="fa-solid fa-plus"
                                                                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                            </div>
                                                                                            Add to Selected Users
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="userIdsSelected.includes(dr4)"
                                                                                        (click)="removeFromSelectedUsers(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <div>
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                <i class="fa-solid fa-minus"
                                                                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                            </div>
                                                                                            Unselect this User
                                                                                        </div>
                                                                                    </li>
                                                                                -->
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        (click)="collapseAllSubOrgs(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-angle-double-up"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Collapse All Suborganizations
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        (click)="expandAllSubOrgs(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-angle-double-down"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Expand All Suborganizations
                                                                                    </li>
                                                                                    <li
                                                                                        *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'">
                                                                                        <div
                                                                                            style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                                            Select Users in this
                                                                                            suborganization by
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        class="supervisor-menu-item"
                                                                                        style="position:relative;"
                                                                                        (mouseover)="showSupervisorSubMenu(dr4, 'userStatus')"
                                                                                        (mouseleave)="hideSupervisorSubMenu(dr4, 'userStatus')">
                                                                                        <i class="fa-solid fa-fw fa-user-check"
                                                                                            style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                        <span style="float:left;">User
                                                                                            Status</span>
                                                                                        <i class="fa-light fa-angle-right"
                                                                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                        <div style="clear:both;"></div>
                                                                                        <div *ngIf="supervisorMenuHash[dr4].userStatus"
                                                                                            (mouseleave)="supervisorMenuHash[dr4].userStatus = false"
                                                                                            class="supervisor-sub-menu">
                                                                                            <div *ngFor="let userStatus of listOfUserStatus"
                                                                                                class="supervisor-menu-item"
                                                                                                (click)="filterChanged(dr4, 'UserStatus', userStatus.value)">
                                                                                                <i class="fa-solid fa-user"
                                                                                                    [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                </i>
                                                                                                <div
                                                                                                    style="font-size:12px;float:left;overflow: hidden;">
                                                                                                    {{userStatus.text}}
                                                                                                </div>
                                                                                                <div
                                                                                                    style="clear: both;">
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        class="supervisor-menu-item"
                                                                                        style="position:relative;"
                                                                                        (mouseover)="showSupervisorSubMenu(dr4, 'userTrainingStatus')"
                                                                                        (mouseleave)="hideSupervisorSubMenu(dr4, 'userTrainingStatus')">
                                                                                        <i class="fa-solid fa-fw fa-user-graduate"
                                                                                            style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                        <span style="float:left;">User
                                                                                            Training Status</span>
                                                                                        <i class="fa-light fa-angle-right"
                                                                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                        <div style="clear:both;"></div>
                                                                                        <div *ngIf="supervisorMenuHash[dr4].userTrainingStatus"
                                                                                            style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                            (mouseleave)="supervisorMenuHash[dr4].userStatus = false">
                                                                                            <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                                                style="padding:5px;"
                                                                                                class="supervisor-menu-item"
                                                                                                (click)="filterChanged(dr4, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                                                <i class="fa-solid fa-user"
                                                                                                    [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                </i>
                                                                                                <div
                                                                                                    style="font-size:12px;float:left;overflow: hidden;">
                                                                                                    {{userTrainingStatus.text}}
                                                                                                </div>
                                                                                                <div
                                                                                                    style="clear: both;">
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        class="supervisor-menu-item"
                                                                                        style="position:relative;"
                                                                                        (mouseover)="showSupervisorSubMenu(dr4, 'jobTitle')"
                                                                                        (mouseleave)="hideSupervisorSubMenu(dr4, 'jobTitle')">
                                                                                        <i class="fa-solid fa-fw fa-briefcase"
                                                                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                        <span style="float:left;">Job
                                                                                            Title</span>
                                                                                        <i class="fa-light fa-angle-right"
                                                                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                        <div style="clear:both;"></div>
                                                                                        <div *ngIf="supervisorMenuHash[dr4].jobTitle"
                                                                                            style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                            (mouseleave)="supervisorMenuHash[dr4].jobTitle = false">
                                                                                            <div *ngFor="let jobTitle of listOfJobTitles"
                                                                                                style="padding:5px;"
                                                                                                class="supervisor-menu-item"
                                                                                                (click)="filterChanged(dr4, 'JobTitle', jobTitle.value)">
                                                                                                <div
                                                                                                    style="font-size:12px;float:left;overflow: hidden;">
                                                                                                    {{jobTitle.text}}
                                                                                                </div>
                                                                                                <div
                                                                                                    style="clear: both;">
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        class="supervisor-menu-item"
                                                                                        style="position:relative;"
                                                                                        (mouseover)="showSupervisorSubMenu(dr4, 'userType')"
                                                                                        (mouseleave)="hideSupervisorSubMenu(dr4, 'userType')">
                                                                                        <i class="fa-solid fa-fw fa-user-cowboy"
                                                                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                        <span style="float:left;">User
                                                                                            Type</span>
                                                                                        <i class="fa-light fa-angle-right"
                                                                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                        <div style="clear:both;"></div>
                                                                                        <div *ngIf="supervisorMenuHash[dr4].userType"
                                                                                            style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                            (mouseleave)="supervisorMenuHash[dr4].userType = false">
                                                                                            <div *ngFor="let userType of listOfUserTypes"
                                                                                                style="padding:5px;"
                                                                                                class="supervisor-menu-item"
                                                                                                (click)="filterChanged(dr4, 'UserType', userType.value)">
                                                                                                <i class="fas"
                                                                                                    [ngClass]="userTypeIconHash[userType.value]"
                                                                                                    style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                                                </i>
                                                                                                <div
                                                                                                    style="font-size:12px;float:left;overflow: hidden;">
                                                                                                    {{userType.text}}
                                                                                                </div>
                                                                                                <div
                                                                                                    style="clear: both;">
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        class="supervisor-menu-item"
                                                                                        style="position:relative;"
                                                                                        (mouseover)="showSupervisorSubMenu(dr4, 'training')"
                                                                                        (mouseleave)="hideSupervisorSubMenu(dr4, 'training')">
                                                                                        <i class="fa-solid fa-fw fa-graduation-cap"
                                                                                            style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                        <span
                                                                                            style="float:left;">Training</span>
                                                                                        <i class="fa-light fa-angle-right"
                                                                                            style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                        <div style="clear:both;"></div>
                                                                                        <div *ngIf="supervisorMenuHash[dr4].training"
                                                                                            style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                            (mouseleave)="supervisorMenuHash[dr4].training = false">
                                                                                            <div *ngFor="let training of listOfTrainingTitles"
                                                                                                style="padding:5px;"
                                                                                                class="supervisor-menu-item"
                                                                                                (click)="filterChanged(dr4, 'Training', training.value)">
                                                                                                <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                                                    [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                                                    style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                                                </i>
                                                                                                <div
                                                                                                    style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                                                    {{training.text}}
                                                                                                </div>
                                                                                                <div
                                                                                                    style="clear:both;">
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        (click)="selectOrg(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <i class="fa-solid fa-fw fa-users"
                                                                                            style="font-size:14px;margin-right:10px;"></i>
                                                                                        Select Entire Suborganization
                                                                                    </li>
                                                                                    <li *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                        (click)="removeSelectionByUid(dr4)"
                                                                                        class="supervisor-menu-item">
                                                                                        <div>
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                                                <i class="fa-solid fa-minus"
                                                                                                    style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                            </div>
                                                                                            Clear Selection
                                                                                        </div>
                                                                                    </li>
                                                                                </ul>
                                                                            </div>
                                                                            <div (mouseenter)="setHoverData(dr4)"
                                                                                (mouseleave)="setHoverData(null)"
                                                                                (click)="showSupervisorMenu(dr4)"
                                                                                [ngClass]="{'selected-node': userIdsSelected.includes(dr4), 'hover-node': dr4 === currentHoverUid ||
                                                                            orgChartNodeHash[dr4]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr4), 'non-supervisor-icon-node': myOrgUserHash[dr4]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr4]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr4]?.userType !== 'supervisor' && currentHoverUid === dr4}">
                                                                                <!--
                                                                                <div *ngIf="dr4 === currentHoverUid"
                                                                                    class="supervisor-menu-icon"
                                                                                    (click)="showSupervisorMenu(dr4)">
                                                                                    <i
                                                                                        class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                                </div>
                                                                                -->
                                                                                <i [ngClass]="userTypeIconHash[myOrgUserHash[dr4]?.userType]"
                                                                                    [ngStyle]="{'color': getStatusColor(dr4)}"></i>
                                                                                <span
                                                                                    *ngIf="myOrgUserHash[dr4].userType === 'supervisor' || includeFullName"
                                                                                    style="display: block;color:#666666;"
                                                                                    [ngStyle]="{'font-size.px': textFontSize}">
                                                                                    {{orgChartNodeHash[dr4]?.fName}}<br>{{orgChartNodeHash[dr4]?.lName}}
                                                                                </span>
                                                                            </div>
                                                                            <div *ngIf="myOrgUserHash[dr4]?.userType === 'supervisor' && !collapsedNodes.includes(dr4)"
                                                                                class="org-chart-vert-connector-bottom">
                                                                            </div>
                                                                            <div *ngIf="!collapsedNodes.includes(dr4) && myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                (click)="collapseNode(dr4, true)"
                                                                                nz-tooltip
                                                                                nzTooltipTitle="Collapse Suborganization"
                                                                                nzTooltipPlacement="right">
                                                                                <i class="fa-light fa-minus-circle"
                                                                                    style="font-size:14px;cursor:pointer;"></i>
                                                                            </div>
                                                                            <div *ngIf="collapsedNodes.includes(dr4) && myOrgUserHash[dr4]?.userType === 'supervisor'"
                                                                                (click)="collapseNode(dr4, false)"
                                                                                style="margin:0 8px;">
                                                                                <i class="fa-regular fa-plus-circle" nz-tooltip
                                                                                    nzTooltipTitle="Expand Suborganization"
                                                                                    nzTooltipPlacement="right"
                                                                                    style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                <div (mouseenter)="setHoverData(dr4)"
                                                                                    (mouseleave)="setHoverData(null)"
                                                                                    class="collapsed-block"
                                                                                    [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr4]?.extra.reportChain.includes(currentHoverUid) || dr4 === currentHoverUid}">
                                                                                    <div nz-tooltip
                                                                                        nzTooltipTitle="Total Users"
                                                                                        nzTooltipPlacement="right"
                                                                                        style="display:flex;justify-content:space-between;">
                                                                                        <i class="fa-solid fa-users"
                                                                                            style="font-size:18px;"></i>
                                                                                        <div
                                                                                            style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                                            {{nodeStatHash[dr4]?.userCnt}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="displayMode[dr4] === 'UserTrainingStatus'"
                                                                                        style="padding:5px;">
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Selected Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                            </div>
                                                                                            <div
                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Users With No Trainings"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserTrainingStatus:none'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                            {{nodeStatHash[dr4]?.userTrainingStatusHash.none?.length}}
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Up To Date Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserTrainingStatus:upToDate'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                            {{nodeStatHash[dr4]?.userTrainingStatusHash.upToDate?.length}}
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserTrainingStatus:pastDue'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                            {{nodeStatHash[dr4]?.userTrainingStatusHash.pastDue?.length}}
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="displayMode[dr4] === 'Training'"
                                                                                        style="padding:5px;">
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Selected Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                            </div>
                                                                                            <div
                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div
                                                                                            class="collapsed-training-status-node">
                                                                                            <div *ngFor="let training of assignableTrainings"
                                                                                                nz-tooltip
                                                                                                [nzTooltipTitle]="training.title"
                                                                                                nzTooltipPlacement="right"
                                                                                                class="training-status-row">
                                                                                                <div
                                                                                                    class="training-status-icon">
                                                                                                    <i [ngClass]="training.iconClass"
                                                                                                        style="font-size:16px;"
                                                                                                        [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                                                </div>
                                                                                                <div class="training-status-rhs">
                                                                                                    <span
                                                                                                        class="training-status-values"
                                                                                                        style="color:#46bd15;">{{nodeStatHash[dr4]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                                                    <span
                                                                                                        class="training-status-values"
                                                                                                        style="color:red;">{{nodeStatHash[dr4]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                                                    <span
                                                                                                        class="training-status-values"
                                                                                                        style="color:#4891f7;">{{nodeStatHash[dr4]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                                                    <span
                                                                                                        class="training-status-values"
                                                                                                        style="color:#feb90b;">{{nodeStatHash[dr4]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="displayMode[dr4] === 'JobTitle'"
                                                                                        style="padding:5px;">
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Selected Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                            </div>
                                                                                            <div
                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div *ngFor="let jobTitle of jobTitles"
                                                                                            [ngClass]="{'selected-item': currentJobTitle === jobTitle}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'JobTitle:' + jobTitle}">
                                                                                            {{jobTitle}}
                                                                                            <div
                                                                                                style="margin-left:20px;font-size: 12px;">
                                                                                                {{
                                                                                                nodeStatHash[dr4]?.jobTitleHash[jobTitle]?.length
                                                                                                }}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="displayMode[dr4] === 'UserType'"
                                                                                        style="padding:5px;">
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Selected Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                            </div>
                                                                                            <div
                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Individual Contributors"
                                                                                            nzTooltipPlacement="right"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserType:individualContributor'}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                            <i class="fa-solid fa-user"
                                                                                                [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                            <div
                                                                                                style="justify-content: right;">
                                                                                                {{nodeStatHash[dr4]?.userTypeHash.individualContributor?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Supervisors"
                                                                                            nzTooltipPlacement="right"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserType:supervisor'}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                            <i class="fa-solid fa-user-tie"
                                                                                                [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;">
                                                                                                {{nodeStatHash[dr4]?.userTypeHash.supervisor?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Volunteers"
                                                                                            nzTooltipPlacement="right"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserType:volunteer'}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                            <i class="fa-solid fa-user-cowboy"
                                                                                                [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;">
                                                                                                {{nodeStatHash[dr4]?.userTypeHash.volunteer?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Contractors"
                                                                                            nzTooltipPlacement="right"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserType:contractor'}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                            <i class="fa-solid fa-user-hard-hat"
                                                                                                [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;">
                                                                                                {{nodeStatHash[dr4]?.userTypeHash.contractor?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Customers"
                                                                                            nzTooltipPlacement="right"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserType:customer'}"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                            <i class="fa-solid fa-user-alien"
                                                                                                [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;">
                                                                                                {{nodeStatHash[dr4]?.userTypeHash.customer?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="displayMode[dr4] === 'UserStatus'"
                                                                                        style="padding:5px;">
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Selected Users"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                            <div class="selected-node"
                                                                                                style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                            </div>
                                                                                            <div
                                                                                                style="display:inline-block;padding-top:6px;">
                                                                                                {{nodeStatHash[dr4]?.selectedCnt}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <!--
                                                                                    <div
                                                                                        style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                        User Status</div>
                                                                                        -->
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Active"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserStatus:active'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;color:black;">
                                                                                                {{nodeStatHash[dr4]?.userStatusHash.active?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Inactive"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserStatus:inactive'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;color:black;">
                                                                                                {{nodeStatHash[dr4]?.userStatusHash.inactive?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Not Invited"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserStatus:notInvited'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;color:black;">
                                                                                                {{nodeStatHash[dr4]?.userStatusHash.notInvited?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Pending"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserStatus:pending'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:orange;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;color:black;">
                                                                                                {{nodeStatHash[dr4]?.userStatusHash.pending?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                        <div nz-tooltip
                                                                                            nzTooltipTitle="Error"
                                                                                            nzTooltipPlacement="right"
                                                                                            style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                            [ngClass]="{'option-selected': currentFilterHash[dr4] === 'UserStatus:error'}">
                                                                                            <i class="fa-solid fa-user"
                                                                                                style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                            <div
                                                                                                style="justify-content: right;color:black;">
                                                                                                {{nodeStatHash[dr4]?.userStatusHash.error?.length}}
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                        <div *ngIf="!collapsedNodes.includes(dr4)"
                                                                            style="display:block;">
                                                                            <div *ngFor="let dr5 of myOrgUserHash[dr4]?.directReports; let dr5Index = index"
                                                                                style="vertical-align: top;position:relative;"
                                                                                [ngClass]="{'inline-block': orgChartDirectionHash[dr4] === 'inline-block', 'block': orgChartDirectionHash[dr4] === 'block'}">
                                                                                <div *ngIf="orgChartDirectionHash[dr4] === 'inline-block'"
                                                                                    style="position:relative;">
                                                                                    <div
                                                                                        class="org-chart-vert-connector">
                                                                                    </div>
                                                                                    <div *ngIf="!isLast(myOrgUserHash[dr4]?.directReports, dr5Index)"
                                                                                        class="org-chart-horizontal-connector-right">
                                                                                    </div>
                                                                                    <div *ngIf="dr5Index !== 0"
                                                                                        class="org-chart-horizontal-connector-left">
                                                                                    </div>
                                                                                </div>

                                                                                <div style="text-align: center;"
                                                                                    id="{{dr5}}-container"
                                                                                    [ngClass]="{'node-selected': orgChartSelectionList.includes(dr5)}">
                                                                                    <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                        class="org-chart-node"
                                                                                        [ngClass]="{'supervisor-node': myOrgUserHash[dr5]?.userType === 'supervisor'}">
                                                                                        <div *ngIf="supervisorMenuHash[dr5]?.main"
                                                                                            class="supervisor-menu"
                                                                                            [ngStyle]="{'left': getMenuXPlacement(dr5), 'top': getMenuYPlacement(dr5)}">
                                                                                            <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                                                                (click)="hideSupervisorMenu(dr5)">
                                                                                                <i class="fa-light fa-times"
                                                                                                    style="font-size:20px;color:red;"></i>
                                                                                            </div>
                                                                                            <div
                                                                                                style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                                                                <div
                                                                                                    style="font-weight:300;font-size:18px;color:blue;">
                                                                                                    {{orgChartNodeHash[dr5]?.fName}}
                                                                                                    {{orgChartNodeHash[dr5]?.lName}}
                                                                                                </div>
                                                                                            </div>
                                                                                            <ul class="no-bullets">
                                                                                                <li (click)="assignTrainingToUser(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-plus"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Assign Training
                                                                                                </li>
                                                                                                <li (click)="manageCurrentTrainings(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-file-certificate"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Manage Current
                                                                                                    Trainings
                                                                                                </li>
                                                                                                <li (click)="editUser(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-user-edit"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Edit User Data
                                                                                                </li>
                                                                                                <li (click)="showMsgModal(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-envelope"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Email User
                                                                                                </li>
                                                                                                <li (click)="addToWatchList('user', [dr5], dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-watch"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Add To Watch List
                                                                                                </li>
                                                                                                <!--
                                                                                                <li *ngIf="!userIdsSelected.includes(dr5)"
                                                                                                    (click)="addToSelectedUsers(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <div>
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                            <i class="fa-solid fa-plus"
                                                                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                        </div>
                                                                                                        Add to Selected
                                                                                                        Users
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="userIdsSelected.includes(dr5)"
                                                                                                    (click)="removeFromSelectedUsers(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <div>
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                            <i class="fa-solid fa-minus"
                                                                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                        </div>
                                                                                                        Unselect this
                                                                                                        User
                                                                                                    </div>
                                                                                                </li>
                                                                                                -->
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    (click)="collapseAllSubOrgs(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-angle-double-up"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Collapse All
                                                                                                    Suborganizations
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    (click)="expandAllSubOrgs(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-angle-double-down"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Expand All
                                                                                                    Suborganizations
                                                                                                </li>
                                                                                                <li
                                                                                                    *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'">
                                                                                                    <div
                                                                                                        style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                                                        Select Users in
                                                                                                        this
                                                                                                        suborganization
                                                                                                        by
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    class="supervisor-menu-item"
                                                                                                    style="position:relative;"
                                                                                                    (mouseover)="showSupervisorSubMenu(dr5, 'userStatus')"
                                                                                                    (mouseleave)="hideSupervisorSubMenu(dr5, 'userStatus')">
                                                                                                    <i class="fa-solid fa-fw fa-user-check"
                                                                                                        style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                    <span
                                                                                                        style="float:left;">User
                                                                                                        Status</span>
                                                                                                    <i class="fa-light fa-angle-right"
                                                                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                    <div
                                                                                                        style="clear:both;">
                                                                                                    </div>
                                                                                                    <div *ngIf="supervisorMenuHash[dr5].userStatus"
                                                                                                        (mouseleave)="supervisorMenuHash[dr5].userStatus = false"
                                                                                                        class="supervisor-sub-menu">
                                                                                                        <div *ngFor="let userStatus of listOfUserStatus"
                                                                                                            class="supervisor-menu-item"
                                                                                                            (click)="filterChanged(dr5, 'UserStatus', userStatus.value)">
                                                                                                            <i class="fa-solid fa-user"
                                                                                                                [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                            </i>
                                                                                                            <div
                                                                                                                style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                {{userStatus.text}}
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="clear: both;">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    class="supervisor-menu-item"
                                                                                                    style="position:relative;"
                                                                                                    (mouseover)="showSupervisorSubMenu(dr5, 'userTrainingStatus')"
                                                                                                    (mouseleave)="hideSupervisorSubMenu(dr5, 'userTrainingStatus')">
                                                                                                    <i class="fa-solid fa-fw fa-user-graduate"
                                                                                                        style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                    <span
                                                                                                        style="float:left;">User
                                                                                                        Training
                                                                                                        Status</span>
                                                                                                    <i class="fa-light fa-angle-right"
                                                                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                    <div
                                                                                                        style="clear:both;">
                                                                                                    </div>
                                                                                                    <div *ngIf="supervisorMenuHash[dr5].userTrainingStatus"
                                                                                                        style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                        (mouseleave)="supervisorMenuHash[dr5].userStatus = false">
                                                                                                        <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                                                            style="padding:5px;"
                                                                                                            class="supervisor-menu-item"
                                                                                                            (click)="filterChanged(dr5, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                                                            <i class="fa-solid fa-user"
                                                                                                                [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                            </i>
                                                                                                            <div
                                                                                                                style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                {{userTrainingStatus.text}}
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="clear: both;">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    class="supervisor-menu-item"
                                                                                                    style="position:relative;"
                                                                                                    (mouseover)="showSupervisorSubMenu(dr5, 'jobTitle')"
                                                                                                    (mouseleave)="hideSupervisorSubMenu(dr5, 'jobTitle')">
                                                                                                    <i class="fa-solid fa-fw fa-briefcase"
                                                                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                    <span
                                                                                                        style="float:left;">Job
                                                                                                        Title</span>
                                                                                                    <i class="fa-light fa-angle-right"
                                                                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                    <div
                                                                                                        style="clear:both;">
                                                                                                    </div>
                                                                                                    <div *ngIf="supervisorMenuHash[dr5].jobTitle"
                                                                                                        style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                        (mouseleave)="supervisorMenuHash[dr5].jobTitle = false">
                                                                                                        <div *ngFor="let jobTitle of listOfJobTitles"
                                                                                                            style="padding:5px;"
                                                                                                            class="supervisor-menu-item"
                                                                                                            (click)="filterChanged(dr5, 'JobTitle', jobTitle.value)">
                                                                                                            <div
                                                                                                                style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                {{jobTitle.text}}
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="clear: both;">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    class="supervisor-menu-item"
                                                                                                    style="position:relative;"
                                                                                                    (mouseover)="showSupervisorSubMenu(dr5, 'userType')"
                                                                                                    (mouseleave)="hideSupervisorSubMenu(dr5, 'userType')">
                                                                                                    <i class="fa-solid fa-fw fa-user-cowboy"
                                                                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                    <span
                                                                                                        style="float:left;">User
                                                                                                        Type</span>
                                                                                                    <i class="fa-light fa-angle-right"
                                                                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                    <div
                                                                                                        style="clear:both;">
                                                                                                    </div>
                                                                                                    <div *ngIf="supervisorMenuHash[dr5].userType"
                                                                                                        style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                        (mouseleave)="supervisorMenuHash[dr5].userType = false">
                                                                                                        <div *ngFor="let userType of listOfUserTypes"
                                                                                                            style="padding:5px;"
                                                                                                            class="supervisor-menu-item"
                                                                                                            (click)="filterChanged(dr5, 'UserType', userType.value)">
                                                                                                            <i class="fas"
                                                                                                                [ngClass]="userTypeIconHash[userType.value]"
                                                                                                                style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                                                            </i>
                                                                                                            <div
                                                                                                                style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                {{userType.text}}
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="clear: both;">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    class="supervisor-menu-item"
                                                                                                    style="position:relative;"
                                                                                                    (mouseover)="showSupervisorSubMenu(dr5, 'training')"
                                                                                                    (mouseleave)="hideSupervisorSubMenu(dr5, 'training')">
                                                                                                    <i class="fa-solid fa-fw fa-graduation-cap"
                                                                                                        style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                    <span
                                                                                                        style="float:left;">Training</span>
                                                                                                    <i class="fa-light fa-angle-right"
                                                                                                        style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                    <div
                                                                                                        style="clear:both;">
                                                                                                    </div>
                                                                                                    <div *ngIf="supervisorMenuHash[dr5].training"
                                                                                                        style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                        (mouseleave)="supervisorMenuHash[dr5].training = false">
                                                                                                        <div *ngFor="let training of listOfTrainingTitles"
                                                                                                            style="padding:5px;"
                                                                                                            class="supervisor-menu-item"
                                                                                                            (click)="filterChanged(dr5, 'Training', training.value)">
                                                                                                            <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                                                                [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                                                                style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                                                            </i>
                                                                                                            <div
                                                                                                                style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                                                                {{training.text}}
                                                                                                            </div>
                                                                                                            <div
                                                                                                                style="clear:both;">
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    (click)="selectOrg(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <i class="fa-solid fa-fw fa-users"
                                                                                                        style="font-size:14px;margin-right:10px;"></i>
                                                                                                    Select Entire
                                                                                                    Suborganization
                                                                                                </li>
                                                                                                <li *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                                    (click)="removeSelectionByUid(dr5)"
                                                                                                    class="supervisor-menu-item">
                                                                                                    <div>
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                                                            <i class="fa-solid fa-minus"
                                                                                                                style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                        </div>
                                                                                                        Clear Selection
                                                                                                    </div>
                                                                                                </li>
                                                                                            </ul>
                                                                                        </div>
                                                                                        <div (mouseenter)="setHoverData(dr5)"
                                                                                            id="{{dr5}}"
                                                                                            (mouseleave)="setHoverData(null)"
                                                                                            (click)="showSupervisorMenu(dr5)"
                                                                                            [ngClass]="{'selected-node': userIdsSelected.includes(dr5), 'hover-node': dr5 === currentHoverUid ||
                                                                                        orgChartNodeHash[dr5]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr5), 'non-supervisor-icon-node': myOrgUserHash[dr5]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr5]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr5]?.userType !== 'supervisor' && currentHoverUid === dr5}">
                                                                                            <!--
                                                                                            <div *ngIf="dr5 === currentHoverUid"
                                                                                                class="supervisor-menu-icon"
                                                                                                (click)="showSupervisorMenu(dr5)">
                                                                                                <i
                                                                                                    class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                                            </div>
                                                                                            -->
                                                                                            <i [ngClass]="userTypeIconHash[myOrgUserHash[dr5].userType]"
                                                                                                [ngStyle]="{'color': getStatusColor(dr5)}"></i>
                                                                                            <span
                                                                                                *ngIf="myOrgUserHash[dr5].userType === 'supervisor' || includeFullName"
                                                                                                style="display: block;color:#666666;"
                                                                                                [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                {{orgChartNodeHash[dr5]?.fName}}<br>{{orgChartNodeHash[dr5]?.lName}}
                                                                                            </span>
                                                                                        </div>
                                                                                        <div *ngIf="myOrgUserHash[dr5]?.userType === 'supervisor' && !collapsedNodes.includes(dr5)"
                                                                                            class="org-chart-vert-connector-bottom">
                                                                                        </div>
                                                                                        <div *ngIf="!collapsedNodes.includes(dr5) && myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                            (click)="collapseNode(dr5, true)">
                                                                                            <i class="fa-light fa-minus-circle"
                                                                                                style="font-size:14px;cursor:pointer;"></i>
                                                                                        </div>
                                                                                        <div *ngIf="collapsedNodes.includes(dr5) && myOrgUserHash[dr5]?.userType === 'supervisor'"
                                                                                            (click)="collapseNode(dr5, false)"
                                                                                            style="margin:0 8px;">
                                                                                            <i class="fa-regular fa-plus-circle"
                                                                                                nz-tooltip
                                                                                                nzTooltipTitle="Expand Suborganization"
                                                                                                nzTooltipPlacement="right"
                                                                                                style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                            <div class="collapsed-block"
                                                                                                (mouseenter)="setHoverData(dr5)"
                                                                                                (mouseleave)="setHoverData(null)"
                                                                                                [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr5]?.extra.reportChain.includes(currentHoverUid) || dr5 === currentHoverUid}">
                                                                                                <div nz-tooltip
                                                                                                    nzTooltipTitle="Total Users"
                                                                                                    nzTooltipPlacement="right"
                                                                                                    style="display:flex;justify-content:space-between;">
                                                                                                    <i class="fa-solid fa-users"
                                                                                                        style="font-size:18px;"></i>
                                                                                                    <div
                                                                                                        style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                                                        {{nodeStatHash[dr5]?.userCnt}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="displayMode[dr5] === 'UserTrainingStatus'"
                                                                                                    style="padding:5px;">
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Selected Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                                            {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Users With No Trainings"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserTrainingStatus:none'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                        {{nodeStatHash[dr5]?.userTrainingStatusHash.none?.length}}
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Up To Date Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserTrainingStatus:upToDate'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                        {{nodeStatHash[dr5]?.userTrainingStatusHash.upToDate?.length}}
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserTrainingStatus:pastDue'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                        {{nodeStatHash[dr5]?.userTrainingStatusHash.pastDue?.length}}
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="displayMode[dr5] === 'Training'"
                                                                                                    style="padding:5px;">
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Selected Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                                            {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div
                                                                                                        class="collapsed-training-status-node">
                                                                                                        <div *ngFor="let training of assignableTrainings"
                                                                                                            nz-tooltip
                                                                                                            [nzTooltipTitle]="training.title"
                                                                                                            nzTooltipPlacement="right"
                                                                                                            class="training-status-row">
                                                                                                            <div
                                                                                                                class="training-status-icon">
                                                                                                                <i [ngClass]="training.iconClass"
                                                                                                                    style="font-size:16px;"
                                                                                                                    [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                                                            </div>
                                                                                                            <div class="training-status-rhs">
                                                                                                                <span
                                                                                                                    class="training-status-values"
                                                                                                                    style="color:#46bd15;">{{nodeStatHash[dr5]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                                                                <span
                                                                                                                    class="training-status-values"
                                                                                                                    style="color:red;">{{nodeStatHash[dr5]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                                                                <span
                                                                                                                    class="training-status-values"
                                                                                                                    style="color:#4891f7;">{{nodeStatHash[dr5]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                                                                <span
                                                                                                                    class="training-status-values"
                                                                                                                    style="color:#feb90b;">{{nodeStatHash[dr5]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="displayMode[dr5] === 'JobTitle'"
                                                                                                    style="padding:5px;">
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Selected Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                                            {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div *ngFor="let jobTitle of jobTitles"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'JobTitle:' + jobTitle}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                                                                        {{jobTitle}}
                                                                                                        <div
                                                                                                            style="margin-left:20px;font-size: 12px;">
                                                                                                            {{
                                                                                                            nodeStatHash[dr5]?.jobTitleHash[jobTitle]?.length
                                                                                                            }}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="displayMode[dr5] === 'UserType'"
                                                                                                    style="padding:5px;">
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Selected Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                                            {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Individual Contributors"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserType:individualContributor'}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                        <div
                                                                                                            style="justify-content: right;">
                                                                                                            {{nodeStatHash[dr5]?.userTypeHash.individualContributor?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Supervisors"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserType:supervisor'}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                        <i class="fa-solid fa-user-tie"
                                                                                                            [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;">
                                                                                                            {{nodeStatHash[dr5]?.userTypeHash.supervisor?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Volunteers"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        [[ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserType:volunteer'}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                        <i class="fa-solid fa-user-cowboy"
                                                                                                            [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;">
                                                                                                            {{nodeStatHash[dr5]?.userTypeHash.volunteer?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Contractors"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserType:contractor'}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                        <i class="fa-solid fa-user-hard-hat"
                                                                                                            [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;">
                                                                                                            {{nodeStatHash[dr5]?.userTypeHash.contractor?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Customers"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserType:customer'}"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                        <i class="fa-solid fa-user-alien"
                                                                                                            [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                            style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;">
                                                                                                            {{nodeStatHash[dr5]?.userTypeHash.customer?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="displayMode[dr5] === 'UserStatus'"
                                                                                                    style="padding:5px;">
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Selected Users"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                        <div class="selected-node"
                                                                                                            style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display:inline-block;padding-top:6px;">
                                                                                                            {{nodeStatHash[dr5]?.selectedCnt}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Active"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserStatus:active'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;color:black;">
                                                                                                            {{nodeStatHash[dr5]?.userStatusHash.active?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Inactive"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserStatus:inactive'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;color:black;">
                                                                                                            {{nodeStatHash[dr5]?.userStatusHash.inactive?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Not Invited"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserStatus:notInvited'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;color:black;">
                                                                                                            {{nodeStatHash[dr5]?.userStatusHash.notInvited?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Pending"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserStatus:pending'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:orange;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;color:black;">
                                                                                                            {{nodeStatHash[dr5]?.userStatusHash.pending?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                    <div nz-tooltip
                                                                                                        nzTooltipTitle="Error"
                                                                                                        nzTooltipPlacement="right"
                                                                                                        style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                        [ngClass]="{'option-selected': currentFilterHash[dr5] === 'UserStatus:error'}">
                                                                                                        <i class="fa-solid fa-user"
                                                                                                            style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                        <div
                                                                                                            style="justify-content: right;color:black;">
                                                                                                            {{nodeStatHash[dr5]?.userStatusHash.error?.length}}
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                    <div *ngIf="!collapsedNodes.includes(dr5)"
                                                                                        style="display: block;text-align: center;">
                                                                                        <div *ngFor="let dr6 of myOrgUserHash[dr5]?.directReports; let dr6Index = index"
                                                                                            style="vertical-align: top;display: inline-block;"
                                                                                            [ngClass]="{'inline-block': orgChartDirectionHash[dr5] === 'inline-block', 'block': orgChartDirectionHash[dr5] === 'block'}">
                                                                                            <div *ngIf="orgChartDirectionHash[dr5] === 'inline-block'"
                                                                                                style="position:relative;">
                                                                                                <div
                                                                                                    class="org-chart-vert-connector">
                                                                                                </div>
                                                                                                <div *ngIf="!isLast(myOrgUserHash[dr5]?.directReports, dr6Index)"
                                                                                                    class="org-chart-horizontal-connector-right">
                                                                                                </div>
                                                                                                <div *ngIf="dr6Index !== 0"
                                                                                                    class="org-chart-horizontal-connector-left">
                                                                                                </div>
                                                                                            </div>
                                                                                            <div style="text-align: center;"
                                                                                                id="{{dr6}}-container"
                                                                                                [ngClass]="{'node-selected': orgChartSelectionList.includes(dr6)}">
                                                                                                <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                    class="org-chart-node"
                                                                                                    [ngClass]="{'supervisor-node': myOrgUserHash[dr6]?.userType === 'supervisor'}">
                                                                                                    <div *ngIf="supervisorMenuHash[dr6]?.main"
                                                                                                        class="supervisor-menu"
                                                                                                        [ngStyle]="{'left': getMenuXPlacement(dr6), 'top': getMenuYPlacement(dr6)}">
                                                                                                        <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                                                                            (click)="hideSupervisorMenu(dr6)">
                                                                                                            <i class="fa-light fa-times"
                                                                                                                style="font-size:20px;color:red;"></i>
                                                                                                        </div>
                                                                                                        <div
                                                                                                            style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                                                                            <div
                                                                                                                style="font-weight:300;font-size:18px;color:blue;">
                                                                                                                {{orgChartNodeHash[dr6]?.fName}}
                                                                                                                {{orgChartNodeHash[dr6]?.lName}}
                                                                                                            </div>
                                                                                                        </div>
                                                                                                        <ul
                                                                                                            class="no-bullets">
                                                                                                            <li (click)="assignTrainingToUser(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-plus"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Assign
                                                                                                                Training
                                                                                                            </li>
                                                                                                            <li (click)="manageCurrentTrainings(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-file-certificate"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Manage
                                                                                                                Current
                                                                                                                Trainings
                                                                                                            </li>
                                                                                                            <li (click)="editUser(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-user-edit"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Edit
                                                                                                                User
                                                                                                                Data
                                                                                                            </li>
                                                                                                            <li (click)="showMsgModal(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-envelope"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Email
                                                                                                                User
                                                                                                            </li>
                                                                                                            <li (click)="addToWatchList('user', [dr6], dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-watch"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Add To
                                                                                                                Watch
                                                                                                                List
                                                                                                            </li>
                                                                                                            <!--
                                                                                                            <li *ngIf="!userIdsSelected.includes(dr6)"
                                                                                                                (click)="addToSelectedUsers(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <div>
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                                        <i class="fa-solid fa-plus"
                                                                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                    </div>
                                                                                                                    Add
                                                                                                                    to
                                                                                                                    Selected
                                                                                                                    Users
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="userIdsSelected.includes(dr6)"
                                                                                                                (click)="removeFromSelectedUsers(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <div>
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                                        <i class="fa-solid fa-minus"
                                                                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                    </div>
                                                                                                                    Unselect
                                                                                                                    this
                                                                                                                    User
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            -->
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                (click)="collapseAllSubOrgs(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-angle-double-up"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Collapse
                                                                                                                All
                                                                                                                Suborganizations
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                (click)="expandAllSubOrgs(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-angle-double-down"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Expand
                                                                                                                All
                                                                                                                Suborganizations
                                                                                                            </li>
                                                                                                            <li
                                                                                                                *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'">
                                                                                                                <div
                                                                                                                    style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                                                                    Select
                                                                                                                    Users
                                                                                                                    in
                                                                                                                    this
                                                                                                                    suborganization
                                                                                                                    by
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                class="supervisor-menu-item"
                                                                                                                style="position:relative;"
                                                                                                                (mouseover)="showSupervisorSubMenu(dr6, 'userStatus')"
                                                                                                                (mouseleave)="hideSupervisorSubMenu(dr6, 'userStatus')">
                                                                                                                <i class="fa-solid fa-fw fa-user-check"
                                                                                                                    style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                                <span
                                                                                                                    style="float:left;">User
                                                                                                                    Status</span>
                                                                                                                <i class="fa-light fa-angle-right"
                                                                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                <div
                                                                                                                    style="clear:both;">
                                                                                                                </div>
                                                                                                                <div *ngIf="supervisorMenuHash[dr6].userStatus"
                                                                                                                    (mouseleave)="supervisorMenuHash[dr6].userStatus = false"
                                                                                                                    class="supervisor-sub-menu">
                                                                                                                    <div *ngFor="let userStatus of listOfUserStatus"
                                                                                                                        class="supervisor-menu-item"
                                                                                                                        (click)="filterChanged(dr6, 'UserStatus', userStatus.value)">
                                                                                                                        <i class="fa-solid fa-user"
                                                                                                                            [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                                        </i>
                                                                                                                        <div
                                                                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                            {{userStatus.text}}
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="clear: both;">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                class="supervisor-menu-item"
                                                                                                                style="position:relative;"
                                                                                                                (mouseover)="showSupervisorSubMenu(dr6, 'userTrainingStatus')"
                                                                                                                (mouseleave)="hideSupervisorSubMenu(dr6, 'userTrainingStatus')">
                                                                                                                <i class="fa-solid fa-fw fa-user-graduate"
                                                                                                                    style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                                <span
                                                                                                                    style="float:left;">User
                                                                                                                    Training
                                                                                                                    Status</span>
                                                                                                                <i class="fa-light fa-angle-right"
                                                                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                <div
                                                                                                                    style="clear:both;">
                                                                                                                </div>
                                                                                                                <div *ngIf="supervisorMenuHash[dr6].userTrainingStatus"
                                                                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                    (mouseleave)="supervisorMenuHash[dr6].userStatus = false">
                                                                                                                    <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                                                                        style="padding:5px;"
                                                                                                                        class="supervisor-menu-item"
                                                                                                                        (click)="filterChanged(dr6, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                                                                        <i class="fa-solid fa-user"
                                                                                                                            [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                                        </i>
                                                                                                                        <div
                                                                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                            {{userTrainingStatus.text}}
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="clear: both;">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                class="supervisor-menu-item"
                                                                                                                style="position:relative;"
                                                                                                                (mouseover)="showSupervisorSubMenu(dr6, 'jobTitle')"
                                                                                                                (mouseleave)="hideSupervisorSubMenu(dr6, 'jobTitle')">
                                                                                                                <i class="fa-solid fa-fw fa-briefcase"
                                                                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                <span
                                                                                                                    style="float:left;">Job
                                                                                                                    Title</span>
                                                                                                                <i class="fa-light fa-angle-right"
                                                                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                <div
                                                                                                                    style="clear:both;">
                                                                                                                </div>
                                                                                                                <div *ngIf="supervisorMenuHash[dr6].jobTitle"
                                                                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                    (mouseleave)="supervisorMenuHash[dr6].jobTitle = false">
                                                                                                                    <div *ngFor="let jobTitle of listOfJobTitles"
                                                                                                                        style="padding:5px;"
                                                                                                                        class="supervisor-menu-item"
                                                                                                                        (click)="filterChanged(dr6, 'JobTitle', jobTitle.value)">
                                                                                                                        <div
                                                                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                            {{jobTitle.text}}
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="clear: both;">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                class="supervisor-menu-item"
                                                                                                                style="position:relative;"
                                                                                                                (mouseover)="showSupervisorSubMenu(dr6, 'userType')"
                                                                                                                (mouseleave)="hideSupervisorSubMenu(dr6, 'userType')">
                                                                                                                <i class="fa-solid fa-fw fa-user-cowboy"
                                                                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                <span
                                                                                                                    style="float:left;">User
                                                                                                                    Type</span>
                                                                                                                <i class="fa-light fa-angle-right"
                                                                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                <div
                                                                                                                    style="clear:both;">
                                                                                                                </div>
                                                                                                                <div *ngIf="supervisorMenuHash[dr6].userType"
                                                                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                    (mouseleave)="supervisorMenuHash[dr6].userType = false">
                                                                                                                    <div *ngFor="let userType of listOfUserTypes"
                                                                                                                        style="padding:5px;"
                                                                                                                        class="supervisor-menu-item"
                                                                                                                        (click)="filterChanged(dr6, 'UserType', userType.value)">
                                                                                                                        <i class="fas"
                                                                                                                            [ngClass]="userTypeIconHash[userType.value]"
                                                                                                                            style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                                                                        </i>
                                                                                                                        <div
                                                                                                                            style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                            {{userType.text}}
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="clear: both;">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                class="supervisor-menu-item"
                                                                                                                style="position:relative;"
                                                                                                                (mouseover)="showSupervisorSubMenu(dr6, 'training')"
                                                                                                                (mouseleave)="hideSupervisorSubMenu(dr6, 'training')">
                                                                                                                <i class="fa-solid fa-fw fa-graduation-cap"
                                                                                                                    style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                <span
                                                                                                                    style="float:left;">Training</span>
                                                                                                                <i class="fa-light fa-angle-right"
                                                                                                                    style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                <div
                                                                                                                    style="clear:both;">
                                                                                                                </div>
                                                                                                                <div *ngIf="supervisorMenuHash[dr6].training"
                                                                                                                    style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                    (mouseleave)="supervisorMenuHash[dr6].training = false">
                                                                                                                    <div *ngFor="let training of listOfTrainingTitles"
                                                                                                                        style="padding:5px;"
                                                                                                                        class="supervisor-menu-item"
                                                                                                                        (click)="filterChanged(dr6, 'Training', training.value)">
                                                                                                                        <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                                                                            [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                                                                            style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                                                                        </i>
                                                                                                                        <div
                                                                                                                            style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                                                                            {{training.text}}
                                                                                                                        </div>
                                                                                                                        <div
                                                                                                                            style="clear:both;">
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                (click)="selectOrg(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <i class="fa-solid fa-fw fa-users"
                                                                                                                    style="font-size:14px;margin-right:10px;"></i>
                                                                                                                Select
                                                                                                                Entire
                                                                                                                Suborganization
                                                                                                            </li>
                                                                                                            <li *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                                (click)="removeSelectionByUid(dr6)"
                                                                                                                class="supervisor-menu-item">
                                                                                                                <div>
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                                                                        <i class="fa-solid fa-minus"
                                                                                                                            style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                    </div>
                                                                                                                    Clear
                                                                                                                    Selection
                                                                                                                </div>
                                                                                                            </li>
                                                                                                        </ul>
                                                                                                    </div>
                                                                                                    <div id="{{dr6}}"
                                                                                                        (mouseenter)="setHoverData(dr6)"
                                                                                                        (mouseleave)="setHoverData(null)"
                                                                                                        (click)="showSupervisorMenu(dr6)"
                                                                                                        [ngClass]="{'selected-node': userIdsSelected.includes(dr6), 'hover-node': dr6 === currentHoverUid ||
                                                                                                    orgChartNodeHash[dr6]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr6), 'non-supervisor-icon-node': myOrgUserHash[dr6]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr6]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr6]?.userType !== 'supervisor' && currentHoverUid === dr6}">
                                                                                                        <!--
                                                                                                        <div *ngIf="dr6 === currentHoverUid"
                                                                                                            class="supervisor-menu-icon"
                                                                                                            (click)="showSupervisorMenu(dr6)">
                                                                                                            <i
                                                                                                                class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                                                        </div>
                                                                                                        -->
                                                                                                        <i [ngClass]="userTypeIconHash[myOrgUserHash[dr6]?.userType]"
                                                                                                            [ngStyle]="{'color': getStatusColor(dr6)}"></i>

                                                                                                        <span
                                                                                                            *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor' || includeFullName"
                                                                                                            style="display: block;color:#666666;"
                                                                                                            [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                            {{orgChartNodeHash[dr6]?.fName}}<br>{{orgChartNodeHash[dr6]?.lName}}
                                                                                                        </span>
                                                                                                    </div>
                                                                                                    <div *ngIf="myOrgUserHash[dr6]?.userType === 'supervisor' && !collapsedNodes.includes(dr6)"
                                                                                                        class="org-chart-vert-connector-bottom">
                                                                                                    </div>
                                                                                                    <div *ngIf="!collapsedNodes.includes(dr6) && myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                        (click)="collapseNode(dr6, true)"
                                                                                                        nz-tooltip
                                                                                                        nzTooltipTitle="Collapse Suborganization"
                                                                                                        nzTooltipPlacement="right">
                                                                                                        <i class="fa-light fa-minus-circle"
                                                                                                            style="font-size:14px;cursor:pointer;"></i>
                                                                                                    </div>
                                                                                                    <div *ngIf="collapsedNodes.includes(dr6) && myOrgUserHash[dr6]?.userType === 'supervisor'"
                                                                                                        (click)="collapseNode(dr6, false)"
                                                                                                        style="margin:0 8px;"
                                                                                                        [id]="dr6">
                                                                                                        <i class="fa-regular fa-plus-circle"
                                                                                                            nz-tooltip
                                                                                                            nzTooltipTitle="Expand Suborganization"
                                                                                                            nzTooltipPlacement="right"
                                                                                                            style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                                        <div class="collapsed-block"
                                                                                                            (mouseenter)="setHoverData(dr6)"
                                                                                                            (mouseleave)="setHoverData(null)"
                                                                                                            [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr6]?.extra.reportChain.includes(currentHoverUid) || dr6 === currentHoverUid}">
                                                                                                            <div nz-tooltip
                                                                                                                nzTooltipTitle="Total Users"
                                                                                                                nzTooltipPlacement="right"
                                                                                                                style="display:flex;justify-content:space-between;">
                                                                                                                <i class="fa-solid fa-users"
                                                                                                                    style="font-size:18px;"></i>
                                                                                                                <div
                                                                                                                    style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                                                                    {{nodeStatHash[dr6]?.userCnt}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="displayMode[dr6] === 'UserTrainingStatus'"
                                                                                                                style="padding:5px;">
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                                        {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Users With No Trainings"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserTrainingStatus:none'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                    {{nodeStatHash[dr6]?.userTrainingStatusHash.none?.length}}
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Up To Date Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserTrainingStatus:upToDate'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                    {{nodeStatHash[dr6]?.userTrainingStatusHash.upToDate?.length}}
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserTrainingStatus:pastDue'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                    {{nodeStatHash[dr6]?.userTrainingStatusHash.pastDue?.length}}
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="displayMode[dr6] === 'Training'"
                                                                                                                style="padding:5px;">
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                                        {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    class="collapsed-training-status-node">
                                                                                                                    <div *ngFor="let training of assignableTrainings"
                                                                                                                        nz-tooltip
                                                                                                                        [nzTooltipTitle]="training.title"
                                                                                                                        nzTooltipPlacement="right"
                                                                                                                        class="training-status-row">
                                                                                                                        <div
                                                                                                                            class="training-status-icon">
                                                                                                                            <i [ngClass]="training.iconClass"
                                                                                                                                style="font-size:16px;"
                                                                                                                                [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                                                                        </div>
                                                                                                                        <div class="training-status-rhs">
                                                                                                                            <span
                                                                                                                                class="training-status-values"
                                                                                                                                style="color:#46bd15;">{{nodeStatHash[dr6]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                                                                            <span
                                                                                                                                class="training-status-values"
                                                                                                                                style="color:red;">{{nodeStatHash[dr6]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                                                                            <span
                                                                                                                                class="training-status-values"
                                                                                                                                style="color:#4891f7;">{{nodeStatHash[dr6]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                                                                            <span
                                                                                                                                class="training-status-values"
                                                                                                                                style="color:#feb90b;">{{nodeStatHash[dr6]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                                                                        </div>
                                                                                                                    </div>

                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="displayMode[dr6] === 'JobTitle'"
                                                                                                                style="padding:5px;">
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                                        {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div *ngFor="let jobTitle of jobTitles"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'JobTitle:' + jobTitle}"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                                                                                    {{jobTitle}}
                                                                                                                    <div
                                                                                                                        style="margin-left:20px;font-size:12px;">
                                                                                                                        {{
                                                                                                                        nodeStatHash[dr6]?.jobTitleHash[jobTitle]?.length
                                                                                                                        }}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="displayMode[dr6] === 'UserType'"
                                                                                                                style="padding:5px;">
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                                        {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Individual Contributors"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserType:individualContributor'}">
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                                    <div
                                                                                                                        style="justify-content: right;">
                                                                                                                        {{nodeStatHash[dr6]?.userTypeHash.individualContributor?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Supervisors"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserType:supervisor'}"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                    <i class="fa-solid fa-user-tie"
                                                                                                                        [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;">
                                                                                                                        {{nodeStatHash[dr6]?.userTypeHash.supervisor?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Volunteers"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserType:volunteer'}"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                    <i class="fa-solid fa-user-cowboy"
                                                                                                                        [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;">
                                                                                                                        {{nodeStatHash[dr6]?.userTypeHash.volunteer?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Contractors"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserType:contractor'}"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                    <i class="fa-solid fa-user-hard-hat"
                                                                                                                        [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;">
                                                                                                                        {{nodeStatHash[dr6]?.userTypeHash.contractor?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Customers"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserType:customer'}"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                    <i class="fa-solid fa-user-alien"
                                                                                                                        [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                        style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;">
                                                                                                                        {{nodeStatHash[dr6]?.userTypeHash.customer?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="displayMode[dr6] === 'UserStatus'"
                                                                                                                style="padding:5px;">
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Selected Users"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                    <div class="selected-node"
                                                                                                                        style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display:inline-block;padding-top:6px;">
                                                                                                                        {{nodeStatHash[dr6]?.selectedCnt}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div
                                                                                                                    style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                                                    User
                                                                                                                    Status
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Active"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserStatus:active'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;color:black;">
                                                                                                                        {{nodeStatHash[dr6]?.userStatusHash.active?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Inactive"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserStatus:inactive'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;color:black;">
                                                                                                                        {{nodeStatHash[dr6]?.userStatusHash.inactive?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Not Invited"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserStatus:notInvited'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;color:black;">
                                                                                                                        {{nodeStatHash[dr6]?.userStatusHash.notInvited?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Pending"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserStatus:pending'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:orange;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;color:black;">
                                                                                                                        {{nodeStatHash[dr6]?.userStatusHash.pending?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                                <div nz-tooltip
                                                                                                                    nzTooltipTitle="Error"
                                                                                                                    nzTooltipPlacement="right"
                                                                                                                    style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                    [ngClass]="{'option-selected': currentFilterHash[dr6] === 'UserStatus:error'}">
                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                        style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                    <div
                                                                                                                        style="justify-content: right;color:black;">
                                                                                                                        {{nodeStatHash[dr6]?.userStatusHash.error?.length}}
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                                <div *ngIf="!collapsedNodes.includes(dr6)"
                                                                                                    style="display: block;">
                                                                                                    <div *ngFor="let dr7 of myOrgUserHash[dr6]?.directReports"
                                                                                                        style="vertical-align: top;"
                                                                                                        [ngClass]="{'inline-block': orgChartDirectionHash[dr6] === 'inline-block', 'block': orgChartDirectionHash[dr6] === 'block'}">
                                                                                                        <div
                                                                                                            class="org-chart-vert-connector">
                                                                                                        </div>
                                                                                                        <div *ngIf="!isLast(myOrgUserHash[dr6]?.directReports, dr7Index)"
                                                                                                            class="org-chart-horizontal-connector-right">
                                                                                                        </div>
                                                                                                        <div *ngIf="dr7Index !== 0"
                                                                                                            class="org-chart-horizontal-connector-left">
                                                                                                        </div>
                                                                                                        <div style="text-align: center;"
                                                                                                            id="{{dr7}}-container"
                                                                                                            [ngClass]="{'node-selected': orgChartSelectionList.includes(dr7)}">
                                                                                                            <div [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                                class="org-chart-node"
                                                                                                                [ngClass]="{'supervisor-node': myOrgUserHash[dr7]?.userType === 'supervisor'}">
                                                                                                                <div *ngIf="supervisorMenuHash[dr7]?.main"
                                                                                                                    class="supervisor-menu"
                                                                                                                    [ngStyle]="{'left': getMenuXPlacement(dr7), 'top': getMenuYPlacement(dr7)}">
                                                                                                                    <div style="position:absolute;top:10px;right:10px;cursor:pointer;"
                                                                                                                        (click)="hideSupervisorMenu(dr7)">
                                                                                                                        <i class="fa-light fa-times"
                                                                                                                            style="font-size:20px;color:red;"></i>
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="display: block;width:100%;border-bottom:1px solid #dddddd;">
                                                                                                                        <div
                                                                                                                            style="font-weight:300;font-size:18px;color:blue;">
                                                                                                                            {{orgChartNodeHash[dr7]?.fName}}
                                                                                                                            {{orgChartNodeHash[dr7]?.lName}}
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                    <ul
                                                                                                                        class="no-bullets">
                                                                                                                        <li (click)="assignTrainingToUser(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-plus"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Assign
                                                                                                                            Training
                                                                                                                        </li>
                                                                                                                        <li (click)="manageCurrentTrainings(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-file-certificate"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Manage
                                                                                                                            Current
                                                                                                                            Trainings
                                                                                                                        </li>
                                                                                                                        <li (click)="editUser(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-user-edit"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Edit
                                                                                                                            User
                                                                                                                            Data
                                                                                                                        </li>
                                                                                                                        <li (click)="showMsgModal(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-envelope"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Email
                                                                                                                            User
                                                                                                                        </li>
                                                                                                                        <li (click)="addToWatchList('user', [dr7], dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-watch"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Add
                                                                                                                            To
                                                                                                                            Watch
                                                                                                                            List
                                                                                                                        </li>
                                                                                                                        <!--
                                                                                                                        <li *ngIf="!userIdsSelected.includes(dr7)"
                                                                                                                            (click)="addToSelectedUsers(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <div>
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                                                    <i class="fa-solid fa-plus"
                                                                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                                </div>
                                                                                                                                Add
                                                                                                                                to
                                                                                                                                Selected
                                                                                                                                Users
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="userIdsSelected.includes(dr7)"
                                                                                                                            (click)="removeFromSelectedUsers(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <div>
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;position:relative;vertical-align: middle;">
                                                                                                                                    <i class="fa-solid fa-minus"
                                                                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                                </div>
                                                                                                                                Unselect
                                                                                                                                this
                                                                                                                                User
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        -->
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            (click)="collapseAllSubOrgs(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-angle-double-up"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Collapse
                                                                                                                            All
                                                                                                                            Suborganizations
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            (click)="expandAllSubOrgs(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-angle-double-down"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Expand
                                                                                                                            All
                                                                                                                            Suborganizations
                                                                                                                        </li>
                                                                                                                        <li
                                                                                                                            *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'">
                                                                                                                            <div
                                                                                                                                style="font-size:14px;border-bottom:1px solid #ddd;margin-top:20px;color:blue;text-align: center;">
                                                                                                                                Select
                                                                                                                                Users
                                                                                                                                in
                                                                                                                                this
                                                                                                                                suborganization
                                                                                                                                by
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            class="supervisor-menu-item"
                                                                                                                            style="position:relative;"
                                                                                                                            (mouseover)="showSupervisorSubMenu(dr7, 'userStatus')"
                                                                                                                            (mouseleave)="hideSupervisorSubMenu(dr7, 'userStatus')">
                                                                                                                            <i class="fa-solid fa-fw fa-user-check"
                                                                                                                                style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                                            <span
                                                                                                                                style="float:left;">User
                                                                                                                                Status</span>
                                                                                                                            <i class="fa-light fa-angle-right"
                                                                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                            <div
                                                                                                                                style="clear:both;">
                                                                                                                            </div>
                                                                                                                            <div *ngIf="supervisorMenuHash[dr7].userStatus"
                                                                                                                                (mouseleave)="supervisorMenuHash[dr7].userStatus = false"
                                                                                                                                class="supervisor-sub-menu">
                                                                                                                                <div *ngFor="let userStatus of listOfUserStatus"
                                                                                                                                    class="supervisor-menu-item"
                                                                                                                                    (click)="filterChanged(dr7, 'UserStatus', userStatus.value)">
                                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                                        [ngStyle]="{'color': userStatusColorHash[userStatus.value]}"
                                                                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                                                    </i>
                                                                                                                                    <div
                                                                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                                        {{userStatus.text}}
                                                                                                                                    </div>
                                                                                                                                    <div
                                                                                                                                        style="clear: both;">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            class="supervisor-menu-item"
                                                                                                                            style="position:relative;"
                                                                                                                            (mouseover)="showSupervisorSubMenu(dr7, 'userTrainingStatus')"
                                                                                                                            (mouseleave)="hideSupervisorSubMenu(dr7, 'userTrainingStatus')">
                                                                                                                            <i class="fa-solid fa-fw fa-user-graduate"
                                                                                                                                style="float:left;margin-top:3px;font-size:14px;margin-right:10px;"></i>
                                                                                                                            <span
                                                                                                                                style="float:left;">User
                                                                                                                                Training
                                                                                                                                Status</span>
                                                                                                                            <i class="fa-light fa-angle-right"
                                                                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                            <div
                                                                                                                                style="clear:both;">
                                                                                                                            </div>
                                                                                                                            <div *ngIf="supervisorMenuHash[dr7].userTrainingStatus"
                                                                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                                (mouseleave)="supervisorMenuHash[dr7].userStatus = false">
                                                                                                                                <div *ngFor="let userTrainingStatus of listOfUserTrainingStatus"
                                                                                                                                    style="padding:5px;"
                                                                                                                                    class="supervisor-menu-item"
                                                                                                                                    (click)="filterChanged(dr7, 'UserTrainingStatus', userTrainingStatus.value)">
                                                                                                                                    <i class="fa-solid fa-user"
                                                                                                                                        [ngStyle]="{'color': userTrainingStatusColorHash[userTrainingStatus.value]}"
                                                                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;">
                                                                                                                                    </i>
                                                                                                                                    <div
                                                                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                                        {{userTrainingStatus.text}}
                                                                                                                                    </div>
                                                                                                                                    <div
                                                                                                                                        style="clear: both;">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            class="supervisor-menu-item"
                                                                                                                            style="position:relative;"
                                                                                                                            (mouseover)="showSupervisorSubMenu(dr7, 'jobTitle')"
                                                                                                                            (mouseleave)="hideSupervisorSubMenu(dr7, 'jobTitle')">
                                                                                                                            <i class="fa-solid fa-fw fa-briefcase"
                                                                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                            <span
                                                                                                                                style="float:left;">Job
                                                                                                                                Title</span>
                                                                                                                            <i class="fa-light fa-angle-right"
                                                                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                            <div
                                                                                                                                style="clear:both;">
                                                                                                                            </div>
                                                                                                                            <div *ngIf="supervisorMenuHash[dr7].jobTitle"
                                                                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:150px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                                (mouseleave)="supervisorMenuHash[dr7].jobTitle = false">
                                                                                                                                <div *ngFor="let jobTitle of listOfJobTitles"
                                                                                                                                    style="padding:5px;"
                                                                                                                                    class="supervisor-menu-item"
                                                                                                                                    (click)="filterChanged(dr7, 'JobTitle', jobTitle.value)">
                                                                                                                                    <div
                                                                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                                        {{jobTitle.text}}
                                                                                                                                    </div>
                                                                                                                                    <div
                                                                                                                                        style="clear: both;">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            class="supervisor-menu-item"
                                                                                                                            style="position:relative;"
                                                                                                                            (mouseover)="showSupervisorSubMenu(dr7, 'userType')"
                                                                                                                            (mouseleave)="hideSupervisorSubMenu(dr7, 'userType')">
                                                                                                                            <i class="fa-solid fa-fw fa-user-cowboy"
                                                                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                            <span
                                                                                                                                style="float:left;">User
                                                                                                                                Type</span>
                                                                                                                            <i class="fa-light fa-angle-right"
                                                                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                            <div
                                                                                                                                style="clear:both;">
                                                                                                                            </div>
                                                                                                                            <div *ngIf="supervisorMenuHash[dr7].userType"
                                                                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:200px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                                (mouseleave)="supervisorMenuHash[dr7].userType = false">
                                                                                                                                <div *ngFor="let userType of listOfUserTypes"
                                                                                                                                    style="padding:5px;"
                                                                                                                                    class="supervisor-menu-item"
                                                                                                                                    (click)="filterChanged(dr7, 'UserType', userType.value)">
                                                                                                                                    <i class="fas"
                                                                                                                                        [ngClass]="userTypeIconHash[userType.value]"
                                                                                                                                        style="font-size:16px;z-index:1;float:left;line-height:16px;margin-right:10px;color:black;">
                                                                                                                                    </i>
                                                                                                                                    <div
                                                                                                                                        style="font-size:12px;float:left;overflow: hidden;">
                                                                                                                                        {{userType.text}}
                                                                                                                                    </div>
                                                                                                                                    <div
                                                                                                                                        style="clear: both;">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            class="supervisor-menu-item"
                                                                                                                            style="position:relative;"
                                                                                                                            (mouseover)="showSupervisorSubMenu(dr7, 'training')"
                                                                                                                            (mouseleave)="hideSupervisorSubMenu(dr7, 'training')">
                                                                                                                            <i class="fa-solid fa-fw fa-graduation-cap"
                                                                                                                                style="float:left;font-size:14px;margin-top:3px;margin-right:10px;"></i>
                                                                                                                            <span
                                                                                                                                style="float:left;">Training</span>
                                                                                                                            <i class="fa-light fa-angle-right"
                                                                                                                                style="float:right;font-size:18px;margin-right:5px;"></i>
                                                                                                                            <div
                                                                                                                                style="clear:both;">
                                                                                                                            </div>
                                                                                                                            <div *ngIf="supervisorMenuHash[dr7].training"
                                                                                                                                style="padding:5px;position:absolute;left:280px;top:0;width:300px;background-color:#e1e1e1;border:1px solid #bbbbbb;border-radius: 5px;"
                                                                                                                                (mouseleave)="supervisorMenuHash[dr7].training = false">
                                                                                                                                <div *ngFor="let training of listOfTrainingTitles"
                                                                                                                                    style="padding:5px;"
                                                                                                                                    class="supervisor-menu-item"
                                                                                                                                    (click)="filterChanged(dr7, 'Training', training.value)">
                                                                                                                                    <i [ngClass]="getSelectedTrainingIconClass(training.value)"
                                                                                                                                        [ngStyle]="{'color': getTrainingIconColor(training.value)}"
                                                                                                                                        style="font-size:16px;z-index:1;line-height:16px;margin-right:10px;float:left;">
                                                                                                                                    </i>
                                                                                                                                    <div
                                                                                                                                        style="font-size:12px;float:left;width:200px;overflow: hidden;">
                                                                                                                                        {{training.text}}
                                                                                                                                    </div>
                                                                                                                                    <div
                                                                                                                                        style="clear:both;">
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            (click)="selectOrg(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <i class="fa-solid fa-fw fa-users"
                                                                                                                                style="font-size:14px;margin-right:10px;"></i>
                                                                                                                            Select
                                                                                                                            Entire
                                                                                                                            Suborganization
                                                                                                                        </li>
                                                                                                                        <li *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor'"
                                                                                                                            (click)="removeSelectionByUid(dr7)"
                                                                                                                            class="supervisor-menu-item">
                                                                                                                            <div>
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;margin-right:10px;width:16px;height:16px;vertical-align: middle;position:relative;">
                                                                                                                                    <i class="fa-solid fa-minus"
                                                                                                                                        style="font-size:10px;position: absolute;left:2px;top:2px;"></i>
                                                                                                                                </div>
                                                                                                                                Clear
                                                                                                                                Selection
                                                                                                                            </div>
                                                                                                                        </li>
                                                                                                                    </ul>
                                                                                                                </div>
                                                                                                                <div id="{{dr7}}"
                                                                                                                    (mouseenter)="setHoverData(dr7)"
                                                                                                                    (mouseleave)="setHoverData(null)"
                                                                                                                    (click)="showSupervisorMenu(dr7)"
                                                                                                                    [ngClass]="{'selected-node': userIdsSelected.includes(dr7), 'hover-node': dr7 === currentHoverUid ||
                                                                                                                orgChartNodeHash[dr7]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr7), 'non-supervisor-icon-node': myOrgUserHash[dr7]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr7]?.userType === 'supervisor', 'wide-node': myOrgUserHash[dr7]?.userType !== 'supervisor' && currentHoverUid === dr7}">
                                                                                                                    <!--
                                                                                                                    <div *ngIf="dr7 === currentHoverUid"
                                                                                                                        class="supervisor-menu-icon"
                                                                                                                        (click)="showSupervisorMenu(dr7)">
                                                                                                                        <i
                                                                                                                            class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                                                                    </div>
                                                                                                                -->
                                                                                                                    <i [ngClass]="userTypeIconHash[myOrgUserHash[dr7]?.userType]"
                                                                                                                        [ngStyle]="{'color': getStatusColor(dr7)}"></i>
                                                                                                                    <span
                                                                                                                        *ngIf="myOrgUserHash[dr7].userType === 'supervisor' || includeFullName"
                                                                                                                        style="display: block;color:#666666;"
                                                                                                                        [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                                        {{orgChartNodeHash[dr7]?.fName}}<br>{{orgChartNodeHash[dr7]?.lName}}
                                                                                                                    </span>
                                                                                                                </div>
                                                                                                                <div *ngIf="myOrgUserHash[dr7]?.userType === 'supervisor' && !collapsedNodes.includes(dr7)"
                                                                                                                    class="org-chart-vert-connector-bottom">
                                                                                                                </div>
                                                                                                                <div *ngIf="!collapsedNodes.includes(dr7)"
                                                                                                                    (click)="collapseNode(dr7, true)"
                                                                                                                    nz-tooltip
                                                                                                                    nzTooltipTitle="Collapse Suborganization"
                                                                                                                    nzTooltipPlacement="right">
                                                                                                                    <i class="fa-light fa-minus-circle"
                                                                                                                        style="font-size:14px;cursor:pointer;"></i>
                                                                                                                </div>
                                                                                                                <div *ngIf="collapsedNodes.includes(dr7)"
                                                                                                                    (click)="collapseNode(dr7, false)"
                                                                                                                    style="margin:0 8px;">
                                                                                                                    <i class="fa-regular fa-plus-circle"
                                                                                                                        nz-tooltip
                                                                                                                        nzTooltipTitle="Expand Suborganization"
                                                                                                                        nzTooltipPlacement="right"
                                                                                                                        style="margin-top:4px;font-size:16px;color:red;cursor:pointer;"></i>
                                                                                                                    <div class="collapsed-block"
                                                                                                                        (mouseenter)="setHoverData(dr7)"
                                                                                                                        (mouseleave)="setHoverData(null)"
                                                                                                                        [ngClass]="{'hover-collapsed-block': orgChartNodeHash[dr7]?.extra.reportChain.includes(currentHoverUid) || dr7 === currentHoverUid}">
                                                                                                                        <div nz-tooltip
                                                                                                                            nzTooltipTitle="Total Users"
                                                                                                                            nzTooltipPlacement="right"
                                                                                                                            style="display:flex;justify-content:space-between;">
                                                                                                                            <i class="fa-solid fa-users"
                                                                                                                                style="font-size:18px;"></i>
                                                                                                                            <div
                                                                                                                                style="vertical-align: top;margin-left:20px;padding-right:5px;">
                                                                                                                                {{nodeStatHash[dr7]?.userCnt}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div *ngIf="displayMode[dr7] === 'UserTrainingStatus'"
                                                                                                                            style="padding:5px;">
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                                </div>
                                                                                                                                <div
                                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                                    {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Users With No Trainings"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserTrainingStatus:none'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                                {{nodeStatHash[dr7]?.userTrainingStatusHash.none?.length}}
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Up To Date Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserTrainingStatus:upToDate'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:#46bd15;font-size:16px;padding-top:2px;"></i>
                                                                                                                                {{nodeStatHash[dr7]?.userTrainingStatusHash.upToDate?.length}}
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Users With At Least One Training Past Due"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserTrainingStatus:pastDue'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                                {{nodeStatHash[dr7]?.userTrainingStatusHash.pastDue?.length}}
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div *ngIf="displayMode[dr7] === 'Training'"
                                                                                                                            style="padding:5px;">
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                                </div>
                                                                                                                                <div
                                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                                    {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                class="collapsed-training-status-node">
                                                                                                                                <div *ngFor="let training of assignableTrainings"
                                                                                                                                    nz-tooltip
                                                                                                                                    [nzTooltipTitle]="training.title"
                                                                                                                                    nzTooltipPlacement="right"
                                                                                                                                    class="training-status-row">
                                                                                                                                    <div
                                                                                                                                        class="training-status-icon">
                                                                                                                                        <i [ngClass]="training.iconClass"
                                                                                                                                            style="font-size:16px;"
                                                                                                                                            [ngStyle]="{'color': getTrainingIconColor(training._id)}"></i>
                                                                                                                                    </div>
                                                                                                                                    <div class="training-status-rhs">
                                                                                                                                        <span
                                                                                                                                            class="training-status-values"
                                                                                                                                            style="color:#46bd15;">{{nodeStatHash[dr7]?.trainingHash[training._id]?.upToDate?.length}}</span>
                                                                                                                                        <span
                                                                                                                                            class="training-status-values"
                                                                                                                                            style="color:red;">{{nodeStatHash[dr7]?.trainingHash[training._id]?.pastDue?.length}}</span>
                                                                                                                                        <span
                                                                                                                                            class="training-status-values"
                                                                                                                                            style="color:#4891f7;">{{nodeStatHash[dr7]?.trainingHash[training._id]?.completed?.length}}</span>
                                                                                                                                        <span
                                                                                                                                            class="training-status-values"
                                                                                                                                            style="color:#feb90b;">{{nodeStatHash[dr7]?.trainingHash[training._id]?.pendingCertUpload?.length}}</span>
                                                                                                                                    </div>
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div *ngIf="displayMode[dr7] === 'JobTitle'"
                                                                                                                            style="padding:5px;">
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                                </div>
                                                                                                                                <div
                                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                                    {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div *ngFor="let jobTitle of jobTitles"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'JobTitle:' + jobTitle}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom: 3px;font-size:12px;">
                                                                                                                                {{jobTitle}}
                                                                                                                                <div
                                                                                                                                    style="margin-left:20px;font-size:12px;">
                                                                                                                                    {{
                                                                                                                                    nodeStatHash[dr7]?.jobTitleHash[jobTitle]?.length
                                                                                                                                    }}
                                                                                                                                </div>
                                                                                                                            </div>

                                                                                                                        </div>
                                                                                                                        <div *ngIf="displayMode[dr7] === 'UserType'"
                                                                                                                            style="padding:5px;">
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                                </div>
                                                                                                                                <div
                                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                                    {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Individual Contributors"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserType:individualContributor'}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'individualContributor'}"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>

                                                                                                                                <div
                                                                                                                                    style="justify-content: right;">
                                                                                                                                    {{nodeStatHash[dr7]?.userTypeHash.individualContributor?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Supervisors"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserType:supervisor'}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user-tie"
                                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'supervisor'}"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;">
                                                                                                                                    {{nodeStatHash[dr7]?.userTypeHash.supervisor?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Volunteers"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserType:volunteer'}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user-cowboy"
                                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'volunteer'}"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;">
                                                                                                                                    {{nodeStatHash[dr7]?.userTypeHash.volunteer?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Contractors"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserType:contractor'}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user-hard-hat"
                                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'contractor'}"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;">
                                                                                                                                    {{nodeStatHash[dr7]?.userTypeHash.contractor?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Customers"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserType:customer'}"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user-alien"
                                                                                                                                    [ngClass]="{'selected-item': currentUserType === 'customer'}"
                                                                                                                                    style="color:black;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;">
                                                                                                                                    {{nodeStatHash[dr7]?.userTypeHash.customer?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                        <div *ngIf="displayMode[dr7] === 'UserStatus'"
                                                                                                                            style="padding:5px;">
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Selected Users"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:10px;border-bottom: 1px solid #dddddd;padding-bottom:5px;">
                                                                                                                                <div class="selected-node"
                                                                                                                                    style="display:inline-block;padding:3px 3px 0 3px;margin:4px 20px 4px -5px;width:24px;height:24px;">
                                                                                                                                </div>
                                                                                                                                <div
                                                                                                                                    style="display:inline-block;padding-top:6px;">
                                                                                                                                    {{nodeStatHash[dr7]?.selectedCnt}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div
                                                                                                                                style="font-size:12px;text-align: center;margin-bottom:5px;font-weight:500;color:#aaaaaa;">
                                                                                                                                User
                                                                                                                                Status
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Active"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserStatus:active'}"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:blue;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                                    {{nodeStatHash[dr7]?.userStatusHash.active?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Inactive"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserStatus:inactive'}"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:#aaaaaa;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                                    {{nodeStatHash[dr7]?.userStatusHash.inactive?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Not Invited"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserStatus:notInvited'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:fuchsia;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                                    {{nodeStatHash[dr7]?.userStatusHash.notInvited?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Pending"
                                                                                                                                [ngClass]="{'selected-item': currentUserStatus === 'pending'}"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserStatus:pending'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:#feb90b;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                                    {{nodeStatHash[dr7]?.userStatusHash.pending?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                            <div nz-tooltip
                                                                                                                                nzTooltipTitle="Error"
                                                                                                                                nzTooltipPlacement="right"
                                                                                                                                style="display:flex;justify-content:space-between;margin-bottom:5px;"
                                                                                                                                [ngClass]="{'option-selected': currentFilterHash[dr7] === 'UserStatus:error'}">
                                                                                                                                <i class="fa-solid fa-user"
                                                                                                                                    style="color:red;font-size:16px;padding-top:2px;"></i>
                                                                                                                                <div
                                                                                                                                    style="justify-content: right;color:black;">
                                                                                                                                    {{nodeStatHash[dr7]?.userStatusHash.error?.length}}
                                                                                                                                </div>
                                                                                                                            </div>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                            <div *ngIf="!collapsedNodes.includes(dr7)"
                                                                                                                style="display: block;">
                                                                                                                <div *ngFor="let dr8 of myOrgUserHash[dr7]?.directReports"
                                                                                                                    style="vertical-align: top;"
                                                                                                                    [ngClass]="{'inline-block': orgChartDirectionHash[dr7] === 'inline-block', 'block': orgChartDirectionHash[dr7] === 'block'}">
                                                                                                                    <div
                                                                                                                        class="org-chart-vert-connector">
                                                                                                                    </div>
                                                                                                                    <div *ngIf="!isLast(myOrgUserHash[dr7]?.directReports, dr8Index)"
                                                                                                                        class="org-chart-horizontal-connector-right">
                                                                                                                    </div>
                                                                                                                    <div *ngIf="dr8Index !== 0"
                                                                                                                        class="org-chart-horizontal-connector-left">
                                                                                                                    </div>
                                                                                                                    <div
                                                                                                                        style="text-align: center;">
                                                                                                                        <div (mouseenter)="setHoverData(dr8)"
                                                                                                                            [ngStyle]="{'padding.px': orgChartPadding}"
                                                                                                                            (mouseleave)="setHoverData(null)"
                                                                                                                            class="org-chart-node">
                                                                                                                            <div style="border:1px solid white;margin:0 8px;"
                                                                                                                                [ngClass]="{'selected-node':  userIdsSelected.includes(dr8), 'hover-node': dr8 === currentHoverUid ||
                                                                                                                            orgChartNodeHash[dr8]?.extra.reportChain.includes(currentHoverUid) || currentHoverReportChain.includes(dr8), 'non-supervisor-icon-node': myOrgUserHash[dr8]?.userType !== 'supervisor', 'supervisor-icon-node': myOrgUserHash[dr8]?.userType === 'supervisor'}">
                                                                                                                                <div *ngIf="dr8 === currentHoverUid"
                                                                                                                                    class="supervisor-menu-icon"
                                                                                                                                    (click)="showSupervisorMenu(dr8)">
                                                                                                                                    <i
                                                                                                                                        class="fa-regular fa-fw fa-ellipsis-v"></i>
                                                                                                                                </div>
                                                                                                                                <i [ngClass]="userTypeIconHash[myOrgUserHash[dr8]?.userType]"
                                                                                                                                    [ngStyle]="{'color': getStatusColor(dr8)}"></i>
                                                                                                                            </div>
                                                                                                                            <span
                                                                                                                                *ngIf="myOrgUserHash[dr8]?.userType === 'supervisor' || includeFullName"
                                                                                                                                style="display: block;"
                                                                                                                                [ngStyle]="{'font-size.px': textFontSize}">
                                                                                                                                {{orgChartNodeHash[dr8]?.fName}}<br>{{orgChartNodeHash[dr8]?.lName}}
                                                                                                                            </span>
                                                                                                                        </div>
                                                                                                                    </div>
                                                                                                                </div>
                                                                                                            </div>
                                                                                                        </div>
                                                                                                    </div>
                                                                                                </div>
                                                                                            </div>
                                                                                        </div>
                                                                                    </div>
                                                                                </div>
                                                                            </div>
                                                                        </div>
                                                                    </div>
                                                                </div>
                                                            </div>
                                                        </div>
                                                    </div>
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            <nz-drawer [nzMaskClosable]="true" [nzVisible]="userPanelVisible" nzPlacement="right" nzTitle="User Profile"
                [nzWidth]="1000" (nzOnClose)="closeUserPanel()">
                <div *ngIf="selectedUser" style="display:block;width:100%;">
                    <div style="display:block;width:90%;margin-bottom:5px;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Status
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <nz-radio-group [(ngModel)]="selectedUser.userStatus"
                                (ngModelChange)="statusChanged($event)">
                                <label nz-radio-button nzValue="active" style="color:blue;"
                                    [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'error' || selectedUser.userStatus === 'notInvited'">
                                    Active
                                </label>
                                <label nz-radio-button nzValue="inactive" style="color:#aaaaaa;"
                                    [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'error' || selectedUser.userStatus === 'notInvited'">
                                    Inactive
                                </label>
                                <label nz-radio-button nzValue="notInvited" nz-tooltip style="color:fuchsia;"
                                    nzTooltipTitle="This status indicates that the registration invitation has not been sent."
                                    [nzDisabled]="selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'error' || selectedUser.userStatus === 'active' || selectedUser.userStatus === 'inactive'">
                                    Not Invited
                                </label>
                                <label nz-radio-button nzValue="pending" nz-tooltip style="color:orange;"
                                    nzTooltipTitle="This status indicates the user has not completed the registration process."
                                    [nzDisabled]="selectedUser.userStatus === 'notInvited' || selectedUser.userStatus === 'error' || selectedUser.userStatus === 'active' || selectedUser.userStatus === 'inactive'">
                                    Pending
                                </label>
                                <label nz-radio-button nzValue="error" nz-tooltip style="color:red;"
                                    nzTooltipTitle="This status indicates the user has either a bad email address or a bad supervisor id."
                                    [nzDisabled]="selectedUser.userStatus === 'notInvited' || selectedUser.userStatus === 'pending' || selectedUser.userStatus === 'active' || selectedUser.userStatus === 'inactive'">
                                    Error
                                </label>
                            </nz-radio-group>
                        </div>
                    </div>
                    <div style="display:block;width:90%;margin-bottom:5px;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Training Status
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <nz-radio-group [(ngModel)]="selectedUser.trainingStatus"
                                (ngModelChange)="trainingStatusChanged($event)">
                                <label nz-radio-button nzValue="none" style="color:black;">
                                    None
                                </label>
                                <label nz-radio-button nzValue="upToDate" style="color:#52c41a;">
                                    Up To Date
                                </label>
                                <label nz-radio-button nzValue="pastDue" nz-tooltip style="color:red;"
                                    nzTooltipTitle="This status indicates that the registration invitation has not been sent.">
                                    Past Due
                                </label>
                            </nz-radio-group>
                        </div>
                    </div>

                    <div style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Errors
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <ul>
                                <li *ngFor="let error of selectedUser.settings.statusList">{{error}}</li>
                            </ul>
                        </div>
                    </div>
                    <div style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                First Name
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <input nz-input nzSize="small" type="text" placeholder="First Name" ngDefaultControl
                                [(ngModel)]="selectedUser.firstName" style="margin-bottom:2px;">
                        </div>
                    </div>
                    <div style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Last Name
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <input nz-input nzSize="small" type="text" placeholder="Last Name" ngDefaultControl
                                [(ngModel)]="selectedUser.lastName" style="margin-bottom:2px;">
                        </div>
                    </div>
                    <div style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Email
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <nz-input-group [nzSuffix]="suffixTemplate">
                                <input nz-input nzSize="small" type="text" placeholder="Email" ngDefaultControl
                                    [(ngModel)]="selectedUser.email" (ngModelChange)="checkUniqueEmail($event)"
                                    style="margin-bottom:2px;" (keydown.enter)="checkUniqueEmail($event)"
                                    (blur)="checkUniqueEmail($event)">
                            </nz-input-group>
                            <ng-template #suffixTemplate>
                                <i *ngIf="!emailUnique" nz-icon nz-tooltip nzTooltipTitle="Extra information"
                                    nzType="close-circle" [nzTheme]="'twotone'" nzTwotoneColor="red"></i>
                                <i *ngIf="emailUnique" nz-icon nz-tooltip nzTooltipTitle="Extra information"
                                    nzType="check-circle" [nzTheme]="'twotone'" nzTwotoneColor="#46bc16"></i>
                            </ng-template>
                        </div>
                    </div>
                    <div style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Job Title
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <input style="margin-bottom:2px;" placeholder="Job Title" nz-input
                                [(ngModel)]="selectedUser.jobTitle" ngDefaultControl nzSize="small"
                                (ngModelChange)="onJobTitleChange($event)" [nzAutocomplete]="auto"
                                (keydown.enter)="setJobTitle($event)" (blur)="setJobTitle($event)" />
                            <nz-autocomplete [nzDataSource]="matchingJobTitles" #auto></nz-autocomplete>
                        </div>
                    </div>
                    <div *ngIf="selectedUser?._id !== authenticatedUser._id" style="display:block;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                            <label style="font-size:14px;color:#000000;">
                                Supervisor
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <input style="margin-bottom:2px;" nz-input placeholder="Supervisor Name"
                                [(ngModel)]="supervisorName" nzSize="small"
                                (ngModelChange)="onSupervisorNameChange($event)" [nzAutocomplete]="autoSupervisor" />
                            <nz-autocomplete [nzDataSource]="matchingSupervisors" #autoSupervisor>
                            </nz-autocomplete>
                        </div>
                    </div>
                    <div style="display:block;margin-top:10px;width:90%;">
                        <div style="float:left;width:25%;text-align: right;">
                            <label>
                                User Type
                            </label>
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <nz-radio-group ngDefaultControl [(ngModel)]="selectedUser.userType"
                                (ngModelChanged)="userChanged('userType')" style="margin-bottom:20px;">
                                <label nz-radio nzValue="individualContributor" (click)="newSupervisorSelected(false)"
                                    style="display:block;font-size:20px;">
                                    <i class="fa-duotone fa-user" style="vertical-align: bottom;"></i>
                                    <span style="margin-left:10px;font-size:12px;">Individual
                                        Contributor</span>
                                </label>
                                <label nz-radio nzValue="supervisor" (click)="newSupervisorSelected(true)"
                                    style="display:block;font-size:20px;">
                                    <i class="fa-duotone fa-user-tie" style="vertical-align: bottom;"></i>
                                    <span style="margin-left:10px;font-size:12px;">Supervisor</span>
                                </label>
                                <label nz-radio nzValue="volunteer" (click)="newSupervisorSelected(false)"
                                    style="display:block;font-size:20px;">
                                    <i class="fa-duotone fa-user-cowboy" style="vertical-align: bottom;"></i>
                                    <span style="margin-left:10px;font-size:12px;">Volunteer</span>
                                </label>
                                <label nz-radio nzValue="contractor" (click)="newSupervisorSelected(false)"
                                    style="display:block;font-size:20px;">
                                    <i class="fa-duotone fa-user-hard-hat" style="vertical-align: bottom;"></i>
                                    <span style="margin-left:10px;font-size:12px;">Contractor</span>
                                </label>
                                <label nz-radio nzValue="customer" (click)="newSupervisorSelected(false)"
                                    style="display:block;font-size:20px;">
                                    <i class="fa-duotone fa-user-alien" style="vertical-align: bottom;"></i>
                                    <span style="margin-left:10px;  font-size:12px;">Customer</span>
                                </label>
                            </nz-radio-group>
                        </div>
                    </div>
                    <div style="display:block;margin-top:10px;width:90%;">
                        <div style="display:inline-block;width:25%;text-align: right;">
                        </div>
                        <div style="display:inline-block;width:70%;margin-left:20px;">
                            <label nz-checkbox ngDefaultControl [(ngModel)]="selectedUser.teamAdmin"
                                style="margin-top:5px;font-size:12px;" nz-tooltip
                                nzTooltipTitle="Give this person the ability to create, update, delete trainings.">Training
                                Admin
                                Access</label>
                        </div>
                    </div>

                    <hr>

                    <div style="display:block;margin-top:20px;width:90%;text-align: center;">
                        <div style="display:inline-block;width:60%;">
                            <!--
                        <button nz-button nzSize="small" nzShape="round" (click)="handleCancel()" nzType="default"
                            style="margin: 10px;display:inline-block;">Cancel
                        </button>
                        <button *ngIf="newUser" nz-button nzSize="small" nzShape="round" (click)="handleAddUser(true)"
                            nzType="primary" style="margin: 10px;display:inline-block;" [disabled]="!emailUnique">Add
                            Person
                        </button>
                        -->
                            <button nz-button nzSize="small" nzShape="round" (click)="handleUpdateUser()"
                                nzType="primary" style="margin: 10px;display:inline-block;">Update
                                User
                            </button>
                        </div>
                    </div>
                </div>
                <!--
            <app-profile></app-profile>
            -->
            </nz-drawer>
            <nz-modal [nzVisible]="showUserTrainingModal" [nzTitle]="assignTrainingTitle"
                [nzCancelDisabled]="assignableTrainings.length === 0" (nzOnCancel)="handleCancelUserTraining()"
                [nzOkDisabled]="!selectedTrainingId" (nzOnOk)="handleAssignUserTraining()"
                style="width:500px;padding:10px;float:left;">
                <div>
                    <div style="background-color:white;display:inline-block;width:100%;">
                        <div *ngIf="assignableTrainings?.length === 0">
                            You have not created any trainings yet!<br> Head over to the <span style="color:blue;">All
                                Trainings</span> page to create your
                            trainings.
                        </div>
                        <div
                            *ngIf="userIdsSelected?.length === 1 && (assignableTrainings.length > 0 && assignableTrainings.length === 0)">
                            You have already assigned all trainings to this user!
                        </div>
                        <div *ngIf="assignableTrainings.length > 0">
                            Select the training you would like to assign.
                        </div>
                        <div style="margin-top:40px;">
                            <div *ngFor="let training of assignableTrainings" class="all-training-list-entry"
                                style="padding:10px 20px;width:100%;"
                                [ngClass]="{'selected-training': selectedTrainingId === training._id, 'disabled': training?.versions.length === 1, 'active-training': training?.versions.length > 1 }"
                                (click)="selectTraining(training._id)">
                                <i [ngClass]="allTrainingIdHash[training._id]?.versions[0].iconClass"
                                    style="display:inline-block;font-size:20px;margin-right:10px;vertical-align: middle;"
                                    [ngStyle]="{'color': allTrainingIdHash[training._id]?.versions[0].iconColor}">
                                </i>
                                <div style="display:inline-block;font-size:14px;">
                                    {{ training.versions[0].title }}
                                </div>
                                <div style="float:right;font-size:14px;margin-left:20px;">
                                    version {{ versionFormatter(training.versions[0].version) }}
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </nz-modal>
            <nz-modal [nzVisible]="manageCurrentTrainingsModal" [nzTitle]="manageTrainingsTitle" [nzCancelText]="null"
                (nzOnOk)="handleOkManageCurrentTrainings()" nzWidth="1200" style="padding:10px;float:left;">
                <div>
                    <div
                        style="width:100%;overflow:scroll;text-align: left;background-color: white;border: 1px solid #eaab10;">
                        <app-user-trainings mode="admin" logSession="off"></app-user-trainings>
                    </div>
                </div>
            </nz-modal>
        </div>
    </div>