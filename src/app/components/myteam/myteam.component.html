<div style="height:100%;">
    <div class="my-team" style="height:100%;">
        <div class="my-team-header">
            <nz-alert style="width:100%;height:fit-content;" nzType="info"
                nzMessage="About This Page"
                nzDescription="This is where you manage your team members and the trainings that they are responsible for."
                nzShowIcon nzCloseable>
            </nz-alert>

        </div>
        <div *ngIf="myTeam.length === 0" style="text-align:center;margin-top:20px;">
            <span style="font-size:20px;font-weight:200;margin-top: 20px;"> You haven't added any team
                members yet!</span><br>
            <button nz-button nzType="primary" (click)="addUser()" style="margin-top: 20px;">Add a team
                member</button>
        </div>
        <div *ngIf="myTeam && myTeam.length > 0" style="height:95%;">
            <div class="team-container">
                <div class="direct-report-container">
                    <div>
                        <button nz-button nzType="primary" (click)="addUser()" style="margin: 20px 0;">
                            Add a team member
                        </button>
                    </div>
                    <div *ngFor="let user of myTeam" class="direct-report-cell">
                        <div class="user-button direct-report" (click)="selectUser(user._id)"
                            [ngClass]="{'user-selected': userIdSelected === user._id}">
                            <i [ngClass]="userTypeIconHash[user.userType]"
                                [ngStyle]="{'color': trainingStatusColorHash[user.trainingStatus]}" nz-tooltip
                                [nzTooltipTitle]=""></i>&nbsp;
                            <span style="display:inline-block">{{ user.firstName }} {{ user.lastName }} </span>&nbsp;
                            <i *ngIf="user.adminUp === true" nz-icon nzType="crown" [nzTheme]="'twotone'"
                                [nzTwotoneColor]="'#6939c9'"
                                style="display:inline-block;font-size:18px;vertical-align:baseline;" nz-tooltip
                                nzTooltipTitle="Admin User"></i>
                            &nbsp;
                            <i *ngIf="user.userStatus === 'pending'" nz-icon nzType="warning" [nzTheme]="'twotone'"
                                [nzTwotoneColor]="'#efb753'"
                                style="display:inline-block;font-size:18px;vertical-align:baseline;" nz-tooltip
                                nzTooltipTitle="User Account Pending"></i>
                        </div>
                    </div>
                </div>
            </div>
            <div class="my-team-rightside" style="width:77%;">
                <div *ngIf="selectedUser$ | async as selectedUser">
                    <div class="" style="width:100%;height:44px;margin-bottom:20px;">
                        <i [ngClass]="userTypeIconHash[selectedUser.userType]" style="font-size:20px;"
                            [ngStyle]="{'color': trainingStatusColorHash[selectedUser.trainingStatus]}" nz-tooltip
                            [nzTooltipTitle]=""></i>&nbsp;
                        <span
                            style="display:inline-block;margin-left:10px;font-size:24px;font-weight: 300;">{{selectedUser.firstName}}
                            {{selectedUser.lastName}}</span>
                        &nbsp;&nbsp;&nbsp;
                        <i nz-icon nzType="delete" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'"
                            style="cursor:pointer;font-size:16px;vertical-align: text-top;" nz-tooltip
                            nzTooltipTitle="Delete User" nz-popconfirm nzPopconfirmTitle="Delete this user?"
                            (nzOnConfirm)="confirmDelete(selectedUser)"></i>
                    </div>
                    <nz-tabset nzTabPosition="top">
                        <nz-tab nzTitle="Trainings">
                            <div style="width:100%;">
                                <nz-modal [(nzVisible)]="showUserTrainingModal" nzTitle="Assign Training To User"
                                    [nzCancelDisabled]="assignableTrainings.length === 0"
                                    (nzOnCancel)="handleCancelUserTraining()" (nzOnOk)="handleAssignUserTraining()"
                                    style="width:500px;padding:10px;float:left;">
                                    <div>
                                        <div style="background-color:white;display:inline-block;width:100%;">
                                            <div *ngIf="assignableTrainings.length === 0">
                                                You have not created any trainings yet!<br> Head over to the <span
                                                    style="color:blue;">All Trainings</span> page to create your
                                                trainings.
                                            </div>
                                            <div *ngFor="let training of assignableTrainings"
                                                class="all-training-list-entry" style="padding:10px 20px;width:100%;"
                                                [ngClass]="{'selected-training': selectedTrainingId === training._id}"
                                                (click)="selectedTrainingId = training._id">
                                                <i [ngClass]="allTrainingIdHash[training._id].iconClass"
                                                    style="display:inline-block;font-size:20px;margin-right:10px;vertical-align: middle;"
                                                    [ngStyle]="{'color': allTrainingIdHash[training._id].iconColor}">
                                                </i>
                                                <div style="display:inline-block;font-size:14px;">
                                                    {{ training.title }}
                                                </div>
                                            </div>
                                        </div>
                                    </div>
                                </nz-modal>

                                <div style="width:100%;padding:0 10px 10px 10px;float:right;">
                                    <button nz-button nzType="primary" (click)="showUserTrainingModal = true"
                                        style="margin: 20px 0;">
                                        Assign a Training
                                    </button>
                                    <!--
                                    <i nz-icon nzType="plus-square" [nzTheme]="'twotone'" [nzTwotoneColor]="'#52c41a'"
                                        style="float:left;display:block;cursor:pointer;font-size:20px;margin:5px 0 0 0;"
                                        nz-tooltip nzTooltipTitle="Assign a training to the user"
                                        (click)="showUserTrainingModal = true"></i>
                                        -->
                                    <div style="clear:both;margin-bottom:10px;"></div>
                                    <app-user-trainings mode="admin"></app-user-trainings>
                                </div>
                            </div>
                        </nz-tab>
                        <nz-tab nzTitle="Profile Info">
                        </nz-tab>
                    </nz-tabset>

                </div>
            </div>
        </div>
        <nz-modal [(nzVisible)]="showNewUserModal" nzTitle="Team Member Registration" (nzOnCancel)="handleCancel()"
            (nzOnOk)="handleAddUser()">
            <div style="padding:20px;color:black;">
                <p style="font-size:16px;">
                    An email will be sent to the team member being registered in order for them to complete the
                    registration
                    process.
                </p>

            </div>
            <div style="z-index: 1000;background-color: white;">
                <input nz-input type="text" placeholder="First Name" ngDefaultControl
                    [(ngModel)]="newTeamMember.firstName" style="margin-bottom:10px;">
                <input nz-input type="text" placeholder="Last Name" ngDefaultControl
                    [(ngModel)]="newTeamMember.lastName" style="margin-bottom:10px;">
                <input nz-input type="text" placeholder="Email" ngDefaultControl [(ngModel)]="newTeamMember.email"
                    style="margin-bottom:20px;">
                <input nz-input type="text" placeholder="Job Title" ngDefaultControl
                    [(ngModel)]="newTeamMember.jobTitle" style="display:inline-block;margin-bottom:20px;">
                <span style="margin-right:20px;">User Type</span>
                <nz-radio-group ngDefaultControl [(ngModel)]="newTeamMember.userType" style="margin-bottom:20px;">
                    <label nz-tooltip nzTitle="Individual Contributor" nz-radio nzValue="individualContributor"
                        (click)="newSupervisorSelected(false)">
                        <i class="fad fa-user" style="font-size:22px;"></i>
                    </label>
                    <label nz-tooltip nzTitle="Supervisor" nz-radio nzValue="supervisor"
                        (click)="newSupervisorSelected(true)">
                        <i class="fad fa-user-tie" style="font-size:22px;"></i>
                    </label>
                    <label nz-tooltip nzTitle="Volunteer" nz-radio nzValue="volunteer"
                        (click)="newSupervisorSelected(false)">
                        <i class="fad fa-user-cowboy" style="font-size:22px;"></i>
                    </label>
                    <label nz-tooltip nzTitle="Customer" nz-radio nzValue="customer"
                        (click)="newSupervisorSelected(false)">
                        <i class="fad fa-user-crown" style="font-size:22px;"></i>
                    </label>
                </nz-radio-group>
            </div>
            <div [@supervisorSignupToggle]="isNewSupervisorPanelOpen ? 'open' : 'closed'"
                style="z-index: -1;height:50px;overflow: hidden;padding-left:30px;">
                <label nz-checkbox ngDefaultControl [(ngModel)]="includeNewSupervisorsTeam">Have this supervisor
                    register
                    their team</label>
            </div>
            <label nz-checkbox ngDefaultControl [(ngModel)]="newTeamMember.adminUp" nz-tooltip
                nzTooltipTitle="Give this person the ability to create, update, delete trainings.">Training Admin
                Access</label>
        </nz-modal>
    </div>
</div>