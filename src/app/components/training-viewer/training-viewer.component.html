<ng-template #messageTemplate let-message>
    <div style="background-color: black;">
    </div>
</ng-template>
<div *ngIf="selectedTraining$ | async as selectedTraining" class="training-viewer-fullscreen">
    <!--
    <div style="position:relative;width:100%;padding-top:5px;background-color: #fcfcfc;overflow:scroll;">
        <div>
            <div style="display:inline-block;text-align: center;background-color:#fcfcfc;width:100%;">
                <div>
                    <i class="fad fa-hat-wizard"
                        style="color:#951eca;font-size:20px;margin-right:10px;vertical-align: baseline;display:inline-block;"></i>
                    <span style="display:inline-block;font-size:16px;color:#bbbbbb;">Training
                        Wizard</span>&nbsp;&nbsp;&nbsp;&nbsp;-&nbsp;&nbsp;&nbsp;&nbsp;
                </div>
                <div *ngIf="production === 'false'">
                    <div style="display:inline-block;">
                        <span style="font-size:14px;color:#bbbbbb;margin-left:20px;">version comment</span>
                        <i class="far fa-comment-lines" [ngStyle]="{'color': selectedTraining.iconColor}"
                            style="cursor:pointer;font-size:18px;margin-left:10px;vertical-align: text-bottom;"
                            (click)="showChangeLog()"></i>
                    </div>
                </div>
            </div>
        </div>
        <i nz-icon nzType="close-circle" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'" (click)="closeViewer()"
            style="display:inline-block;cursor:pointer;font-size:20px;vertical-align: baseline;position:absolute;right:5px;top:5px;"
            nz-tooltip nzTooltipTitle="Close Training">
        </i>
    </div>
    -->
    <nz-modal [(nzVisible)]="lockTrainingModalIsVisible" [nzTitle]="selectedTraining.title" nzWidth="60%"
        nzOkDisabled="false" nzCancelDisabled="false" (nzOnCancel)="cancelLockTraining()"
        (nzOnOk)="handleLockTraining()">
        <div style="display:inline-block;width:80%;">
            <h3 nz-title>
                What actions should be taken as a result of the changes that were made?
            </h3>
        </div>
        <div style="clear: both;"></div>
        <div style="display: block;">
            <nz-radio-group [(ngModel)]="changeLevel">
                <label nz-radio [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}" nzValue="major">Reset
                    training
                    status for all responsible users. </label>
                <label nz-radio [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}" nzValue="minor">Notify
                    all
                    responsible users.</label>
                <label nz-radio [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}" nzValue="patch">No
                    action
                    needed.</label>
            </nz-radio-group>
            <p *ngIf="error1" style="color:red;">Please select one of the 3 options.</p>
            <p>
                Please describe the changes you have made.
            </p>
            <textarea rows="4" nz-input [(ngModel)]="changeLog"></textarea>
            <p *ngIf="error2" style="color:red;">Please enter a description of the
                changes
                made.</p>

        </div>
    </nz-modal>
    <div class="training-header" style="position:relative;">
        <!--
            <div class="header-left">
                <i *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                    [ngClass]="selectedTraining.iconClass" nz-tooltip nzTooltipTitle="click to change icon"
                    style="display: inline-block;font-size:54px;cursor: pointer;margin:10px;vertical-align: middle;"
                    [ngStyle]="{'color': selectedTraining.iconColor}" (click)="showIconSelectModal()">
                </i>
                <i *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                    [ngClass]="selectedTraining.iconClass"
                    style="display: inlne-block;font-size:54px;margin:10px;vertical-align: middle;"
                    [ngStyle]="{'color': selectedTraining.iconColor}">
                </i>
            </div>
            -->
        <nz-modal [(nzVisible)]="messageDialogVisible" nzTitle="Email Interest List"
            (nzOnCancel)="handleEmailInterestListCancel()" (nzOnOk)="emailInterestList()">
            <div style="display:block;padding-top:5px;" *ngFor="let email of selectedTraining.interestList; index as i">
                {{ email }}
                <i nz-icon nzType="delete" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'" nz-popconfirm
                    nzPopconfirmTitle="Delete this email address?" [nzPopconfirmTrigger]="'click'"
                    [nzPopconfirmPlacement]="'right'" (nzOnConfirm)="deleteInterestListItem(i)"
                    style="font-size:14px;vertical-align: baseline; margin-left:10px;"></i>
            </div>
            <div style="z-index: 1000;background-color: white;">
                <label style="margin-bottom: 3px;font-size:12px;color:#aaaaaa;">Subject</label>
                <input nz-input type="text" placeholder="Subject" ngDefaultControl [(ngModel)]="subject"
                    style="margin-bottom:10px;">
                <label style="margin-bottom: 3px;font-size:12px;color:#aaaaaa;">Message</label>
                <textarea rows="4" nz-input [(ngModel)]="messageBody"></textarea>
            </div>
        </nz-modal>

        <nz-modal [(nzVisible)]="isIconSelectModalVisible" nzTitle="Select Icon" nzWidth="800"
            (nzOnCancel)="handleIconSelectCancel()" [nzOkDisabled]="okDisabled" [nzCancelDisabled]="cancelDisabled"
            (nzOnOk)="handleIconSelectConfirm()" style="width:800px;">
            <app-icon-picker (icon)="setIcon($event)"></app-icon-picker>
        </nz-modal>
        <div style="display:flex;align-items:center;justify-content: space-between;">
            <div *ngIf="production === 'false' && mode === 'Edit'" style="display:inline-block;margin-left:10px;">
                <i *ngIf="selectedTraining.status === 'unlocked'" nz-icon nzType="unlock" [nzTheme]="'twotone'"
                    [nzTwotoneColor]="'#52c41a'" style="font-size:20px;vertical-align: baseline;" nz-tooltip
                    nzTooltipTitle="This training is unlocked"></i>
                <i *ngIf="selectedTraining.status === 'locked'" nz-icon nzType="lock" [nzTheme]="'twotone'"
                    [nzTwotoneColor]="'red'" style="font-size:20px;vertical-align: baseline;" nz-tooltip
                    nzTooltipTitle="This training is locked">
                </i>
            </div>
            <div>
                <div style="margin-left:20px;display: inline-block;">
                    <i *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        [ngClass]="selectedTraining.iconClass" nz-tooltip nzTooltipTitle="click to change icon"
                        style="display: inline-block;font-size:24px;cursor: pointer;margin:10px;vertical-align: middle;"
                        [ngStyle]="{'color': selectedTraining.iconColor}" (click)="showIconSelectModal()">
                    </i>
                    <i *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                        [ngClass]="selectedTraining.iconClass"
                        style="display: inlne-block;font-size:24px;margin:10px;vertical-align: middle;"
                        [ngStyle]="{'color': selectedTraining.iconColor}">
                    </i>
                </div>
                <div style="margin-right:30px;display: inline-block;width:fit-content;">
                    <input *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        style="display:inline-block;color:black;width:350px;font-size:14px;" nz-input
                        [(ngModel)]="selectedTraining.title" nzSize="small" (keydown.enter)="saveTraining(true)"
                        (blur)="saveTraining(true)" />
                    <div *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                        style="display:inline-block;width:fit-content;">
                        <span style="font-size:22px;vertical-align: middle;">&nbsp;{{selectedTraining.title}}</span>
                    </div>
                </div>
            </div>
            <div style="display:inline-block;margin-right:10px;">
                <div *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                    style="display:inline-block;">
                    <span
                        style="display:inline-block;font-size:12px;color:#bbbbbb;">Version&nbsp;&nbsp;:&nbsp;&nbsp;</span>

                    <a nz-dropdown [nzDropdownMenu]="menu" nzTrigger="click"
                        style="display:inline-block;font-size:12px;">
                        <!--
                    <i [ngClass]="selectedTraining.versions[0].iconClass"
                        style="display: inlne-block;font-size:16px;vertical-align: baseline;margin-right:10px;"
                        [ngStyle]="{'color': selectedTraining.versions[0].iconColor}">
                    </i>
                    <span style="display:inline-block;font-size:16px;">{{selectedTraining.versions[0].title}}</span>
                    &nbsp;&nbsp;
                    <span style="font-size:14px;color:#bbbbbb;">version</span>
                -->
                        <span style="font-size:12px;">
                            {{ versionFormatter(selectedTraining.versions[0].version)}}</span>
                        &nbsp;&nbsp;<span *ngIf="selectedTraining.status === 'unlocked'"
                            style="font-size:12px;color:#bbbbbb;">(being
                            edited)</span>
                        <i nz-icon nzType="down" style="margin-left:5px;font-size:12px;vertical-align: middle;"></i>
                    </a>
                    <nz-dropdown-menu #menu="nzDropdownMenu" nzPlacement="bottomRight"
                        style="z-index:100010;display:inline-block;">
                        <ul nz-menu nzSelectable>
                            <li *ngFor="let version of selectedTrainingVersions; index as i" style="font-size:12px;"
                                nz-menu-item (click)="loadVersion(version, i)">
                                <!--
                            <i [ngClass]="version.iconClass"
                                style="display: inlne-block;font-size:16px;margin:0 5px;vertical-align: baseline;margin-right:10px;"
                                [ngStyle]="{'color': version.iconColor}">
                            </i>
                            <span
                                style="display:inline-block;font-size:12px;margin-right:20px;">{{version.title}}</span>
                            &nbsp;&nbsp;
                            -->
                                <span
                                    style="display:inline-block;font-size:12px;margin-right:20px;">v&nbsp;{{versionFormatter(version.version)}}</span>
                                &nbsp;&nbsp;<span *ngIf="" style="font-size:14px;color:#bbbbbb;">(being
                                    edited)</span>
                                <span
                                    style="display:inline-block;font-size:12px;">{{versionFormatter(version.changeLog)}}</span>
                            </li>
                        </ul>
                    </nz-dropdown-menu>
                    <span class="separator">|</span>
                </div>
                <!--
                <div *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                    style="font-size:12px;width:fit-content;display:inline-block;">
                    <span style="color:#bbbbbb;">Version : </span>
                    <span>
                        {{versionFormatter(selectedTraining.versions[0].version)}}
                    </span>
                </div>
                -->
                <div *ngIf="production === 'false' && selectedTraining.status === 'unlocked'"
                    style="width:fit-content;display:inline-block;">
                    <span
                        style="display:inline-block;font-size:12px;color:#bbbbbb;">Mode&nbsp;&nbsp;:&nbsp;&nbsp;</span>
                    <a nz-dropdown [nzDropdownMenu]="menu" nzTrigger="click"
                        style="display:inline-block;font-size:12px; ">{{ mode }}
                        <i nz-icon nzType="down" style="font-size:12px;vertical-align: middle;"></i>
                    </a>
                    <nz-dropdown-menu #menu="nzDropdownMenu" [nzPlacement]="'bottomRight'" style="z-index:100010;">
                        <ul nz-menu nzSelectable>

                            <li style="font-size:12px;" nz-menu-item (click)="setMode('Edit')"
                                [ngClass]="{'selected-status': mode === 'Edit'}">Edit</li>
                            <li style="font-size:12px;" nz-menu-item (click)="setMode('Preview')"
                                [ngClass]="{'selected-status': mode === 'Preview'}">Preview</li>
                        </ul>
                    </nz-dropdown-menu>
                    <span class="separator">|</span>
                </div>
                <!--
                <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && currentVersionIndex === 0"
                    (click)="startTour()" class="header-icon" nz-button nzType="default" nzShape="circle">
                    <i nz-icon nzType="car" theme="twotone" style="vertical-align: top;"></i>
                </button>
                -->
                <div style="display:inline-block;">
                    <button
                        *ngIf="production === 'false' && selectedTraining.status === 'locked' && currentVersionIndex === 0"
                        (click)="unlockTraining()" class="header-icon" nz-button nzType="default" nzShape="circle"
                        nz-tooltip nzTooltipTitle="Edit Training">
                        <i nz-icon nzType="unlock" theme="twotone" style="vertical-align: top;"></i>
                    </button>
                    <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        nz-button nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Save As New Version"
                        class="header-icon" (click)="saveNewVersion()" [disabled]="!selectedTraining.isDirty">
                        <i nz-icon nzType="lock" theme="twotone" [nzTwotoneColor]="'blue'" style="vertical-align: top;">
                        </i>
                    </button>
                    <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        nz-button nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Add a New Page"
                        class="header-icon" (click)="addNewPage('single')">
                        <i nz-icon nzType="file-add" theme="twotone" [nzTwotoneColor]="'#52c41a'"
                            style="vertical-align: top;">
                        </i>
                    </button>
                    <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        nz-button nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Configure Training"
                        class="header-icon" (click)="showTrainingConfig = true">
                        <i nz-icon nzType="setting" theme="twotone" [nzTwotoneColor]="'pink'"
                            style="vertical-align: top;">
                        </i>
                    </button>
                    <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                        nz-button nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Discard Changes"
                        [disabled]="!selectedTraining.isDirty" style="color:orange;" class="header-icon"
                        (click)="showRollbackConfirm()">
                        <i nz-icon nzType="rollback" theme="outline" style="vertical-align: top;">
                        </i>
                    </button>
                    <button *ngIf="authenticatedUser.appAdmin" nz-button nzType="default" nzShape="circle" nz-tooltip
                        nzTooltipTitle="Show Debug Info" class="header-icon" (click)="debug = !debug">
                        <i nz-icon nzType="bug" [nzTheme]="'twotone'" style="vertical-align: top;"></i>
                    </button>
                    <button nz-button nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Close Training"
                        class="header-icon" (click)="closeViewer()">
                        <i nz-icon nzType="close" theme="outline" style="vertical-align: top;color:red;">
                        </i>
                    </button>
                </div>
            </div>
            <!--
                <button *ngIf="production === 'false' && selectedTraining.status === 'unlocked'" nz-button
                    nzType="default" nzShape="circle" nz-tooltip nzTooltipTitle="Delete Training" class="header-icon"
                    (click)="showConfirmDelete()">
                    <i nz-icon nzType="delete" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'"
                        style="vertical-align: top;">
                    </i>
                </button>
                -->
            <ng-template #vertSeparator>
                <span style="font-size:16px;color:black;">|</span>
            </ng-template>
            <nz-modal [(nzVisible)]="showConfirmDeleteTrainingWithoutAffectedUsers"
                nzTitle="Delete Training Confirmation" (nzOnCancel)="cancelDelete()" (nzOnOk)="confirmDelete()"
                nzOkText="Delete Training">
                <div style="display:block;font-weight: 300;">
                    Are you sure you want to delete this Training?
                </div>
            </nz-modal>
            <nz-modal [(nzVisible)]="showAssignToUserDialog" nzTitle="Assign to User" [nzOkDisabled]="assignToDisabled"
                (nzOnCancel)="cancelAssignToUser()" (nzOnOk)="confirmAssignmentToUser()" nzOkText="Assign to User">
                <div *ngIf="assignableUsers.length > 0" style="display:block;font-weight: 300;">
                    Select the user you would like to assign this training to.
                </div>
                <div *ngIf="assignableUsers.length === 0 && teamMembers.length > 0"
                    style="display:block;font-weight: 300;">
                    This training has already been assigned to all members of your team!
                </div>
                <div *ngIf="teamMembers.length === 0" style="display:block;font-weight: 300;">
                    You have not added any team members yet!
                </div>
                <div *ngFor="let userId of assignableUsers" style="display:block;font-weight: 500;">
                    <div (click)="selectTeamMemberToAssign(userId)"
                        style="display:block;padding:10px 20px;font-weight: 500;"
                        [ngClass]="{'selected-user-to-assign': userId === currentSelectedUserToAssign}"
                        class="user-to-assign">
                        {{myTeamHash[userId].firstName}} {{myTeamHash[userId].lastName}}
                    </div>
                </div>
            </nz-modal>

            <nz-modal [(nzVisible)]="showConfirmDeleteTrainingWithAffectedUsers" nzTitle="Delete Training Confirmation"
                (nzOnCancel)="cancelDelete()" (nzOnOk)="confirmDelete()" nzOkText="Delete Training">
                <div style="display:block;font-weight: 300;">
                    This training will be removed from the assigned trainings of the following users:
                </div>
                <div style="display:block;padding:20px;font-weight: 500;">
                    <div *ngFor="let user of usersAffected; index as i">
                        {{user.firstName}} {{user.lastName}}
                    </div>
                </div>
            </nz-modal>
            <nz-modal [(nzVisible)]="showConfirmDeleteTrainingWithoutAffectedUsers"
                nzTitle="Delete Training Confirmation" (nzOnCancel)="cancelDelete()" (nzOnOk)="confirmDelete()"
                nzOkText="Delete Training">
                <div style="display:block;font-weight: 300;">
                    Are you sure you want to delete this Training?
                </div>
            </nz-modal>
        </div>
    </div>
    <div *ngIf="debug" style="display:block;background-color: white;">
        <div style="width:33%;display: inline-block;">
            <div>
                <div style="display: block;">
                    Selected Training
                </div>
                <div style="height:400px;overflow: scroll;display: block;">
                    <prettyjson style="font-size:8px;" [obj]="selectedTraining"></prettyjson>
                </div>
            </div>
        </div>
        <div style="width:33%;display: inline-block;">
            <div style="display: block;">
                Selected Training Versions
            </div>
            <div style="height:400px;overflow: scroll;display: block;">
                <prettyjson style="font-size:8px;" [obj]="selectedTrainingVersions"></prettyjson>
            </div>
        </div>
        <div style="width:33%;display: inline-block;">
            <div style="display: block;">
                Previous Version
            </div>
            <div style="height:400px;overflow: scroll;display: block;">
                <prettyjson style="font-size:8px;" [obj]="previousVersion"></prettyjson>
            </div>
        </div>
    </div>
    <div
        style="height:fit-content;padding:10px;text-align: center;background-color: #f5f5f5;border-bottom:1px solid #dddddd;">
        <div *ngIf="production === 'false'">
            <div *ngFor="let page of selectedTraining.pages; index as pageIndex" style="float:left;">
                <i *ngIf="page.content[0].type === 'text'" nz-icon nzType="file-text" theme="outline" class="page-icon"
                    [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'none'" nz-icon nzType="file-unknown" theme="outline"
                    class="page-icon" [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'file'" nz-icon [nzType]="page.icon" theme="outline"
                    class="page-icon" [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'url'" nz-icon nzType="global" theme="outline" class="page-icon"
                    [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'video'" nz-icon nzType="video-camera" theme="outline"
                    class="page-icon" [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'assessment'" nz-icon nzType="file-done" theme="outline"
                    class="page-icon" [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
                <i *ngIf="page.content[0].type === 'html'" nz-icon nzType="html5" theme="outline" class="page-icon"
                    [ngClass]="{'current-page': currentPageId === page._id}"
                    style="font-size:22px;vertical-align: middle;" (click)="setCurrentPage(page._id)"></i>
            </div>
        </div>
        <div *ngIf="production === 'true' || mode === 'Preview'">
            <button nz-button nzType="primary" nzShape="circle" nz-tooltip nzTooltipTitle="Previous Page"
                class="header-icon" (click)="loadPrevPage()" [disabled]="currentPageIndex === 0 || !prevIsActive">
                <i nz-icon nzType="left" theme="outline" style="vertical-align: top;">
                </i>
            </button>
            <button nz-button nzType="primary" nzShape="circle" nz-tooltip nzTooltipTitle="Next Page"
                class="header-icon" (click)="loadNextPage()"
                [disabled]="currentPageIndex > selectedTraining.pages.length - 1 || !nextIsActive">
                <i nz-icon nzType="right" theme="outline" style="vertical-align: top;">
                </i>
            </button>
            <!--
            <button *ngIf="showCloseButton" nz-button nzType="primary" nzDanger nzShape="circle"
                nz-tooltip nzTooltipTitle="Close Training" class="header-icon" (click)="closeViewer()">
                <i nz-icon nzType="close" theme="outline" style="vertical-align: top;">
                </i>
            </button>
            -->
        </div>
        <div style="clear: both;"></div>
    </div>
    <nz-drawer [nzWidth]="600" nzTitle="Training Configuration" [nzClosable]="true" [nzVisible]="showTrainingConfig"
        nzPlacement="right" (nzOnClose)="showTrainingConfig = false">
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;font-size:12px;color:black;">Category</label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">
                <input style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:80%;" nz-input
                    [(ngModel)]="selectedTraining.category" nzSize="small" (ngModelChange)="onCategoryChange($event)"
                    [nzAutocomplete]="autoCategory" (keydown.enter)="setCategory($event)"
                    (blur)="setCategory($event)" />
                <nz-autocomplete [nzDataSource]="matchingCategories" #autoCategory></nz-autocomplete>
            </div>
        </div>
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;font-size:12px;color:black;">Subcategory</label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">
                <input style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:80%;" nz-input
                    ngDefaultControl [(ngModel)]="selectedTraining.subcategory" nzSize="small"
                    (ngModelChange)="onSubcategoryChange($event)" [nzAutocomplete]="autoSubcategory"
                    (keydown.enter)="setSubcategory($event)" (blur)="setSubcategory($event)" />
                <nz-autocomplete [nzDataSource]="matchingSubcategories" #autoSubcategory>
                </nz-autocomplete>
            </div>
        </div>
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;font-size:12px;color:black;">Job Title</label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">
                <input style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:80%;" nz-input
                    [(ngModel)]="selectedTraining.jobTitle" ngDefaultControl nzSize="small"
                    (ngModelChange)="onJobTitleChange($event)" [nzAutocomplete]="auto"
                    (keydown.enter)="setJobTitle($event)" (blur)="setJobTitle($event)" />
                <nz-autocomplete [nzDataSource]="matchingJobTitles" #auto></nz-autocomplete>
            </div>
        </div>
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;display: inline-block;font-size:12px;color:black;">
                    Estimated Time To Complete
                </label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">
                <nz-input-number nzSize="small" nzId="estTimeToComplete" class="foo" style="font-size:12px;"
                    [(ngModel)]="selectedTraining.estimatedTimeToComplete" [nzMin]="10" [nzMax]="240" [nzStep]="5"
                    (ngModelChange)="configChanged($event)">
                </nz-input-number>
                <span style="display:inline-block;font-size:12px;">&nbsp;&nbsp; minutes</span>
            </div>
        </div>
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;font-size:12px;color:black;">Share With Other
                    Teams</label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">

                <label nz-checkbox [(ngModel)]="selectedTraining.shared" ngDefaultControl
                    (click)="saveTraining()"></label>
            </div>
        </div>
        <div class="config-page-row">
            <div style="width:35%;text-align: right;display:inline-block;padding-right:10px;">
                <label style="margin-bottom: 0;font-size:12px;color:black;">Interest List</label>
            </div>
            <div style="width:60%;text-align: left;display:inline-block;padding-left:10px;">
                <div>
                    <div style="width:80%;text-align: left;display:inline-block;">
                        <input nz-input nzSize="small" class="foo" style="font-size:12px;" [(ngModel)]="emailAddr"
                            placeholder="Email Address" ngDefaultControl (keydown.enter)="addEmailToInterestList()" />
                    </div>
                </div>

                <div style="display:block;padding-top:5px;"
                    *ngFor="let email of selectedTraining.interestList; index as i">
                    {{ email }}
                    <i nz-icon nzType="delete" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'" nz-popconfirm
                        nzPopconfirmTitle="Delete this email address?" [nzPopconfirmTrigger]="'click'"
                        [nzPopconfirmPlacement]="'right'" (nzOnConfirm)="deleteInterestListItem(i)"
                        style="font-size:14px;vertical-align: baseline; margin-left:10px;"></i>
                </div>
            </div>
        </div>
    </nz-drawer>
    <div class="main-content-container">
        <div class="main-content">
            <!--
            <div class="toc">
                <div class="toc-text-container">
                    <div #toc style="position: relative;text-align: left;">
                        <div class="toc-title">
                            <span style="text-align: center;">Table of Contents</span>
                            < !--
                            <i nz-icon nzType="unordered-list" [nzTheme]="'outline'" (click)="toggleTOC(false)"
                                style="float:right;cursor:pointer;font-size:24px;vertical-align: baseline;margin-left:10px;"></i>
                                -- >
                        </div>
                        <div *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                            class="toc-entry" (click)="setCurrentPage('config')"
                            [ngClass]="{'active-toc':currentPageId === 'config', 'disabled': assessmentInProgress}"
                            joyrideStep="viewerStep1" title="Configure Training Properties"
                            text="Configure your training here.">
                            < !--
                            <i *ngIf="!selectedTraining.isValid['config']" nz-icon nzType="minus" [nzTheme]="'outline'"
                                class="checklist-not-done"></i>
                            <i *ngIf="selectedTraining.isValid['config']" nz-icon nzType="check" [nzTheme]="'outline'"
                                class="checklist-done"></i>
                                -- >
                            Training Configuration
                        </div>
                        <div class="toc-entry" (click)="setCurrentPage('intro')"
                            [ngClass]="{'active-toc':currentPageId === 'intro', 'disabled': assessmentInProgress}"
                            joyrideStep="viewerStep2" title="Customize the training Introduction "
                            text="Customize your trainings introduction, executive summary, and goals.">
                            < !--
                            <i *ngIf="!selectedTraining.isValid['intro'] && production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                                nz-icon nzType="minus" [nzTheme]="'outline'" class="checklist-not-done"></i>
                            <i *ngIf="selectedTraining.isValid['intro'] && production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                                nz-icon nzType="check" [nzTheme]="'outline'" class="checklist-done"></i>
                                -- >
                            {{selectedTraining.introductionLabel}}
                        </div>
                        <div *ngIf="production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                            class="toc-entry" style="cursor: default;" [ngClass]="{'disabled': assessmentInProgress}"
                            (click)="setCurrentPage('mainContent')" joyrideStep="viewerStep3"
                            title="Select a training template." text="">
                            < !--
                            <i *ngIf="!selectedTraining.isValid['mainContent']" nz-icon nzType="minus"
                                [nzTheme]="'outline'" class="checklist-not-done"></i>
                            <i *ngIf="selectedTraining.isValid['mainContent']" nz-icon nzType="check"
                                [nzTheme]="'outline'" class="checklist-done"></i>
                                -- >
                            Main Content
                        </div>
                        <div *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                            style="cursor: default;padding:5px;margin-top:1px;vertical-align: middle;">
                            Main Content
                        </div>
                        <div *ngFor="let page of selectedTraining.pages; index as pageIndex"
                            class="toc-main-content-entry" (click)="setCurrentPage(page._id)"
                            [ngClass]="{'active-toc':currentPageId === page._id, 'disabled': assessmentInProgress}">
                            <div
                                style="display:inline-block;line-height:18px;padding-left:5px;width:100%;overflow: hidden;">
                                <i nz-icon [nzType]="page.icon" [nzTheme]="'twotone'" [nzTwotoneColor]="page.color"
                                    class="toc-icon" style="margin-right:10px;">
                                </i>
                                <div style="display: inline-block;overflow: hidden;">
                                    {{page.title}}
                                </div>
                            </div>
                        </div>
                        <div *ngIf="selectedTraining.useAssessment || selectedTraining.status === 'unlocked' && production === 'false' && mode === 'Edit'"
                            class="toc-entry" (click)="setCurrentPage('assessment')"
                            [ngClass]="{'active-toc':currentPageId === 'assessment', 'disabled': currentUser}">
                            < !--
                            <i *ngIf="!selectedTraining.isValid['assessment'] && production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                                nz-icon nzType="minus" [nzTheme]="'outline'" class="checklist-not-done"></i>
                            <i *ngIf="selectedTraining.isValid['assessment'] && production === 'false' && selectedTraining.status === 'unlocked' && mode === 'Edit'"
                                nz-icon nzType="check" [nzTheme]="'outline'" class="checklist-done" style=""></i>
                                -- >
                            Assessment
                        </div>
                    </div>
                </div>
            </div>
        -->

            <div class="page-container">
                <!--
                <div *ngIf="currentPageId === 'comments'" class="page">
                    <h3 style="display:inline-block;text-align: left;margin-bottom:30px;">Comments</h3>
                    <div style="padding:20px;background-color:white;">
                        <nz-list *ngIf="data.length" [nzDataSource]="data" [nzRenderItem]="item"
                            [nzItemLayout]="'horizontal'">
                            <ng-template #item let-item>
                                <nz-comment [nzAuthor]="item.author" [nzDatetime]="item.displayTime">
                                    <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="item.avatar"></nz-avatar>
                                    <nz-comment-content>
                                        <p>{{ item.content }}</p>
                                    </nz-comment-content>
                                </nz-comment>
                            </ng-template>
                        </nz-list>
                        <nz-comment>
                            <nz-avatar nz-comment-avatar nzIcon="user" [nzSrc]="user.avatar"></nz-avatar>
                            <nz-comment-content>
                                <nz-form-item>
                                    <textarea ngDefaultControl [(ngModel)]="inputValue" nz-input rows="4"></textarea>
                                </nz-form-item>
                                <nz-form-item>
                                    <button nz-button nzType="primary" [nzLoading]="submitting" nzSize="small"
                                        [disabled]="!inputValue" (click)="handleSubmit()">
                                        Add Comment
                                    </button>
                                </nz-form-item>
                            </nz-comment-content>
                        </nz-comment>

                    </div>
                </div>
                -->
                <!--
                <div *ngIf="currentPageId === 'mainContent' && selectedTraining.status === 'unlocked' && production === 'false'"
                    class="page">
                    <h3 style="text-align: center;margin-bottom:20px;">Main Content</h3>
                    <div style="text-align: left;font-size:12px;">
                        <div style="margin-top: 10px;">
                            <nz-alert nzType="info" [nzMessage]="mainContentTitleTemplate"
                                [nzDescription]="mainContentDescriptionTemplate" nzShowIcon nzCloseable="true"
                                style="margin-bottom:20px;" [nzCloseText]="mainContentCloseTemplate">
                            </nz-alert>
                            <ng-template #mainContentCloseTemplate>
                                <i nz-icon nzType="close-circle" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'"
                                    style="font-size: 24px;"></i>
                            </ng-template>
                            <ng-template #mainContentTitleTemplate>
                                <div style="width:100%;padding:10px 20px 20px 0;">
                                    Welcome to the Content Wizard. This is where you setup the content
                                    for this training.
                                </div>
                            </ng-template>
                            <ng-template #mainContentDescriptionTemplate>
                                <p>
                                    Simply select a template, customize the title and introduction, upload your content
                                    and you are done!
                                </p>
                            </ng-template>
                            < !--
                            <div style=" margin:40px 0;position:relative;">
                                Select the content type you would like to upload
                                <i [@itemFocus]="itemWithFocus === 'doc' ? 'in' : 'out'" nz-icon nzType="file"
                                    (mouseenter)="itemWithFocus = 'doc'" (mouseleave)="itemWithFocus = ''"
                                    [nzTheme]="'twotone'" (click)="openPicker('doc')"
                                    style="cursor:pointer;position:absolute;bottom:-30px;left:0;" nz-tooltip
                                    nzTooltipTitle="Upload a Document"></i>
                                <i [@itemFocus]="itemWithFocus === 'video' ? 'in' : 'out'" nz-icon
                                    (click)="openPicker('video')" nzType="video-camera" [nzTheme]="'twotone'"
                                    (mouseenter)="itemWithFocus = 'video'" (mouseleave)="itemWithFocus = ''"
                                    style="cursor:pointer;position:absolute;bottom:-30px;left:60px;" nz-tooltip
                                    nzTooltipTitle="Upload a Video"></i>
                                <i [@itemFocus]="itemWithFocus === 'audio' ? 'in' : 'out'" nz-icon nzType="audio"
                                    [nzTheme]="'twotone'" (click)="openPicker('audio')"
                                    (mouseenter)="itemWithFocus = 'audio'" (mouseleave)="itemWithFocus = ''"
                                    style="cursor:pointer;position:absolute;bottom:-30px;left:120px;" nz-tooltip
                                    nzTooltipTitle="Upload an Audio File"></i>
                                <i [@itemFocus]="itemWithFocus === 'image' ? 'in' : 'out'" nz-icon nzType="file-image"
                                    [nzTheme]="'twotone'" (click)="openPicker('image')"
                                    (mouseenter)="itemWithFocus = 'image'" (mouseleave)="itemWithFocus = ''"
                                    style="cursor:pointer;position:absolute;bottom:-30px;left:180px;" nz-tooltip
                                    nzTooltipTitle="Upload an Image File"></i>
                            </div>
                            -- >

                            <div class="page-template-container">
                                <div style="float:left;margin-right:5%;">
                                    <div style="margin-bottom: 5px;">Single Document Template</div>
                                    <div class="page-template" (click)="addNewPage('singleContent')">
                                        <div
                                            style="font-size: 10px;display:block;text-align:center;height:5%;padding:5px;margin-bottom:5%;">
                                            Page Title
                                        </div>
                                        <div
                                            style="font-size: 10px;display:block;text-align:left;height:13%;padding:5px;margin-bottom:2%;border:1px solid #dddddd;">
                                            Page Introduction
                                        </div>
                                        <div
                                            style="font-size: 10px;display:block;text-align:left;height:75%;padding:5px;border:1px solid #dddddd;">
                                            <span style="text-decoration: underline;">Content</span>
                                            <br>documents<br>video<br>audio<br>images<br>web page
                                        </div>
                                    </div>
                                </div>
                                <div style="float:left;margin-right:5%;">
                                    <div style="margin-bottom: 5px;">Two Document Template</div>
                                    <div class="page-template" (click)="addNewPage('doubleContent')">
                                        <div
                                            style="font-size: 10px;display:block;text-align:center;height:5%;padding:5px;margin-bottom:5%;">
                                            Page Title
                                        </div>
                                        <div
                                            style="font-size: 10px;display:block;text-align:left;height:13%;padding:5px;margin-bottom:2%;border:1px solid #dddddd;">
                                            Page Introduction
                                        </div>
                                        <div style="margin-bottom:3%;height:35%;">
                                            <div
                                                style="font-size: 10px;float:left;text-align:left;width:65%;height:100%;padding:5px;border:1px solid #dddddd;">
                                                <span style="text-decoration: underline;">Content</span>
                                                <br>documents<br>video<br>audio<br>images<br>web page
                                            </div>
                                            <div
                                                style="font-size: 10px;float:right;text-align:right;height:100%;width:30%;height:100%;padding:5px;border:1px solid #dddddd;">
                                                <span style="text-decoration: underline;">Content</span><br>
                                                text
                                            </div>
                                            <div style="clear:both;"></div>
                                        </div>
                                        <div style="margin-bottom:3%;height:38%;">
                                            <div
                                                style="font-size: 10px;float:left;text-align:left;width:30%;height:100%;padding:5px;border:1px solid #dddddd;">
                                                <span style="text-decoration: underline;">Content</span><br>
                                                text
                                            </div>
                                            <div
                                                style="font-size: 10px;float:right;text-align:right;width:65%;height:100%;padding:5px;border:1px solid #dddddd;">
                                                <span style="text-decoration: underline;">Content</span>
                                                <br>documents<br>video<br>audio<br>images<br>web page </div>
                                            <div style="clear:both;"></div>
                                        </div>
                                    </div>
                                </div>
                                <div style="clear: both;"></div>
                            </div>
                            < !--
                            <div style="display:block;">
                                <div>
                                    <div class="config-page-row">
                                        <div
                                            style="width:25%;text-align: right;display:inline-block;padding-right:10px;">
                                            <label style="margin-bottom: 0;font-size:12px;color:#bbbbbb;">Title</label>
                                        </div>
                                        <div style="width:70%;text-align: left;display:inline-block;padding-left:10px;">
                                            <input
                                                style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:50%;"
                                                nz-input [(ngModel)]="selectedTraining.category" nzSize="small"
                                                (ngModelChange)="saveTraining(false)" />
                                        </div>
                                    </div>
                                    <div class="config-page-row">
                                        <div
                                            style="width:25%;text-align: right;display:inline-block;padding-right:10px;">
                                            <label
                                                style="margin-bottom: 0;font-size:12px;color:#bbbbbb;">Introduction</label>
                                        </div>
                                        <div style="width:70%;text-align: left;display:inline-block;padding-left:10px;">
                                            <textarea
                                                style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:50%;"
                                                ngDefaultControl [(ngModel)]="selectedTraining.subcategory"
                                                nzSize="small" (ngModelChange)="saveTraining(false)"></textarea>
                                        </div>
                                    </div>
                                    <div class="config-page-row">
                                        <div
                                            style="width:25%;text-align: right;display:inline-block;padding-right:10px;">
                                            <label style="margin-bottom: 0;font-size:12px;color:#bbbbbb;">Job
                                                Title</label>
                                        </div>
                                        <div style="width:70%;text-align: left;display:inline-block;padding-left:10px;">
                                            <input
                                                style="display:inline-block;color:black;margin-bottom:0;font-size:14px;width:50%;"
                                                nz-input [(ngModel)]="selectedTraining.jobTitle" ngDefaultControl
                                                nzSize="small" (ngModelChange)="saveTraining(false)" />
                                        </div>
                                    </div>

                                </div>
                            </div>
                            -- >
                            < !--
                        <div style="margin-top:60px;height:60px;position:relative;">
                            <div style="">
                                Use an existing web page
                            </div>
                            <nz-alert *ngIf="badUrl" nzType="error" nzCloseable="true"
                                nzMessage="URL format error.  URL's must use HTTPS!" nzShowIcon style="margin:10px 0;">
                            </nz-alert>
                            <br>
                            <input style="margin-left:20px;  display:inline-block;color:black;font-size:14px;width:50%;"
                                nz-input [(ngModel)]="pageUrl" nzSize="small" (keydown.enter)="pageUrlChanged()"
                                (blur)="pageUrlChanged()" placeholder="Enter a website URL   https://example.com" />
                        </div>
                        -- >
                        </div>
                    </div>
                </div>
                -->
                <!--
                <div *ngIf="currentPageId === 'intro'" class="page">
                    <h3 style="text-align: center;margin-bottom:20px;">{{selectedTraining.introductionLabel}}</h3>

                    <div>
                        <span
                            *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                            style="color:#bbbbbb;">Introduction</span>
                        <span style="font-size:14px;">
                            <p *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                nz-paragraph (nzContentChange)="contentChanged($event, 'introduction')" nzEditable
                                [(nzContent)]="selectedTraining.introduction"></p>
                            <span
                                *ngIf="mode === 'Preview' || selectedTraining.status === 'locked' || production === 'true'">
                                {{selectedTraining.introduction}}
                            </span>
                        </span>
                    </div>
                    <div style="margin-top:30px;">
                        <span
                            *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                            style="color:#bbbbbb;">Executive Summary Heading</span>
                        <h4>
                            <p *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                nz-paragraph (nzContentChange)="contentChanged($event, 'execSummaryLabel')" nzEditable
                                [(nzContent)]="selectedTraining.execSummaryLabel">
                            </p>
                        </h4>
                        <span
                            *ngIf="mode === 'Preview' || selectedTraining.status === 'locked' || production === 'true'">
                            <h4>{{selectedTraining.execSummaryLabel}}</h4>
                        </span>
                    </div>

                    <div style="padding:0 30px;">
                        <span
                            *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                            style="color:#bbbbbb;">Executive Summary</span>
                        <span style="font-size:14px;">
                            <p *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                nz-paragraph (nzContentChange)="contentChanged($event, 'execSummary')" nzEditable
                                [(nzContent)]="selectedTraining.execSummary"></p>
                            <span
                                *ngIf="mode === 'Preview' || selectedTraining.status === 'locked' || production === 'true'">
                                {{selectedTraining.execSummary}}
                            </span>
                        </span>
                    </div>
                </div>
                -->
                <div>
                    <div *ngFor="let page of selectedTraining.pages; index as pageIndex">
                        <!-- page actions -->
                        <div *ngIf="currentPageId === page._id" class="page">
                            <div *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                style="position:absolute;top:20px;right:20px;width:fit-content;height:fit-content;">
                                <!--
                                <i nz-icon nzType="up-square" [ngClass]="{'disabled': pageIndex === 0}"
                                    [nzTheme]="'twotone'" nz-tooltip nzTooltipTitle="Move document up in list"
                                    (click)="movePage(page, -1)" class="page-action"></i>
                                <i nz-icon nzType="down-square" [nzTheme]="'twotone'" nz-tooltip
                                    [ngClass]="{'disabled': pageIndex === selectedTraining.pages.length - 1}"
                                    nzTooltipTitle="Move document down in list" (click)="movePage(page, 1)"
                                    class="page-action"></i>
                                    -->
                                <i nz-icon nzType="delete" [nzTheme]="'twotone'" [nzTwotoneColor]="'red'" nz-tooltip
                                    nzTooltipTitle="Delete Page" nz-popconfirm nzPopconfirmTitle="Delete this Page?"
                                    [nzPopconfirmTrigger]="'click'" [nzPopconfirmPlacement]="'right'"
                                    (nzOnConfirm)="confirmDeletePage(page)" class="page-action"></i>
                            </div>
                            <div *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                class="page-title" (click)="selectSection('title')"
                                [ngClass]="{'page-section-selected': currentSection === 'title'}">
                                <h3 style="text-align: center;margin-bottom:10px;margin-top:20px;">
                                    <p nz-paragraph (nzContentChange)="pageContentChanged($event, page, 'title')"
                                        nzEditable [(nzContent)]="page.title" style="margin-bottom:0;">
                                    </p>
                                </h3>
                            </div>
                            <div
                                *ngIf="mode === 'Preview' || selectedTraining.status === 'locked' || production === 'true'">
                                <span>
                                    <h3 style="text-align: center;margin-bottom:30px;">{{page.title}}</h3>
                                </span>
                            </div>

                            <div *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                class="page-intro">
                                <div style="font-size:16px;">
                                    <p nz-paragraph (nzContentChange)="pageContentChanged($event, pageIndex, 'intro')"
                                        nzEditable [(nzContent)]="page.intro"></p>
                                </div>
                            </div>
                            <div
                                *ngIf="mode === 'Preview' || selectedTraining.status === 'locked' || production === 'true'">
                                <span>
                                    {{page.intro}}
                                </span>
                            </div>

                            <!--
                            <div *ngIf="page.type === 'single'">
                                <app-page-content [page]="page" [production]="production" [mode]="mode"
                                    [selectedTraining]="selectedTraining"></app-page-content>
                            </div>
                            <div *ngIf="page.type === 'double'">
                                <div style="display:block;width:100%;height:40%;">
                                    <div style="float:left;width:70%;">
                                        <app-page-content [data]="page.content[0]"></app-page-content>
                                    </div>
                                    <div style="float:right;width:25%;">
                                        <app-page-content [data]="page.content[1]"></app-page-content>
                                    </div>
                                </div>
                                <div style="display:block;width:100%;height:40%;">
                                    <div style="float:left;width:25%;">
                                        <app-page-content [data]="page.content[2]"></app-page-content>
                                    </div>
                                    <div style="float:right;width:70%;">
                                        <app-page-content [data]="page.content[3]"></app-page-content>
                                    </div>
                                </div>
                            </div>
                            -->

                            <div (click)="selectSection('page.content[0]')"
                                [ngClass]="{'page-content': (mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false')}">
                                <span *ngIf="!showVersion === 'true' && page.content[0].versions"
                                    style="cursor:pointer;font-size:12px;" (click)="showVersions = true">Show
                                    Versions</span>
                                <span *ngIf="showVersion === 'false' && page.content[0].versions"
                                    style="cursor:pointer;font-size:12px;" (click)="showVersions = false">Hide
                                    Versions</span>
                                <div *ngIf="showVersions && page.content[0].versions && (page.content[0].type === 'file' || page.content[0].type === 'video')"
                                    style="display:block;width:100%;margin-top:10px;margin-bottom:5px;font-size:12px;">
                                    <button
                                        *ngIf="mode === 'Edit' && selectedTraining.status === 'unlocked' && production === 'false'"
                                        nz-button nzType="primary" nzSize="small" (click)="uploadNewVersion()"
                                        style="margin-bottom:10px;">
                                        <i nz-icon nzType="upload" [nzTheme]="'outline'"></i>
                                        <span style="text-align:center;font-size:12px;">Upload New Version</span>
                                    </button>
                                    <nz-table nzSize="small" nzBordered="false" nzShowPagination="false"
                                        [nzData]="page.content[0].versions" #versionTable
                                        style="width:100%;background-color: #fafafa;font-size:12px;display:inline-block;">
                                        <thead>
                                            <tr style="font-size:12px;">
                                                <th>Version</th>
                                                <th>Comments</th>
                                                <th>Date Uploaded</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody>
                                            <tr *ngFor="let data of versionTable.data"
                                                [ngClass]="{'current-version': currentVersionIndex === i}"
                                                (click)="viewVersion(i)"
                                                style="cursor: pointer;font-size:12px;background-color: white;line-height:10px;">
                                                <td style="font-size:12px;width:10%;">
                                                    {{ data.version }}
                                                </td>
                                                <td style="font-size:12px;width:50%;">
                                                    {{ data.changeLog }}
                                                </td>
                                                <td style="font-size:12px;width:25%;">
                                                    {{ data.dateUploaded | date:'medium'}}
                                                </td>
                                                <td style="font-size:14px;width:15%;text-align: center;">
                                                    <i nz-icon nzType="download" [nzTheme]="'outline'" nz-tooltip
                                                        nzTooltipTitle="Download Document"></i>
                                                </td>
                                            </tr>
                                        </tbody>
                                    </nz-table>
                                </div>
                                <nz-modal *ngIf="page.content && page.content[0]"
                                    [(nzVisible)]="isNewVersionModalVisible" [nzTitle]="page.content[0].name"
                                    nzWidth="60%" nzOkDisabled="false" nzCancelDisabled="false"
                                    (nzOnCancel)="dismissNewVersionModal()" (nzOnOk)="handleNewVersionContinue()">
                                    <div style="display: inline-block;width:20%;padding-bottom:30px;">
                                    </div>
                                    <div style="display:inline-block;width:80%;">
                                        <h3 nz-title>
                                            What actions should be taken as a result of the changes you have made?
                                        </h3>
                                    </div>
                                    <div style="clear: both;"></div>
                                    <div *ngIf="newVersion" style="display: block;">
                                        <nz-radio-group [(ngModel)]="changeLevel">
                                            <label nz-radio
                                                [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}"
                                                nzValue="major">Reset
                                                training
                                                status for all responsible users. </label>
                                            <label nz-radio
                                                [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}"
                                                nzValue="minor">Notify
                                                all
                                                responsible users.</label>
                                            <label nz-radio
                                                [ngStyle]="{display: 'block', height: '30px',lineHeight: '30px'}"
                                                nzValue="patch">No action
                                                needed.</label>
                                        </nz-radio-group>
                                        <p *ngIf="error1" style="color:red;">Please select one of the 3 options.</p>
                                        <p>
                                            Please describe the changes you have made.
                                        </p>
                                        <textarea rows="4" nz-input [(ngModel)]="newVersion.changeLog"></textarea>
                                        <p *ngIf="error2" style="color:red;">Please enter a description of the
                                            changes
                                            made.</p>

                                    </div>
                                </nz-modal>
                                <div *ngIf="page.content && page.content[0] && page.content[0].type === 'none'">
                                    <div style="display:block;padding-left:40px;padding-top:20px;width:80%;">
                                        <div>
                                            <span style="font-size:24px;font-weight:500;">Upload a File</span>
                                            <div *ngIf="authenticatedUser.appAdmin" class="content-type-row"
                                                (click)="openPicker('all')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="bug"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Any File
                                                </div>
                                            </div>
                                            <div class="content-type-row" (click)="openPicker('text')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="file-text"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Text Files
                                                </div>
                                            </div>
                                            <div class="content-type-row" (click)="openPicker('doc')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="file"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Application Documents - .doc, .docx, .ppt, .pptx, .xls, .xlsx, .ai,
                                                    .pdf, .ps
                                                </div>
                                            </div>
                                            <div class="content-type-row" (click)="openPicker('video')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="video-camera"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Video Files
                                                </div>
                                            </div>
                                            <div class="content-type-row" (click)="openPicker('audio')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="audio"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Audio Files
                                                </div>
                                            </div>
                                            <div class="content-type-row" (click)="openPicker('image')">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="file-image"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Image Files
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display:block;padding-top:20px;width:80%;">
                                            <span style="font-size:24px;font-weight:500;">Embed a Web Page</span>

                                            <div class="content-type-row">
                                                <nz-alert *ngIf="badUrl" nzType="error" nzCloseable="true"
                                                    nzMessage="URL format error.  URL's must use HTTPS!" nzShowIcon
                                                    style="margin:10px 0;">
                                                </nz-alert>
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;color:#4198f7;" nz-icon nzType="global"
                                                        [nzTheme]="'outline'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    <input
                                                        style="display:inline-block;color:black;font-size:14px;width:50%;"
                                                        nz-input [(ngModel)]="pageUrl" nzSize="small"
                                                        (keydown.enter)="pageUrlChanged()" (blur)="pageUrlChanged()"
                                                        placeholder="Enter a website URL   https://example.com" />
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display:block;padding-top:20px;width:80%;">
                                            <span style="font-size:24px;font-weight:500;">Create an HTML Page</span>

                                            <div class="content-type-row"
                                                (click)="this.currentPage.content[0].type = 'html'">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;" nz-icon nzType="html5"
                                                        [nzTheme]="'twotone'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Open HTML editor
                                                </div>
                                            </div>
                                        </div>
                                        <div style="display:block;padding-top:20px;width:80%;">
                                            <span style="font-size:24px;font-weight:500;">Create an Assessment</span>
                                            <div class="content-type-row"
                                                (click)="this.currentPage.content[0].type = 'assessment'">
                                                <div
                                                    style="display:inline-block;width:10%;vertical-align: middle;text-align: center;">
                                                    <i style="font-size:24px;color:#4198f7;" nz-icon nzType="file-done"
                                                        [nzTheme]="'outline'"></i>
                                                </div>
                                                <div style="display:inline-block;width:80%;">
                                                    Open Assessment Wizard
                                                </div>
                                            </div>

                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="page.content && page.content[0] && (page.content[0].type === 'file' || page.content[0].type === 'video')"
                                    style="margin-top:20px;width:100%;height:100%;">
                                    <div style="height:100%;width:100%;text-align: center;">
                                        <!--
                                        <div style="margin-top:20px;text-align: center;">
                                            <span style="display:inline-block;color:#aaaaaa;">
                                                Version {{ currentPage.content[0]Version.version }}
                                            </span>
                                        </div>
                                        -->
                                        <div *ngIf="page.content[0].type === 'video' && page.content[0].versions && page.content[0].versions[0].file"
                                            [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}"
                                            style="text-align: center;margin-top:5px;display: inline-block;">
                                            <vg-player (onPlayerReady)="onPlayerReady($event)"
                                                [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}">

                                                <vg-controls>
                                                    <vg-play-pause></vg-play-pause>
                                                    <vg-playback-button></vg-playback-button>

                                                    <vg-time-display vgProperty="current" vgFormat="mm:ss">
                                                    </vg-time-display>

                                                    <vg-scrub-bar>
                                                        <vg-scrub-bar-current-time></vg-scrub-bar-current-time>
                                                        <vg-scrub-bar-buffering-time></vg-scrub-bar-buffering-time>
                                                    </vg-scrub-bar>

                                                    <vg-time-display vgProperty="left" vgFormat="mm:ss">
                                                    </vg-time-display>
                                                    <vg-time-display vgProperty="total" vgFormat="mm:ss">
                                                    </vg-time-display>

                                                    <vg-track-selector></vg-track-selector>
                                                    <vg-mute></vg-mute>
                                                    <vg-volume></vg-volume>

                                                    <vg-fullscreen></vg-fullscreen>
                                                </vg-controls>
                                                <video [vgMedia]="media" #media id="singleVideo" preload="'auto'"
                                                    [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}"
                                                    [src]="safeUrlHash[page.content[0].versions[0].file.fileStackUrl]"
                                                    crossorigin></video>
                                                <!-- <video [vgMedia]="media" #media id="singleVideo" preload="'auto'"
                                            [src]="(file$ | async)?.versions[currentVersionIndex].safeUrl" crossorigin>
                                            </video>
                                            -->
                                            </vg-player>
                                        </div>
                                        <div *ngIf="page.content[0].type === 'file'"
                                            style="text-align: center;margin-top:5px;width:100%;height:100%;">
                                            <div style="display:inline-block;">
                                                <iframe
                                                    [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}"
                                                    [src]="safeUrlHash[page.content[0].versions[0].file.fileStackUrl]"
                                                    allowfullscreen [width]="contentWidth" [height]="contentHeight">
                                                </iframe>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                <div *ngIf="page.content[0] && page.content[0].type === 'url'"
                                    style="text-align: center;margin-top:5px;"
                                    [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}">
                                    <div style="display: block;color:#bbbbbb;">
                                        {{ page.content[0].versions[0].webUrl }}
                                    </div>
                                    <div style="display:inline-block;">
                                        <iframe [src]="safeUrlHash[page.content[0].versions[0].webUrl]" allowfullscreen
                                            [width]="contentWidth" [height]="contentHeight">
                                        </iframe>
                                    </div>
                                </div>
                                <div *ngIf="page.content[0] && page.content[0].type === 'html'"
                                    style="text-align: center;margin-top:5px;"
                                    [ngStyle]="{'width.px':contentWidth, 'height.px': contentHeight}">
                                    <div style="width:100%;height:60%;">
                                        <quill-editor></quill-editor>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                <!--
                <div *ngIf="currentPageId === 'assessment'" class="page">
                    <h3 style="text-align: center;margin-bottom:30px;">Assessment</h3>
                    <div *ngIf="production === 'true' || selectedTraining.status === 'locked' || mode === 'Preview'"
                        style="position:relative;">
                        <div *ngIf="currentAssessmentItemIndex === -1 && !assessmentComplete">
                            <button nz-button nzType="primary" nzSize="small" (click)="beginAssessment()">Begin
                                Assessment</button>
                        </div>
                        <div
                            *ngIf="assessmentComplete && selectedTraining.status === 'unlocked' && production === 'false'">
                            <button nz-button nzType="primary" nzSize="small" (click)="resetAssessment()">Reset
                                Assessment</button>
                        </div>
                        <div *ngIf="currentAssessmentItemIndex > -1" style="margin-bottom:4px;">
                            <div>
                                <div style="display: inline-block;">
                                    <i nz-icon nzType="check-circle" theme="twotone" [nzTwotoneColor]="'#52c41a'"
                                        style="font-size: 24px;vertical-align: baseline;"></i>
                                    <span style="font-size:20px;margin-right:30px;">
                                        &nbsp;{{ assessmentCorrectCnt }}</span>
                                </div>
                                <div style="display: inline-block;">
                                    <i nz-icon nzType="close-circle" theme="twotone" [nzTwotoneColor]="'red'"
                                        style="font-size: 24px;vertical-align: baseline;display:inline-block;"></i>
                                    <span style="font-size:20px;margin-right:30px;">
                                        &nbsp;{{ assessmentIncorrectCnt }}
                                    </span>
                                </div>
                            </div>
                        </div>
                        <div style="display:block;margin:20px ;">
                            <div *ngIf="assessmentComplete && passedAssessment" style="margin:20px 0;">
                                <nz-alert nzType="success" nzMessage="Congratulations, you passed!" nzShowIcon>
                                </nz-alert>
                            </div>
                            <div *ngIf="assessmentComplete && !passedAssessment" style="margin:20px 0;">
                                <nz-alert nzType="error" nzMessage="Sorry, you did not pass!" nzShowIcon></nz-alert>

                                <button nz-button nzType="primary" nzSize="small" (click)="retake()"
                                    style="display:block;margin-top:20px;">Retake</button>

                            </div>
                        </div>
                        <div *ngIf="assessmentInProgress && !assessmentComplete">
                            <div *ngFor="let item of selectedTraining.assessment.items; index as itemIndex"
                                [@questionSlide]="slideNewQuestionHash[itemIndex] ? 'in' : 'out'"
                                style="position:absolute;top:40px;left:600px;width:100%;height:200px;background-color: white;"
                                [ngStyle]="{'z-index': 10000 - itemIndex}">
                                <div style="width:100%;position:relative;padding:0">
                                    <div
                                        style="color:#bbbbbb;font-size:16px;font-weight:300;margin-right:20px;float:left;">
                                        Question
                                        {{ itemIndex + 1 }}
                                    </div>
                                    <div style="display: inline-block;font-size:16px;">
                                        <div style="color:black;font-weight: 300;">
                                            {{item.question}}
                                        </div>
                                    </div>
                                    <div style="padding:10px 0 0 0;">
                                        <nz-radio-group [(ngModel)]="assessmentResponseHash[itemIndex]"
                                            [nzDisabled]="showNext" style="display:block;"
                                            (ngModelChange)="answeredQuestion(itemIndex)">
                                            <div *ngFor="let choice of item.choices; index as choiceIndex"
                                                style="width:100%;padding-left:50px;position:relative;margin:10px 0;"
                                                [ngClass]="">
                                                <div *ngIf="choice !== ''">
                                                    <i *ngIf="(assessmentResponseHash[itemIndex] !== null || assessmentResponseHash[itemIndex] !== undefined) && assessmentResponseHash[itemIndex] === choiceIndex && assessmentResponseHash[itemIndex] !== item.correctChoice"
                                                        nz-icon nzType="close-circle" theme="twotone"
                                                        [nzTwotoneColor]="'red'"
                                                        style="position:absolute;top:0;left:20px;font-size: 20px;vertical-align: top;"></i>
                                                    <i *ngIf="(assessmentResponseHash[itemIndex] !== null || assessmentResponseHash[itemIndex] !== undefined) && assessmentResponseHash[itemIndex] === choiceIndex && assessmentResponseHash[itemIndex] === item.correctChoice"
                                                        nz-icon nzType="check-circle" theme="twotone"
                                                        [nzTwotoneColor]="'#52c41a'"
                                                        style="position:absolute;top:0;left:20px;font-size: 20px;vertical-align: top;"></i>
                                                    <i *ngIf="showNext && item.correctChoice === choiceIndex" nz-icon
                                                        nzType="check-circle" theme="twotone"
                                                        [nzTwotoneColor]="'#52c41a'"
                                                        style="position:absolute;top:0;left:20px;font-size: 20px;vertical-align: top;"></i>
                                                    <label nz-radio [nzValue]="choiceIndex"
                                                        style="display:inline-block;"></label>
                                                    <span
                                                        style="font-weight:300;color:#bbbbbb;">{{alpha[choiceIndex]}}&nbsp;)&nbsp;&nbsp;</span>
                                                    <span
                                                        style="font-size:14px;color:black;font-weight: 300;">{{choice}}</span>
                                                </div>
                                            </div>
                                        </nz-radio-group>
                                    </div>
                                </div>
                            </div>
                        </div>
                        <div *ngIf="showNext" style="position:absolute;top:330px;left:0;">
                            <button nz-button nzType="primary" nzSize="small" (click)="nextQuestion()">Next
                                Question</button>
                        </div>
                    </div>
                </div>
            -->
            </div>
        </div>
    </div>
</div>
<nz-modal [(nzVisible)]="assignedFromJobTitleDialogIsVisible" [nzTitle]="'Automatic Training Assignment'" nzWidth="50%"
    nzOkDisabled="false" nzCancelDisabled="true" (nzOnOk)="assignedFromJobTitleDialogIsVisible = false">
    <div *ngIf="removedFromJobTitle.length > 0" style="display:inline-block;width:80%;font-size: 16px;">
        The job title associated with this training has changed!
        This training is being removed from the following users: <br><br>
        <div *ngFor="let userId of removedFromJobTitle; index as i"
            style="display: block;margin-left:40px;font-size:14px;font-weight:500;">
            {{ myTeamHash[userId].firstName }} {{ myTeamHash[userId].lastName }}
        </div>
    </div>

    <div *ngIf="assignedFromJobTitle.length > 0" style="display:inline-block;width:80%;font-size: 16px;">
        This training has been assigned to the following users due to their job titles matching<br><br>
        <div *ngFor="let userId of assignedFromJobTitle; index as i"
            style="display: block;margin-left:40px;font-size:14px;font-weight:500;">
            {{ myTeamHash[userId].firstName }} {{ myTeamHash[userId].lastName }}
        </div>
    </div>
</nz-modal>